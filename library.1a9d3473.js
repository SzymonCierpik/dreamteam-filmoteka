!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=i),i.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}})),i.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),i.register("gD1JV",(function(e,t){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return n(e,t)}})),i.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),i.register("fVNic",(function(e,t){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return n(e)}})),i.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==r.default(t)&&"function"!=typeof t?n.default(e):t};var n=a(i("ds8z5")),r=a(i("l5bVx"));function a(e){return e&&e.__esModule?e:{default:e}}})),i.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),i.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),i.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),i.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=i("8NIkP"))&&n.__esModule?n:{default:n}})),i.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}})),i.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return r.default(e)};var n,r=(n=i("8NIkP"))&&n.__esModule?n:{default:n}})),i.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),i.register("hKHmD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}})),i.register("ge8co",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){return o.apply(null,arguments)};var n,r=(n=i("gD1JV"))&&n.__esModule?n:{default:n};function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=a()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r.default(a,n.prototype),a}).apply(null,arguments)}})),i.register("cZGw3",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}})),i.register("2mz0K",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r.default(e)););return e};var n,r=(n=i("fVNic"))&&n.__esModule?n:{default:n}})),window.addEventListener("load",(function(){var e=document.querySelector(".loader");e.classList.add("loader-hidden"),e.addEventListener("transitionend",(function(){}))}));var a=document.querySelector("body"),o=document.querySelector(".fa-regular"),s=document.querySelector("#toggle__checkbox"),u=document.querySelector(".footer");s.addEventListener("click",(function(){a.classList.toggle("dark__theme"),o.classList.toggle("fa-sun"),o.classList.toggle("fa-moon"),u.classList.toggle("dark__theme")}));document.querySelector(".films-cards-set"),document.querySelector("#wrongSearch");var c=function(e){return e.map((function(e){var t;return t=null===e.poster_path?"https://www.more-kino.info/drama/hide-2/hide-2.jpg":"https://image.tmdb.org/t/p/w500/".concat(e.poster_path),'\n        <div class="film-card" data-id="'.concat(e.id,'">\n        <img class="film-img" src="').concat(t,'" alt="').concat(e.title,'" loading="lazy" srcset="https://image.tmdb.org/t/p/original/').concat(e.poster_path,' 2x /> \n        <div class="info">\n        <p class="info-title">').concat(e.original_title,'</p>\n        <p class="info-text">').concat(e.genres.map((function(e){return e.name})).join(", ")," | ").concat(e.release_date.substring(0,4),' <span class="info-rating">').concat(String(e.vote_average).slice(0,3),"</span></p>\n        </div>\n        </div>\n        ")})).join(" ")},l={};function f(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,s,"next",e)}function s(e){f(a,r,i,o,s,"throw",e)}o(void 0)}))}};var h={},d=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(C([])));b&&b!==n&&r.call(b,a)&&(k=b);var E=g.prototype=y.prototype=Object.create(k);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return m.prototype=g,u(E,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},I(_.prototype),u(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(h);try{regeneratorRuntime=d}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}var p=i("l5bVx");function v(e,t){return function(){return e.apply(t,arguments)}}var y,m=Object.prototype.toString,g=Object.getPrototypeOf,k=(y=Object.create(null),function(e){var t=m.call(e);return y[t]||(y[t]=t.slice(8,-1).toLowerCase())}),w=function(e){return e=e.toLowerCase(),function(t){return k(t)===e}},b=function(t){return function(n){return(void 0===n?"undefined":e(p)(n))===t}},E=Array.isArray,I=b("undefined");var _=w("ArrayBuffer");var x=b("string"),T=b("function"),S=b("number"),A=function(e){return null!==e&&"object"==typeof e},C=function(e){if("object"!==k(e))return!1;var t=g(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},O=w("Date"),N=w("File"),R=w("Blob"),D=w("FileList"),L=w("URLSearchParams");function P(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!=e)if("object"!=typeof e&&(e=[e]),E(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var s,u=o?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(n=0;n<c;n++)s=u[n],t.call(null,e[s],s,e)}}function M(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var U="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t,F=function(e){return!I(e)&&e!==U};var V,j,B=(V="undefined"!=typeof Uint8Array&&g(Uint8Array),function(e){return V&&e instanceof V}),q=w("HTMLFormElement"),z=(j=Object.prototype.hasOwnProperty,function(e,t){return j.call(e,t)}),H=w("RegExp"),K=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};P(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},G="abcdefghijklmnopqrstuvwxyz",W="0123456789",Q={DIGIT:W,ALPHA:G,ALPHA_DIGIT:G+G.toUpperCase()+W};var J={isArray:E,isArrayBuffer:_,isBuffer:function(e){return null!==e&&!I(e)&&null!==e.constructor&&!I(e.constructor)&&T(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||T(e.append)&&("formdata"===(t=k(e))||"object"===t&&T(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_(e.buffer)},isString:x,isNumber:S,isBoolean:function(e){return!0===e||!1===e},isObject:A,isPlainObject:C,isUndefined:I,isDate:O,isFile:N,isBlob:R,isRegExp:H,isFunction:T,isStream:function(e){return A(e)&&T(e.pipe)},isURLSearchParams:L,isTypedArray:B,isFileList:D,forEach:P,merge:function e(){for(var t=(F(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&M(n,i)||i;C(n[a])&&C(r)?n[a]=e(n[a],r):C(r)?n[a]=e({},r):E(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&P(arguments[i],r);return n},extend:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys;return P(t,(function(t,r){n&&T(t)?e[r]=v(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&g(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:k,kindOfTest:w,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(E(e))return e;var t=e.length;if(!S(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:q,hasOwnProperty:z,hasOwnProp:z,reduceDescriptors:K,freezeMethods:function(e){K(e,(function(t,n){if(T(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];T(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return E(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:M,global:U,isContextDefined:F,ALPHABET:Q,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&T(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10),n=function(e,r){if(A(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;var i=E(e)?[]:{};return P(e,(function(e,t){var a=n(e,r+1);!I(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)}},Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var X={};function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Object.defineProperty(X,"__esModule",{value:!0}),X.default=function(e,t,n){t&&$(e.prototype,t);n&&$(e,n);return e},J.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ee=Z.prototype,te={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){te[e]={value:e}})),Object.defineProperties(Z,te),Object.defineProperty(ee,"isAxiosError",{value:!0}),Z.from=function(e,t,n,r,i,a){var o=Object.create(ee);return J.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Z.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var ne=Z,re=i("ds8z5"),ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe.default(e,t)};var ae,oe=(ae=i("gD1JV"))&&ae.__esModule?ae:{default:ae};p=i("l5bVx");var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.default=function(e){var t=fe.default();return function(){var n,r=he.default(e);if(t){var i=he.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return de.default(this,n)}};var ue,ce,le,fe=pe(i("aTHs7")),he=pe(i("fVNic")),de=pe(i("jmhxu"));function pe(e){return e&&e.__esModule?e:{default:e}}ce=function(e){var t,n,r=Ie(e),i=r[0],a=r[1],o=new ke(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),s=0,u=a>0?i-4:i;for(n=0;n<u;n+=4)t=ge[e.charCodeAt(n)]<<18|ge[e.charCodeAt(n+1)]<<12|ge[e.charCodeAt(n+2)]<<6|ge[e.charCodeAt(n+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===a&&(t=ge[e.charCodeAt(n)]<<2|ge[e.charCodeAt(n+1)]>>4,o[s++]=255&t);1===a&&(t=ge[e.charCodeAt(n)]<<10|ge[e.charCodeAt(n+1)]<<4|ge[e.charCodeAt(n+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},le=function(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,s=n-r;o<s;o+=a)i.push(_e(e,o,o+a>s?s:o+a));1===r?(t=e[n-1],i.push(me[t>>2]+me[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(me[t>>10]+me[t>>4&63]+me[t<<2&63]+"="));return i.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var ve,ye,me=[],ge=[],ke="undefined"!=typeof Uint8Array?Uint8Array:Array,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",be=0,Ee=we.length;be<Ee;++be)me[be]=we[be],ge[we.charCodeAt(be)]=be;function Ie(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function _e(e,t,n){for(var r,i,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(me[(i=r)>>18&63]+me[i>>12&63]+me[i>>6&63]+me[63&i]);return a.join("")}ge["-".charCodeAt(0)]=62,ge["_".charCodeAt(0)]=63,ve=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},ye=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*v};var xe="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ue=Ae;var Te=2147483647;function Se(e){if(e>Te)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,Ae.prototype),t}function Ae(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return Ne(e)}return Ce(e,t,n)}function Ce(t,n,r){if("string"==typeof t)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Ae.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|Pe(e,t),r=Se(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(t,n);if(ArrayBuffer.isView(t))return function(e){if(vt(e,Uint8Array)){var t=new Uint8Array(e);return De(t.buffer,t.byteOffset,t.byteLength)}return Re(e)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(p)(t)));if(vt(t,ArrayBuffer)||t&&vt(t.buffer,ArrayBuffer))return De(t,n,r);if("undefined"!=typeof SharedArrayBuffer&&(vt(t,SharedArrayBuffer)||t&&vt(t.buffer,SharedArrayBuffer)))return De(t,n,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return Ae.from(i,n,r);var a=function(e){if(Ae.isBuffer(e)){var t=0|Le(e.length),n=Se(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||yt(e.length)?Se(0):Re(e);if("Buffer"===e.type&&Array.isArray(e.data))return Re(e.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Ae.from(t[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(p)(t)))}function Oe(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Ne(e){return Oe(e),Se(e<0?0:0|Le(e))}function Re(e){for(var t=e.length<0?0:0|Le(e.length),n=Se(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function De(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,Ae.prototype),r}function Le(e){if(e>=Te)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Te.toString(16)+" bytes");return 0|e}function Pe(t,n){if(Ae.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||vt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===t?"undefined":e(p)(t)));var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ht(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return dt(t).length;default:if(a)return i?-1:ht(t).length;n=(""+n).toLowerCase(),a=!0}}function Me(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ye(this,t,n);case"utf8":case"utf-8":return Ge(this,t,n);case"ascii":return Qe(this,t,n);case"latin1":case"binary":return Je(this,t,n);case"base64":return Ke(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Ue(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Fe(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),yt(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Ae.from(t,r)),Ae.isBuffer(t))return 0===t.length?-1:Ve(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ve(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Ve(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function je(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(yt(s))return a;e[n+a]=s}return a}function Be(e,t,n,r){return pt(ht(t,e.length-n),e,n,r)}function qe(e,t,n,r){return pt(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function ze(e,t,n,r){return pt(dt(t),e,n,r)}function He(e,t,n,r){return pt(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function Ke(e,t,n){return 0===t&&n===e.length?le(e):le(e.slice(t,n))}function Ge(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(u=e[i+1]))&&(f=(31&a)<<6|63&u)>127&&(o=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){var t=e.length;if(t<=We)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=We));return n}(r)}Ae.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Ae.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Ae.prototype,"parent",{enumerable:!0,get:function(){if(Ae.isBuffer(this))return this.buffer}}),Object.defineProperty(Ae.prototype,"offset",{enumerable:!0,get:function(){if(Ae.isBuffer(this))return this.byteOffset}}),Ae.poolSize=8192,Ae.from=function(e,t,n){return Ce(e,t,n)},Object.setPrototypeOf(Ae.prototype,Uint8Array.prototype),Object.setPrototypeOf(Ae,Uint8Array),Ae.alloc=function(e,t,n){return function(e,t,n){return Oe(e),e<=0?Se(e):void 0!==t?"string"==typeof n?Se(e).fill(t,n):Se(e).fill(t):Se(e)}(e,t,n)},Ae.allocUnsafe=function(e){return Ne(e)},Ae.allocUnsafeSlow=function(e){return Ne(e)},Ae.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Ae.prototype},Ae.compare=function(e,t){if(vt(e,Uint8Array)&&(e=Ae.from(e,e.offset,e.byteLength)),vt(t,Uint8Array)&&(t=Ae.from(t,t.offset,t.byteLength)),!Ae.isBuffer(e)||!Ae.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Ae.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ae.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ae.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Ae.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(vt(a,Uint8Array))i+a.length>r.length?(Ae.isBuffer(a)||(a=Ae.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!Ae.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},Ae.byteLength=Pe,Ae.prototype._isBuffer=!0,Ae.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ue(this,t,t+1);return this},Ae.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ue(this,t,t+3),Ue(this,t+1,t+2);return this},Ae.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ue(this,t,t+7),Ue(this,t+1,t+6),Ue(this,t+2,t+5),Ue(this,t+3,t+4);return this},Ae.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?Ge(this,0,e):Me.apply(this,arguments)},Ae.prototype.toLocaleString=Ae.prototype.toString,Ae.prototype.equals=function(e){if(!Ae.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ae.compare(this,e)},Ae.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},xe&&(Ae.prototype[xe]=Ae.prototype.inspect),Ae.prototype.compare=function(t,n,r,i,a){if(vt(t,Uint8Array)&&(t=Ae.from(t,t.offset,t.byteLength)),!Ae.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===t?"undefined":e(p)(t)));if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),n<0||r>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&n>=r)return 0;if(i>=a)return-1;if(n>=r)return 1;if(this===t)return 0;for(var o=(a>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(o,s),c=this.slice(i,a),l=t.slice(n,r),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},Ae.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ae.prototype.indexOf=function(e,t,n){return Fe(this,e,t,n,!0)},Ae.prototype.lastIndexOf=function(e,t,n){return Fe(this,e,t,n,!1)},Ae.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return je(this,e,t,n);case"utf8":case"utf-8":return Be(this,e,t,n);case"ascii":case"latin1":case"binary":return qe(this,e,t,n);case"base64":return ze(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},Ae.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var We=4096;function Qe(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Je(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Ye(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=mt[e[a]];return i}function Xe(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function $e(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Ze(e,t,n,r,i,a){if(!Ae.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function et(e,t,n,r,i){ut(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function tt(e,t,n,r,i){ut(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function nt(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function rt(e,t,n,r,i){return t=+t,n>>>=0,i||nt(e,0,n,4),ye(e,t,n,r,23,4),n+4}function it(e,t,n,r,i){return t=+t,n>>>=0,i||nt(e,0,n,8),ye(e,t,n,r,52,8),n+8}Ae.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,Ae.prototype),r},Ae.prototype.readUintLE=Ae.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||$e(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},Ae.prototype.readUintBE=Ae.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||$e(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Ae.prototype.readUint8=Ae.prototype.readUInt8=function(e,t){return e>>>=0,t||$e(e,1,this.length),this[e]},Ae.prototype.readUint16LE=Ae.prototype.readUInt16LE=function(e,t){return e>>>=0,t||$e(e,2,this.length),this[e]|this[e+1]<<8},Ae.prototype.readUint16BE=Ae.prototype.readUInt16BE=function(e,t){return e>>>=0,t||$e(e,2,this.length),this[e]<<8|this[e+1]},Ae.prototype.readUint32LE=Ae.prototype.readUInt32LE=function(e,t){return e>>>=0,t||$e(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ae.prototype.readUint32BE=Ae.prototype.readUInt32BE=function(e,t){return e>>>=0,t||$e(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ae.prototype.readBigUInt64LE=gt((function(e){ct(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||lt(e,this.length-8);var r=t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24),i=this[++e]+256*this[++e]+65536*this[++e]+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),Ae.prototype.readBigUInt64BE=gt((function(e){ct(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||lt(e,this.length-8);var r=t*Math.pow(2,24)+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),Ae.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||$e(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Ae.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||$e(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},Ae.prototype.readInt8=function(e,t){return e>>>=0,t||$e(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ae.prototype.readInt16LE=function(e,t){e>>>=0,t||$e(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Ae.prototype.readInt16BE=function(e,t){e>>>=0,t||$e(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Ae.prototype.readInt32LE=function(e,t){return e>>>=0,t||$e(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ae.prototype.readInt32BE=function(e,t){return e>>>=0,t||$e(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ae.prototype.readBigInt64LE=gt((function(e){ct(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||lt(e,this.length-8);var r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24))})),Ae.prototype.readBigInt64BE=gt((function(e){ct(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||lt(e,this.length-8);var r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n)})),Ae.prototype.readFloatLE=function(e,t){return e>>>=0,t||$e(e,4,this.length),ve(this,e,!0,23,4)},Ae.prototype.readFloatBE=function(e,t){return e>>>=0,t||$e(e,4,this.length),ve(this,e,!1,23,4)},Ae.prototype.readDoubleLE=function(e,t){return e>>>=0,t||$e(e,8,this.length),ve(this,e,!0,52,8)},Ae.prototype.readDoubleBE=function(e,t){return e>>>=0,t||$e(e,8,this.length),ve(this,e,!1,52,8)},Ae.prototype.writeUintLE=Ae.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Ze(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},Ae.prototype.writeUintBE=Ae.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Ze(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},Ae.prototype.writeUint8=Ae.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,1,255,0),this[t]=255&e,t+1},Ae.prototype.writeUint16LE=Ae.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Ae.prototype.writeUint16BE=Ae.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Ae.prototype.writeUint32LE=Ae.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Ae.prototype.writeUint32BE=Ae.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Ae.prototype.writeBigUInt64LE=gt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return et(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Ae.prototype.writeBigUInt64BE=gt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return tt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Ae.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ze(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Ae.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ze(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Ae.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ae.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Ae.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Ae.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Ae.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ze(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Ae.prototype.writeBigInt64LE=gt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return et(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Ae.prototype.writeBigInt64BE=gt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return tt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Ae.prototype.writeFloatLE=function(e,t,n){return rt(this,e,t,!0,n)},Ae.prototype.writeFloatBE=function(e,t,n){return rt(this,e,t,!1,n)},Ae.prototype.writeDoubleLE=function(e,t,n){return it(this,e,t,!0,n)},Ae.prototype.writeDoubleBE=function(e,t,n){return it(this,e,t,!1,n)},Ae.prototype.copy=function(e,t,n,r){if(!Ae.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},Ae.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ae.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=Ae.isBuffer(e)?e:Ae.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var at={};function ot(t,n,r){at[t]=function(r){e(ie)(a,r);var i=e(se)(a);function a(){var r;return e(Y)(this,a),r=i.call(this),Object.defineProperty(e(re)(r),"message",{value:n.apply(e(re)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return e(X)(a,[{key:"code",get:function(){return t},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),a}(r)}function st(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function ut(t,n,r,i,a,o){if(t>r||t<n){var s,u="bigint"===(void 0===n?"undefined":e(p)(n))?"n":"";throw s=o>3?0===n||n===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(o+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(o+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(u):">= ".concat(n).concat(u," and <= ").concat(r).concat(u),new at.ERR_OUT_OF_RANGE("value",s,t)}!function(e,t,n){ct(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||lt(t,e.length-(n+1))}(i,a,o)}function ct(e,t){if("number"!=typeof e)throw new at.ERR_INVALID_ARG_TYPE(t,"number",e)}function lt(e,t,n){if(Math.floor(e)!==e)throw ct(e,n),new at.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new at.ERR_BUFFER_OUT_OF_BOUNDS;throw new at.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}ot("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),ot("ERR_INVALID_ARG_TYPE",(function(t,n){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(void 0===n?"undefined":e(p)(n))}),TypeError),ot("ERR_OUT_OF_RANGE",(function(t,n,r){var i='The value of "'.concat(t,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=st(String(r)):"bigint"===(void 0===r?"undefined":e(p)(r))&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=st(a)),a+="n"),i+=" It must be ".concat(n,". Received ").concat(a)}),RangeError);var ft=/[^+/0-9A-Za-z-_]/g;function ht(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function dt(e){return ce(function(e){if((e=(e=e.split("=")[0]).trim().replace(ft,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function pt(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function vt(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function yt(e){return e!=e}var mt=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function gt(e){return"undefined"==typeof BigInt?kt:e}function kt(){throw new Error("BigInt not supported")}var wt=ue;function bt(e){return J.isPlainObject(e)||J.isArray(e)}function Et(e){return J.endsWith(e,"[]")?e.slice(0,-2):e}function It(e,t,n){return e?e.concat(t).map((function(e,t){return e=Et(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var _t=J.toFlatObject(J,{},null,(function(e){return/^is[A-Z]/.test(e)}));var xt=function(e,t,n){if(!J.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=J.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!J.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&J.isSpecCompliantForm(t);if(!J.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(J.isDate(e))return e.toISOString();if(!s&&J.isBlob(e))throw new ne("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(e)||J.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):wt.from(e):e}function c(e,n,i){var s=e;if(e&&!i&&"object"==typeof e)if(J.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(J.isArray(e)&&function(e){return J.isArray(e)&&!e.some(bt)}(e)||(J.isFileList(e)||J.endsWith(n,"[]"))&&(s=J.toArray(e)))return n=Et(n),s.forEach((function(e,r){!J.isUndefined(e)&&null!==e&&t.append(!0===o?It([n],r,a):null===o?n:n+"[]",u(e))})),!1;return!!bt(e)||(t.append(It(i,n,a),u(e)),!1)}var l=[],f=Object.assign(_t,{defaultVisitor:c,convertValue:u,isVisitable:bt});if(!J.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!J.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),J.forEach(n,(function(n,a){!0===(!(J.isUndefined(n)||null===n)&&i.call(t,n,J.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function Tt(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function St(e,t){this._pairs=[],e&&xt(e,this,t)}var At=St.prototype;At.append=function(e,t){this._pairs.push([e,t])},At.toString=function(e){var t=e?function(t){return e.call(this,t,Tt)}:Tt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Ct=St;function Ot(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nt(e,t,n){if(!t)return e;var r,i=n&&n.encode||Ot,a=n&&n.serialize;if(r=a?a(t,n):J.isURLSearchParams(t)?t.toString():new Ct(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Rt,Dt=function(){function t(){e(Y)(this,t),this.handlers=[]}return e(X)(t,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){J.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),t}(),Lt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ct,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(Rt=navigator.product)&&"NativeScript"!==Rt&&"NS"!==Rt)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Mt(e,t){return xt(e,new Pt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Pt.isNode&&J.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}var Ut=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&J.isArray(r)?r.length:a,s?(J.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&J.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&J.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(J.isFormData(e)&&J.isFunction(e.entries)){var n={};return J.forEachEntry(e,(function(e,r){t(function(e){return J.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},Ft={"Content-Type":void 0};var Vt={transitional:Lt,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=J.isObject(e);if(a&&J.isHTMLForm(e)&&(e=new FormData(e)),J.isFormData(e))return i&&i?JSON.stringify(Ut(e)):e;if(J.isArrayBuffer(e)||J.isBuffer(e)||J.isStream(e)||J.isFile(e)||J.isBlob(e))return e;if(J.isArrayBufferView(e))return e.buffer;if(J.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Mt(e,this.formSerializer).toString();if((n=J.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return xt(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(J.isString(e))try{return(t||JSON.parse)(e),J.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Vt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&J.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw ne.from(e,ne.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pt.classes.FormData,Blob:Pt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};J.forEach(["delete","get","head"],(function(e){Vt.headers[e]={}})),J.forEach(["post","put","patch"],(function(e){Vt.headers[e]=J.merge(Ft)}));var jt=Vt,Bt={};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.default=function(e,t){return qt.default(e)||zt.default(e,t)||Kt.default(e,t)||Ht.default()};var qt=Gt(i("8slrw")),zt=Gt(i("7AJDX")),Ht=Gt(i("ifqQW")),Kt=Gt(i("auk6i"));function Gt(e){return e&&e.__esModule?e:{default:e}}var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.default=function(e){return Qt.default(e)||Jt.default(e)||Xt.default(e)||Yt.default()};var Qt=$t(i("kMC0W")),Jt=$t(i("7AJDX")),Yt=$t(i("8CtQK")),Xt=$t(i("auk6i"));function $t(e){return e&&e.__esModule?e:{default:e}}var Zt=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),en=Symbol("internals");function tn(e){return e&&String(e).trim().toLowerCase()}function nn(e){return!1===e||null==e?e:J.isArray(e)?e.map(nn):String(e)}function rn(e,t,n,r,i){return J.isFunction(r)?r.call(this,t,n):(i&&(t=n),J.isString(t)?J.isString(r)?-1!==t.indexOf(r):J.isRegExp(r)?r.test(t):void 0:void 0)}var an=Symbol.iterator,on=Symbol.toStringTag,sn=function(){function t(n){e(Y)(this,t),n&&this.set(n)}return e(X)(t,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=tn(t);if(!i)throw new Error("header name must be a non-empty string");var a=J.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=nn(e))}var a,o,s,u,c,l=function(e,t){return J.forEach(e,(function(e,n){return i(e,n,t)}))};return J.isPlainObject(e)||e instanceof this.constructor?l(e,t):J.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?l((c={},(a=e)&&a.split("\n").forEach((function(e){u=e.indexOf(":"),o=e.substring(0,u).trim().toLowerCase(),s=e.substring(u+1).trim(),!o||c[o]&&Zt[o]||("set-cookie"===o?c[o]?c[o].push(s):c[o]=[s]:c[o]=c[o]?c[o]+", "+s:s)})),c),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=tn(e)){var n=J.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(J.isFunction(t))return t.call(this,r,n);if(J.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=tn(e)){var n=J.findKey(this,e);return!(!n||void 0===this[n]||t&&!rn(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=tn(e)){var i=J.findKey(n,e);!i||t&&!rn(0,n[i],i,t)||(delete n[i],r=!0)}}return J.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!rn(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return J.forEach(this,(function(r,i){var a=J.findKey(n,i);if(a)return t[a]=nn(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=nn(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i;return(i=this.constructor).concat.apply(i,[this].concat(e(Wt)(n)))}},{key:"toJSON",value:function(e){var t=Object.create(null);return J.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&J.isArray(n)?n.join(", "):n)})),t}},{key:an,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var n=e(Bt)(t,2);return n[0]+": "+n[1]})).join("\n")}},{key:on,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=new this(e);return n.forEach((function(e){return i.set(e)})),i}},{key:"accessor",value:function(e){var t=(this[en]=this[en]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=tn(e);t[r]||(!function(e,t){var n=J.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return J.isArray(e)?e.forEach(r):r(e),this}}]),t}();sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),J.freezeMethods(sn.prototype),J.freezeMethods(sn);var un=sn;function cn(e,t){var n=this||jt,r=t||n,i=un.from(r.headers),a=r.data;return J.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function ln(e){return!(!e||!e.__CANCEL__)}function fn(e,t,n){ne.call(this,null==e?"canceled":e,ne.ERR_CANCELED,t,n),this.name="CanceledError"}J.inherits(fn,ne,{__CANCEL__:!0});var hn=fn;function dn(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ne("Request failed with status code "+n.status,[ne.ERR_BAD_REQUEST,ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var pn=Pt.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),J.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),J.isString(r)&&o.push("path="+r),J.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function vn(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function yn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?vn(e,t):t}var mn=Pt.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=J.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var gn=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=i[o];n||(n=u),r[a]=s,i[a]=u;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var h=c&&u-c;return h?Math.round(1e3*f/h):void 0}}};function kn(e,t){var n=0,r=gn(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var wn={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=un.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}J.isFormData(i)&&(Pt.isStandardBrowserEnv||Pt.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=yn(e.baseURL,e.url);function h(){if(u){var r=un.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());dn((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),Nt(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new ne("Request aborted",ne.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new ne("Network Error",ne.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Lt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ne(t,r.clarifyTimeoutError?ne.ETIMEDOUT:ne.ECONNABORTED,e,u)),u=null},Pt.isStandardBrowserEnv){var d=(e.withCredentials||mn(f))&&e.xsrfCookieName&&pn.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in u&&J.forEach(a.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),J.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",kn(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",kn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new hn(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p,v=(p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f))&&p[1]||"";v&&-1===Pt.protocols.indexOf(v)?n(new ne("Unsupported protocol "+v+":",ne.ERR_BAD_REQUEST,e)):u.send(i||null)}))}};J.forEach(wn,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var bn={getAdapter:function(e){for(var t,n,r=(e=J.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=J.isString(t)?wn[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new ne("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(J.hasOwnProp(wn,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!J.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:wn};function En(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hn(null,e)}function In(e){return En(e),e.headers=un.from(e.headers),e.data=cn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bn.getAdapter(e.adapter||jt.adapter)(e).then((function(t){return En(e),t.data=cn.call(e,e.transformResponse,t),t.headers=un.from(t.headers),t}),(function(t){return ln(t)||(En(e),t&&t.response&&(t.response.data=cn.call(e,e.transformResponse,t.response),t.response.headers=un.from(t.response.headers))),Promise.reject(t)}))}var _n=function(e){return e instanceof un?e.toJSON():e};function xn(e,t){t=t||{};var n={};function r(e,t,n){return J.isPlainObject(e)&&J.isPlainObject(t)?J.merge.call({caseless:n},e,t):J.isPlainObject(t)?J.merge({},t):J.isArray(t)?t.slice():t}function i(e,t,n){return J.isUndefined(t)?J.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!J.isUndefined(t))return r(void 0,t)}function o(e,t){return J.isUndefined(t)?J.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(_n(e),_n(t),!0)}};return J.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var a=u[r]||i,o=a(e[r],t[r],r);J.isUndefined(o)&&a!==s||(n[r]=o)})),n}p=i("l5bVx");var Tn="1.3.6",Sn={};["object","boolean","number","function","string","symbol"].forEach((function(t,n){Sn[t]=function(r){return(void 0===r?"undefined":e(p)(r))===t||"a"+(n<1?"n ":" ")+t}}));var An={};Sn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.3.6] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new ne(r(i," has been removed"+(t?" in "+t:"")),ne.ERR_DEPRECATED);return t&&!An[i]&&(An[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Cn={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ne("options must be an object",ne.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],u=void 0===s||o(s,a,e);if(!0!==u)throw new ne("option "+a+" must be "+u,ne.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ne("Unknown option "+a,ne.ERR_BAD_OPTION)}},validators:Sn},On=Cn.validators,Nn=function(){function t(n){e(Y)(this,t),this.defaults=n,this.interceptors={request:new Dt,response:new Dt}}return e(X)(t,[{key:"request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n,r=(t=xn(this.defaults,t)).transitional,i=t.paramsSerializer,a=t.headers;void 0!==r&&Cn.assertOptions(r,{silentJSONParsing:On.transitional(On.boolean),forcedJSONParsing:On.transitional(On.boolean),clarifyTimeoutError:On.transitional(On.boolean)},!1),null!=i&&(J.isFunction(i)?t.paramsSerializer={serialize:i}:Cn.assertOptions(i,{encode:On.function,serialize:On.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=a&&J.merge(a.common,a[t.method]))&&J.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=un.concat(n,a);var o=[],s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var l,f=0;if(!s){var h=[In.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,c),l=h.length,u=Promise.resolve(t);f<l;)u=u.then(h[f++],h[f++]);return u}l=o.length;var d=t;for(f=0;f<l;){var p=o[f++],v=o[f++];try{d=p(d)}catch(e){v.call(this,e);break}}try{u=In.call(this,d)}catch(e){return Promise.reject(e)}for(f=0,l=c.length;f<l;)u=u.then(c[f++],c[f++]);return u}},{key:"getUri",value:function(e){return Nt(yn((e=xn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),t}();J.forEach(["delete","get","head","options"],(function(e){Nn.prototype[e]=function(t,n){return this.request(xn(n||{},{method:e,url:t,data:(n||{}).data}))}})),J.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(xn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Nn.prototype[e]=t(),Nn.prototype[e+"Form"]=t(!0)}));var Rn=Nn,Dn=function(){function t(n){if(e(Y)(this,t),"function"!=typeof n)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var i=this;this.promise.then((function(e){if(i._listeners){for(var t=i._listeners.length;t-- >0;)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},n((function(e,t,n){i.reason||(i.reason=new hn(e,t,n),r(i.reason))}))}return e(X)(t,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}]),t}();var Ln={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ln).forEach((function(t){var n=e(Bt)(t,2),r=n[0],i=n[1];Ln[i]=r}));var Pn=Ln;var Mn=function e(t){var n=new Rn(t),r=v(Rn.prototype.request,n);return J.extend(r,Rn.prototype,n,{allOwnKeys:!0}),J.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(xn(t,n))},r}(jt);Mn.Axios=Rn,Mn.CanceledError=hn,Mn.CancelToken=Dn,Mn.isCancel=ln,Mn.VERSION=Tn,Mn.toFormData=xt,Mn.AxiosError=ne,Mn.Cancel=Mn.CanceledError,Mn.all=function(e){return Promise.all(e)},Mn.spread=function(e){return function(t){return e.apply(null,t)}},Mn.isAxiosError=function(e){return J.isObject(e)&&!0===e.isAxiosError},Mn.mergeConfig=xn,Mn.AxiosHeaders=un,Mn.formToJSON=function(e){return Ut(J.isHTMLForm(e)?new FormData(e):e)},Mn.HttpStatusCode=Pn,Mn.default=Mn;var Un=Mn,Fn=(Un.Axios,Un.AxiosError,Un.CanceledError,Un.isCancel,Un.CancelToken,Un.VERSION,Un.all,Un.Cancel,Un.isAxiosError,Un.spread,Un.toFormData,Un.AxiosHeaders,Un.HttpStatusCode,Un.formToJSON,Un.mergeConfig,"https://api.themoviedb.org/3/"),Vn="b118f38ec77100db6763b4cc83604589";function jn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map(function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un.get("".concat(Fn,"/movie/").concat(n,"?api_key=").concat(Vn,"&language=en-US")).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=3,Promise.all(r);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)}))),Bn.apply(this,arguments)}var qn=i("hKHmD"),zn=(re=i("ds8z5"),{});Object.defineProperty(zn,"__esModule",{value:!0}),zn.default=function(e){return Jn(e)};var Hn=Qn(i("ge8co")),Kn=Qn(i("cZGw3")),Gn=Qn(i("fVNic")),Wn=Qn(i("gD1JV"));function Qn(e){return e&&e.__esModule?e:{default:e}}function Jn(e){var t="function"==typeof Map?new Map:void 0;return Jn=function(e){if(null===e||!Kn.default(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Hn.default(e,arguments,Gn.default(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Wn.default(n,e)},Jn(e)}var Yn,Xn,$n,Zn=Yn={};function er(){throw new Error("setTimeout has not been defined")}function tr(){throw new Error("clearTimeout has not been defined")}function nr(e){if(Xn===setTimeout)return setTimeout(e,0);if((Xn===er||!Xn)&&setTimeout)return Xn=setTimeout,setTimeout(e,0);try{return Xn(e,0)}catch(t){try{return Xn.call(null,e,0)}catch(t){return Xn.call(this,e,0)}}}!function(){try{Xn="function"==typeof setTimeout?setTimeout:er}catch(e){Xn=er}try{$n="function"==typeof clearTimeout?clearTimeout:tr}catch(e){$n=tr}}();var rr,ir=[],ar=!1,or=-1;function sr(){ar&&rr&&(ar=!1,rr.length?ir=rr.concat(ir):or=-1,ir.length&&ur())}function ur(){if(!ar){var e=nr(sr);ar=!0;for(var t=ir.length;t;){for(rr=ir,ir=[];++or<t;)rr&&rr[or].run();or=-1,t=ir.length}rr=null,ar=!1,function(e){if($n===clearTimeout)return clearTimeout(e);if(($n===tr||!$n)&&clearTimeout)return $n=clearTimeout,clearTimeout(e);try{$n(e)}catch(t){try{return $n.call(null,e)}catch(t){return $n.call(this,e)}}}(e)}}function cr(e,t){this.fun=e,this.array=t}function lr(){}Zn.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ir.push(new cr(e,t)),1!==ir.length||ar||nr(ur)},cr.prototype.run=function(){this.fun.apply(null,this.array)},Zn.title="browser",Zn.browser=!0,Zn.env={},Zn.argv=[],Zn.version="",Zn.versions={},Zn.on=lr,Zn.addListener=lr,Zn.once=lr,Zn.off=lr,Zn.removeListener=lr,Zn.removeAllListeners=lr,Zn.emit=lr,Zn.prependListener=lr,Zn.prependOnceListener=lr,Zn.listeners=function(e){return[]},Zn.binding=function(e){throw new Error("process.binding is not supported")},Zn.cwd=function(){return"/"},Zn.chdir=function(e){throw new Error("process.chdir is not supported")},Zn.umask=function(){return 0};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},hr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new dr;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},dr=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){var t;return e(Y)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="DecodeBase64StringError",t}return r}(e(zn)(Error)),pr=function(e){return function(e){var t=fr(e);return hr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},vr=function(e){try{return hr.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yr=function(){
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},mr=function(){try{return yr()||function(){if(void 0!==Yn&&void 0!==Yn.env);}()||function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&vr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},gr=function(e){var t,n;return null===(n=null===(t=mr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},kr=function(e){var t=gr(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},wr=function(){var e;return null===(e=mr())||void 0===e?void 0:e.config},br=function(e){var t;return null===(t=mr())||void 0===t?void 0:t["_".concat(e)]},Er=function(){"use strict";function t(){var n=this;e(Y)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return e(X)(t,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ir(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[pr(JSON.stringify({alg:"none",type:"JWT"})),pr(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xr(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Tr(){try{return"object"==typeof indexedDB}catch(e){return!1}}function Sr(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function Ar(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o;return e(Y)(this,r),(o=n.call(this,i)).code=t,o.customData=a,o.name="FirebaseError",Object.setPrototypeOf(e(re)(o),r.prototype),Error.captureStackTrace&&Error.captureStackTrace(e(re)(o),Or.prototype.create),o}return r}(e(zn)(Error)),Or=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.service=n,this.serviceName=r,this.errors=i}return e(X)(t,[{key:"create",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0]||{},a="".concat(this.service,"/").concat(e),o=this.errors[e],s=o?Nr(o,i):"Error",u="".concat(this.serviceName,": ").concat(s," (").concat(a,")."),c=new Cr(a,u,i);return c}}]),t}();function Nr(e,t){return e.replace(Rr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Rr=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lr(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t),i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(!r.includes(c))return!1;var l=e[c],f=t[c];if(Pr(l)&&Pr(f)){if(!Lr(l,f))return!1}else if(l!==f)return!1}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=v.value;if(!n.includes(m))return!1}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}return!0}function Pr(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mr(t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=function(t,r){var i=e(Bt)(r.value,2),a=i[0],o=i[1];Array.isArray(o)?o.forEach((function(e){n.push(encodeURIComponent(a)+"="+encodeURIComponent(e))})):n.push(encodeURIComponent(a)+"="+encodeURIComponent(o))},u=Object.entries(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.length?"&"+n.join("&"):""}function Ur(t){var n={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var r=e(Bt)(t.split("="),2),i=r[0],a=r[1];n[decodeURIComponent(i)]=decodeURIComponent(a)}})),n}function Fr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr=function(){"use strict";function t(n,r){var i=this;e(Y)(this,t),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then((function(){n(i)})).catch((function(e){i.error(e)}))}return e(X)(t,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s in e&&"function"==typeof e[s])return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=jr),void 0===r.error&&(r.error=jr),void 0===r.complete&&(r.complete=jr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),t}();function jr(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Br=144e5;function qr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(Br,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zr(e){return e&&e._delegate?e._delegate:e}var Hr=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.name=n,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e(X)(t,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),t}(),Kr="[DEFAULT]",Gr=function(){"use strict";function t(n,r){e(Y)(this,t),this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e(X)(t,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Er;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch(e){}var n=!0,r=!1,i=void 0;try{for(var a,o=this.instancesDeferred.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=e(Bt)(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:l});c.resolve(f)}catch(e){}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.from(t.instances.values()),n.next=3,Promise.all(e(Wt)(r.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))).concat(e(Wt)(r.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return n.stop()}}),n)})))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:i,options:r}),o=!0,s=!1,u=void 0;try{for(var c,l=this.instancesDeferred.entries()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=e(Bt)(c.value,2),h=f[0],d=f[1],p=this.normalizeInstanceIdentifier(h);i===p&&d.resolve(a)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;try{u(e,t)}catch(e){}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Kr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(e){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return this.component?this.component.multipleInstances?e:Kr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,Qr,Jr=function(){"use strict";function t(n){e(Y)(this,t),this.name=n,this.providers=new Map}return e(X)(t,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Gr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}(),Yr=(qn=i("hKHmD"),[]);(Qr=Wr||(Wr={}))[Qr.DEBUG=0]="DEBUG",Qr[Qr.VERBOSE=1]="VERBOSE",Qr[Qr.INFO=2]="INFO",Qr[Qr.WARN=3]="WARN",Qr[Qr.ERROR=4]="ERROR",Qr[Qr.SILENT=5]="SILENT";var Xr,$r={debug:Wr.DEBUG,verbose:Wr.VERBOSE,info:Wr.INFO,warn:Wr.WARN,error:Wr.ERROR,silent:Wr.SILENT},Zr=Wr.INFO,ei=(Xr={},e(qn)(Xr,Wr.DEBUG,"log"),e(qn)(Xr,Wr.VERBOSE,"log"),e(qn)(Xr,Wr.INFO,"info"),e(qn)(Xr,Wr.WARN,"warn"),e(qn)(Xr,Wr.ERROR,"error"),Xr),ti=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o;if(!(n<t.logLevel)){var s=(new Date).toISOString(),u=ei[n];if(!u)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(n,")"));(o=console)[u].apply(o,["[".concat(s,"]  ").concat(t.name,":")].concat(e(Wt)(i)))}},ni=function(){"use strict";function t(n){e(Y)(this,t),this.name=n,this._logLevel=Zr,this._logHandler=ti,this._userLogHandler=null,Yr.push(this)}return e(X)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Wr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?$r[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wr.DEBUG].concat(e(Wt)(n))),this._logHandler.apply(this,[this,Wr.DEBUG].concat(e(Wt)(n)))}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wr.VERBOSE].concat(e(Wt)(n))),this._logHandler.apply(this,[this,Wr.VERBOSE].concat(e(Wt)(n)))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wr.INFO].concat(e(Wt)(n))),this._logHandler.apply(this,[this,Wr.INFO].concat(e(Wt)(n)))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wr.WARN].concat(e(Wt)(n))),this._logHandler.apply(this,[this,Wr.WARN].concat(e(Wt)(n)))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wr.ERROR].concat(e(Wt)(n))),this._logHandler.apply(this,[this,Wr.ERROR].concat(e(Wt)(n)))}}]),t}();var ri={};Object.defineProperty(ri,"__esModule",{value:!0}),ri.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ii.default(e,t,n[t])}))}return e};var ii=function(e){return e&&e.__esModule?e:{default:e}}(i("hKHmD"));var ai,oi;var si=new WeakMap,ui=new WeakMap,ci=new WeakMap,li=new WeakMap,fi=new WeakMap;var hi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ui.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ci.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function di(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oi||(oi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(yi(this),n),vi(si.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return vi(t.apply(yi(this),n))}:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,s=(o=t).call.apply(o,[yi(this),n].concat(e(Wt)(i)));return ci.set(s,n.sort?n.sort():[n]),vi(s)}}function pi(e){return"function"==typeof e?di(e):(e instanceof IDBTransaction&&function(e){if(!ui.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ui.set(e,t)}}(e),t=e,(ai||(ai=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,hi):e);var t}function vi(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(vi(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&si.set(e,t)})).catch((function(){})),fi.set(n,t),n;var t,n;if(li.has(e))return li.get(e);var r=pi(e);return r!==e&&(li.set(e,r),fi.set(r,e)),r}var yi=function(e){return fi.get(e)};function mi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=vi(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(vi(s.result),e.oldVersion,e.newVersion,vi(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}var gi=["get","getKey","getAll","getAllKeys","count"],ki=["put","add","delete","clear"],wi=new Map;function bi(t,n){if(t instanceof IDBDatabase&&!(n in t)&&"string"==typeof n){if(wi.get(n))return wi.get(n);var r=n.replace(/FromIndex$/,""),i=n!==r,a=ki.includes(r);if(r in(i?IDBIndex:IDBObjectStore).prototype&&(a||gi.includes(r))){var o,s=(o=e(l)(e(h).mark((function t(n){var o,s,u,c,l,f,d=arguments;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=d.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=d[u];return l=this.transaction(n,a?"readwrite":"readonly"),f=l.store,i&&(f=f.index(s.shift())),t.next=7,Promise.all([(c=f)[r].apply(c,e(Wt)(s)),a&&l.done]);case 7:return t.abrupt("return",t.sent[0]);case 8:case"end":return t.stop()}}),t,this)}))),function(e){return o.apply(this,arguments)});return wi.set(n,s),s}}}hi=function(t){return e(ri)({},t,{get:function(e,n,r){return bi(e,n)||t.get(e,n,r)},has:function(e,n){return!!bi(e,n)||t.has(e,n)}})}(hi);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ei=function(){"use strict";function t(n){e(Y)(this,t),this.container=n}return e(X)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),t}();var Ii,_i,xi="@firebase/app",Ti="0.9.7",Si=new ni("@firebase/app"),Ai="[DEFAULT]",Ci=(Ii={},e(qn)(Ii,xi,"fire-core"),e(qn)(Ii,"@firebase/app-compat","fire-core-compat"),e(qn)(Ii,"@firebase/analytics","fire-analytics"),e(qn)(Ii,"@firebase/analytics-compat","fire-analytics-compat"),e(qn)(Ii,"@firebase/app-check","fire-app-check"),e(qn)(Ii,"@firebase/app-check-compat","fire-app-check-compat"),e(qn)(Ii,"@firebase/auth","fire-auth"),e(qn)(Ii,"@firebase/auth-compat","fire-auth-compat"),e(qn)(Ii,"@firebase/database","fire-rtdb"),e(qn)(Ii,"@firebase/database-compat","fire-rtdb-compat"),e(qn)(Ii,"@firebase/functions","fire-fn"),e(qn)(Ii,"@firebase/functions-compat","fire-fn-compat"),e(qn)(Ii,"@firebase/installations","fire-iid"),e(qn)(Ii,"@firebase/installations-compat","fire-iid-compat"),e(qn)(Ii,"@firebase/messaging","fire-fcm"),e(qn)(Ii,"@firebase/messaging-compat","fire-fcm-compat"),e(qn)(Ii,"@firebase/performance","fire-perf"),e(qn)(Ii,"@firebase/performance-compat","fire-perf-compat"),e(qn)(Ii,"@firebase/remote-config","fire-rc"),e(qn)(Ii,"@firebase/remote-config-compat","fire-rc-compat"),e(qn)(Ii,"@firebase/storage","fire-gcs"),e(qn)(Ii,"@firebase/storage-compat","fire-gcs-compat"),e(qn)(Ii,"@firebase/firestore","fire-fst"),e(qn)(Ii,"@firebase/firestore-compat","fire-fst-compat"),e(qn)(Ii,"fire-js","fire-js"),e(qn)(Ii,"firebase","fire-js-all"),Ii),Oi=new Map,Ni=new Map;function Ri(e,t){try{e.container.addComponent(t)}catch(n){Si.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Di(e){var t=e.name;if(Ni.has(t))return Si.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ni.set(t,e);var n=!0,r=!1,i=void 0;try{for(var a,o=Oi.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){Ri(a.value,e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}function Li(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pi=(_i={},e(qn)(_i,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),e(qn)(_i,"bad-app-name","Illegal App name: '{$appName}"),e(qn)(_i,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),e(qn)(_i,"app-deleted","Firebase App named '{$appName}' already deleted"),e(qn)(_i,"no-options","Need to provide options, when not being deployed to hosting via source."),e(qn)(_i,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),e(qn)(_i,"invalid-log-argument","First argument to `onLog` must be null or a function."),e(qn)(_i,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),e(qn)(_i,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),e(qn)(_i,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),e(qn)(_i,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),_i),Mi=new Or("app","Firebase",Pi),Ui=function(){"use strict";function t(n,r,i){var a=this;e(Y)(this,t),this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hr("app",(function(){return a}),"PUBLIC"))}return e(X)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}]),t}(),Fi="9.19.1";function Vi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!=typeof t){var r=t;t={name:r}}var i=Object.assign({name:Ai,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!=typeof a||!a)throw Mi.create("bad-app-name",{appName:String(a)});if(n||(n=wr()),!n)throw Mi.create("no-options");var o=Oi.get(a);if(o){if(Lr(n,o.options)&&Lr(i,o.config))return o;throw Mi.create("duplicate-app",{appName:a})}var s=new Jr(a),u=!0,c=!1,l=void 0;try{for(var f,h=Ni.values()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;s.addComponent(d)}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}var p=new Ui(n,i,s);return Oi.set(a,p),p}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai,t=Oi.get(e);if(!t&&e===Ai)return Vi();if(!t)throw Mi.create("no-app",{appName:e});return t}function Bi(e,t,n){var r,i=null!==(r=Ci[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Si.warn(s.join(" "))}Di(new Hr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qi="firebase-heartbeat-store",zi=null;function Hi(){return zi||(zi=mi("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(qi)}}).catch((function(e){throw Mi.create("idb-open",{originalErrorMessage:e.message})}))),zi}function Ki(e){return Gi.apply(this,arguments)}function Gi(){return(Gi=e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hi();case 3:return r=e.sent,e.abrupt("return",r.transaction(qi).objectStore(qi).get(Ji(n)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Cr?Si.warn(e.t0.message):(i=Mi.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Si.warn(i.message));case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Wi(e,t){return Qi.apply(this,arguments)}function Qi(){return(Qi=e(l)(e(h).mark((function t(n,r){var i,a,o,s;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hi();case 3:return i=e.sent,a=i.transaction(qi,"readwrite"),o=a.objectStore(qi),e.next=8,o.put(r,Ji(n));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Cr?Si.warn(e.t0.message):(s=Mi.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Si.warn(s.message));case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function Ji(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yi=function(){"use strict";function t(n){var r=this;e(Y)(this,t),this.container=n,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new ea(i),this._heartbeatsCachePromise=this._storage.read().then((function(e){return r._heartbeatsCache=e,e}))}return e(X)(t,[{key:"triggerHeartbeat",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r,i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=Xi(),null!==t._heartbeatsCache){e.next=7;break}return e.next=6,t._heartbeatsCachePromise;case 6:t._heartbeatsCache=e.sent;case 7:if(t._heartbeatsCache.lastSentHeartbeatDate!==a&&!t._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=11;break}return e.abrupt("return");case 11:t._heartbeatsCache.heartbeats.push({date:a,agent:i});case 12:return t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",t._storage.overwrite(t._heartbeatsCache));case 14:case"end":return e.stop()}}),n)})))()}},{key:"getHeartbeatsHeader",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r,i,a,o,s;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t._heartbeatsCache){e.next=3;break}return e.next=3,t._heartbeatsCachePromise;case 3:if(null!==t._heartbeatsCache&&0!==t._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(r=Xi(),i=$i(t._heartbeatsCache.heartbeats),a=i.heartbeatsToSend,o=i.unsentEntries,s=pr(JSON.stringify({version:2,heartbeats:a})),t._heartbeatsCache.lastSentHeartbeatDate=r,!(o.length>0)){e.next=15;break}return t._heartbeatsCache.heartbeats=o,e.next=13,t._storage.overwrite(t._heartbeatsCache);case 13:e.next=16;break;case 15:t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),n)})))()}}]),t}();function Xi(){return(new Date).toISOString().substring(0,10)}function $i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=[],r=e.slice(),i=!0,a=!1,o=void 0;try{for(var s,u=function(e,i){var a=i.value,o=n.find((function(e){return e.agent===a.agent}));if(o){if(o.dates.push(a.date),ta(n)>t)return o.dates.pop(),"break"}else if(n.push({agent:a.agent,dates:[a.date]}),ta(n)>t)return n.pop(),"break";r=r.slice(1)},c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=u(c,s);if("break"===l)break}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{heartbeatsToSend:n,unsentEntries:r}}var Zi,ea=function(){"use strict";function t(n){e(Y)(this,t),this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e(X)(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){return e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Sr().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),t)})))()}},{key:"read",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ki(t.app);case 9:return r=e.sent,e.abrupt("return",r||{heartbeats:[]});case 11:case"end":return e.stop()}}),n)})))()}},{key:"overwrite",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n._canUseIndexedDBPromise;case 3:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n.read();case 10:return a=e.sent,e.abrupt("return",Wi(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 12:case"end":return e.stop()}}),r)})))()}},{key:"add",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a;return e(h).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,n._canUseIndexedDBPromise;case 3:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,n.read();case 10:return a=r.sent,r.abrupt("return",Wi(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:e(Wt)(a.heartbeats).concat(e(Wt)(t.heartbeats))}));case 12:case"end":return r.stop()}}),r)})))()}}]),t}();function ta(e){return pr(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi="",Di(new Hr("platform-logger",(function(e){return new Ei(e)}),"PRIVATE")),Di(new Hr("heartbeat",(function(e){return new Yi(e)}),"PRIVATE")),Bi(xi,Ti,Zi),Bi(xi,Ti,"esm2017"),Bi("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Bi("firebase","9.19.1","app");qn=i("hKHmD"),qn=i("hKHmD");var na,ra="@firebase/installations",ia="0.6.4",aa=1e4,oa="w:".concat(ia),sa="FIS_v2",ua=36e5,ca=(na={},e(qn)(na,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),e(qn)(na,"not-registered","Firebase Installation is not registered."),e(qn)(na,"installation-not-found","Firebase Installation not found."),e(qn)(na,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),e(qn)(na,"app-offline","Could not process request. Application offline."),e(qn)(na,"delete-pending-registration","Can't delete installation while there is a pending registration request."),na),la=new Or("installations","Installations",ca);function fa(e){return e instanceof Cr&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function da(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function pa(e,t){return va.apply(this,arguments)}function va(){return(va=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.json();case 2:return i=e.sent,a=i.error,e.abrupt("return",la.create("request-failed",{requestName:n,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ya(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ma(e,t){var n=t.refreshToken,r=ya(e);return r.append("Authorization",function(e){return"".concat(sa," ").concat(e)}(n)),r}function ga(e){return ka.apply(this,arguments)}function ka(){return(ka=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!((r=e.sent).status>=500&&r.status<600)){e.next=5;break}return e.abrupt("return",n());case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function wa(e,t){return ba.apply(this,arguments)}function ba(){return(ba=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c,l,f,d,p,v,y;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.appConfig,a=n.heartbeatServiceProvider,o=r.fid,s=ha(i),u=ya(i),!(c=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,c.getHeartbeatsHeader();case 7:(l=e.sent)&&u.append("x-firebase-client",l);case 9:return f={fid:o,authVersion:sa,appId:i.appId,sdkVersion:oa},d={method:"POST",headers:u,body:JSON.stringify(f)},e.next=13,ga((function(){return fetch(s,d)}));case 13:if(!(p=e.sent).ok){e.next=22;break}return e.next=17,p.json();case 17:return v=e.sent,y={fid:v.fid||o,registrationStatus:2,refreshToken:v.refreshToken,authToken:da(v.authToken)},e.abrupt("return",y);case 22:return e.next=24,pa("Create Installation",p);case 24:throw e.sent;case 25:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ia=/^[cdef][\w-]{21}$/;function _a(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var n=function(t){return(n=t,btoa((r=String).fromCharCode.apply(r,e(Wt)(n))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var n,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return Ia.test(n)?n:""}catch(e){return""}}function xa(e){return"".concat(e.appName,"!").concat(e.appId)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ta=new Map;function Sa(e,t){var n=xa(e);Aa(n,t),function(e,t){var n=Oa();n&&n.postMessage({key:e,fid:t});Na()}(n,t)}function Aa(e,t){var n=Ta.get(e);if(n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}var Ca=null;function Oa(){return!Ca&&"BroadcastChannel"in self&&((Ca=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Aa(e.data.key,e.data.fid)}),Ca}function Na(){0===Ta.size&&Ca&&(Ca.close(),Ca=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ra="firebase-installations-store",Da=null;function La(){return Da||(Da=mi("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ra)}})),Da}function Pa(e,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xa(n),e.next=3,La();case 3:return a=e.sent,o=a.transaction(Ra,"readwrite"),s=o.objectStore(Ra),e.next=8,s.get(i);case 8:return u=e.sent,e.next=11,s.put(r,i);case 11:return e.next=13,o.done;case 13:return u&&u.fid===r.fid||Sa(n,r.fid),e.abrupt("return",r);case 15:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ua(e){return Fa.apply(this,arguments)}function Fa(){return(Fa=e(l)(e(h).mark((function t(n){var r,i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xa(n),e.next=3,La();case 3:return i=e.sent,a=i.transaction(Ra,"readwrite"),e.next=7,a.objectStore(Ra).delete(r);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Va(e,t){return ja.apply(this,arguments)}function ja(){return(ja=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xa(n),e.next=3,La();case 3:return a=e.sent,o=a.transaction(Ra,"readwrite"),s=o.objectStore(Ra),e.next=8,s.get(i);case 8:if(u=e.sent,void 0!==(c=r(u))){e.next=15;break}return e.next=13,s.delete(i);case 13:e.next=17;break;case 15:return e.next=17,s.put(c,i);case 17:return e.next=19,o.done;case 19:return!c||u&&u.fid===c.fid||Sa(n,c.fid),e.abrupt("return",c);case 21:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ba(e){return qa.apply(this,arguments)}function qa(){return(qa=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Va(n.appConfig,(function(e){var t=za(e),i=Ha(n,t);return r=i.registrationPromise,i.installationEntry}));case 3:if(""!==(i=e.sent).fid){e.next=9;break}return e.next=7,r;case 7:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 9:return e.abrupt("return",{installationEntry:i,registrationPromise:r});case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function za(e){return Ja(e||{fid:_a(),registrationStatus:0})}function Ha(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(la.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return Ka.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ga(e)}:{installationEntry:t}}function Ka(){return(Ka=e(l)(e(h).mark((function t(n,r){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wa(n,r);case 3:return i=e.sent,e.abrupt("return",Pa(n.appConfig,i));case 7:if(e.prev=7,e.t0=e.catch(0),!fa(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Ua(n.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Pa(n.appConfig,{fid:r.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Ga(e){return Wa.apply(this,arguments)}function Wa(){return(Wa=e(l)(e(h).mark((function t(n){var r,i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa(n.appConfig);case 2:r=e.sent;case 3:if(1!==r.registrationStatus){e.next=11;break}return e.next=6,Ea(100);case 6:return e.next=8,Qa(n.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==r.registrationStatus){e.next=22;break}return e.next=14,Ba(n);case 14:if(i=e.sent,a=i.installationEntry,!(o=i.registrationPromise)){e.next=21;break}return e.abrupt("return",o);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Qa(e){return Va(e,(function(e){if(!e)throw la.create("installation-not-found");return Ja(e)}))}function Ja(e){return 1===(t=e).registrationStatus&&t.registrationTime+aa<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Ya(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c,l,f,d,p,v;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.appConfig,a=n.heartbeatServiceProvider,o=$a(i,r),s=ma(i,r),!(u=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(c=e.sent)&&s.append("x-firebase-client",c);case 9:return l={installation:{sdkVersion:oa,appId:i.appId}},f={method:"POST",headers:s,body:JSON.stringify(l)},e.next=13,ga((function(){return fetch(o,f)}));case 13:if(!(d=e.sent).ok){e.next=22;break}return e.next=17,d.json();case 17:return p=e.sent,v=da(p),e.abrupt("return",v);case 22:return e.next=24,pa("Generate Auth Token",d);case 24:throw e.sent;case 25:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $a(e,t){var n=t.fid;return"".concat(ha(e),"/").concat(n,"/authTokens:generate")}function Za(e){return eo.apply(this,arguments)}function eo(){return eo=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){var r,i,a,o,s=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],e.next=4,Va(n.appConfig,(function(e){if(!oo(e))throw la.create("not-registered");var t=e.authToken;if(!r&&so(t))return e;if(1===t.requestStatus)return i=to(n,r),e;if(!navigator.onLine)throw la.create("app-offline");var a=uo(e);return i=io(n,a),a}));case 4:if(a=e.sent,!i){e.next=11;break}return e.next=8,i;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=a.authToken;case 12:return o=e.t0,e.abrupt("return",o);case 14:case"end":return e.stop()}}),t)}))),eo.apply(this,arguments)}function to(e,t){return no.apply(this,arguments)}function no(){return(no=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(n.appConfig);case 2:i=e.sent;case 3:if(1!==i.authToken.requestStatus){e.next=11;break}return e.next=6,Ea(100);case 6:return e.next=8,ro(n.appConfig);case 8:i=e.sent,e.next=3;break;case 11:if(0!==(a=i.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Za(n,r));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ro(e){return Va(e,(function(e){if(!oo(e))throw la.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+aa<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function io(e,t){return ao.apply(this,arguments)}function ao(){return(ao=e(l)(e(h).mark((function t(n,r){var i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ya(n,r);case 3:return i=e.sent,a=Object.assign(Object.assign({},r),{authToken:i}),e.next=7,Pa(n.appConfig,a);case 7:return e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(0),!fa(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Ua(n.appConfig);case 15:e.next=20;break;case 17:return o=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}),e.next=20,Pa(n.appConfig,o);case 20:throw e.t0;case 21:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function oo(e){return void 0!==e&&2===e.registrationStatus}function so(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+ua}(e)}function uo(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function co(){return(co=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){var r,i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,e.next=3,Ba(r);case 3:return i=e.sent,a=i.installationEntry,(o=i.registrationPromise)?o.catch(console.error):Za(r).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function lo(){return lo=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){var r,i,a,o=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],i=n,e.next=4,fo(i);case 4:return e.next=6,Za(i,r);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),t)}))),lo.apply(this,arguments)}function fo(e){return ho.apply(this,arguments)}function ho(){return(ho=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba(n);case 2:if(!(r=e.sent.registrationPromise)){e.next=6;break}return e.next=6,r;case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function po(e){return la.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vo="installations",yo=function(e){var t=Li(e.getProvider("app").getImmediate(),vo).getImmediate(),n={getId:function(){return function(e){return co.apply(this,arguments)}(t)},getToken:function(e){return function(e){return lo.apply(this,arguments)}(t,e)}};return n};Di(new Hr(vo,(function(e){var t=e.getProvider("app").getImmediate(),n=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){if(!e||!e.options)throw po("App Configuration");if(!e.name)throw po("App Name");var t=!0,n=!1,r=void 0;try{for(var i,a=["projectId","apiKey","appId"][Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!e.options[o])throw po(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Li(t,"heartbeat"),_delete:function(){return Promise.resolve()}}}),"PUBLIC")),Di(new Hr("installations-internal",yo,"PRIVATE")),Bi(ra,ia),Bi(ra,ia,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mo,go="analytics",ko=6e4,wo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bo="https://www.googletagmanager.com/gtag/js",Eo=new ni("@firebase/analytics"),Io=(mo={},e(qn)(mo,"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),e(qn)(mo,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),e(qn)(mo,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),e(qn)(mo,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),e(qn)(mo,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),e(qn)(mo,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),e(qn)(mo,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),e(qn)(mo,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),e(qn)(mo,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),e(qn)(mo,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),e(qn)(mo,"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}."),mo),_o=new Or("analytics","Analytics",Io);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xo(e){if(!e.startsWith(bo)){var t=_o.create("invalid-gtag-resource",{gtagURL:e});return Eo.warn(t.message),""}return e}function To(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function So(e,t){var n=function(e,t){var n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:xo}),r=document.createElement("script"),i="".concat(bo,"?l=").concat(e,"&id=").concat(t);r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ao(e,t,n,r,i,a){return Co.apply(this,arguments)}function Co(){return(Co=e(l)(e(h).mark((function t(n,r,i,a,o,s){var u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=a[o],e.prev=1,!u){e.next=7;break}return e.next=5,r[u];case 5:e.next=14;break;case 7:return e.next=9,To(i);case 9:if(c=e.sent,!(l=c.find((function(e){return e.measurementId===o})))){e.next=14;break}return e.next=14,r[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Eo.error(e.t0);case 19:n("config",o,s);case 20:case"end":return e.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function Oo(e,t,n,r,i){return No.apply(this,arguments)}function No(){return(No=e(l)(e(h).mark((function t(n,r,i,a,o){var s,u,c,l,f,d,p,v,y,m,g;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=[],!o||!o.send_to){e.next=38;break}return u=o.send_to,Array.isArray(u)||(u=[u]),e.next=7,To(i);case 7:c=e.sent,l=!0,f=!1,d=void 0,e.prev=9,p=u[Symbol.iterator]();case 11:if(l=(v=p.next()).done){e.next=24;break}if(y=v.value,m=c.find((function(e){return e.measurementId===y})),!(g=m&&r[m.appId])){e.next=19;break}s.push(g),e.next=21;break;case 19:return s=[],e.abrupt("break",24);case 21:l=!0,e.next=11;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(9),f=!0,d=e.t0;case 30:e.prev=30,e.prev=31,l||null==p.return||p.return();case 33:if(e.prev=33,!f){e.next=36;break}throw d;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return 0===s.length&&(s=Object.values(r)),e.next=41,Promise.all(s);case 41:n("event",a,o||{}),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(0),Eo.error(e.t1);case 47:case"end":return e.stop()}}),t,null,[[0,44],[9,26,30,38],[31,,33,37]])})))).apply(this,arguments)}function Ro(t,n,r,i,a){var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[i].push(arguments)};return window[a]&&"function"==typeof window[a]&&(o=window[a]),window[a]=function(t,n,r,i){function a(){return(a=e(l)(e(h).mark((function a(o,s,u){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"event"!==o){e.next=6;break}return e.next=4,Oo(t,n,r,s,u);case 4:e.next=12;break;case 6:if("config"!==o){e.next=11;break}return e.next=9,Ao(t,n,r,i,s,u);case 9:e.next=12;break;case 11:"consent"===o?t("consent","update",u):t("set",s);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),Eo.error(e.t0);case 17:case"end":return e.stop()}}),a,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return a.apply(this,arguments)}}(o,t,n,r),{gtagCore:o,wrappedGtag:window[a]}}function Do(e){var t=window.document.getElementsByTagName("script"),n=!0,r=!1,i=void 0;try{for(var a,o=Object.values(t)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.src&&s.src.includes(bo)&&s.src.includes(e))return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lo=function(){"use strict";function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e(Y)(this,t),this.throttleMetadata=n,this.intervalMillis=r}return e(X)(t,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),t}(),Po=new Lo;function Mo(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Uo(e){return Fo.apply(this,arguments)}function Fo(){return(Fo=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.appId,a=n.apiKey,o={method:"GET",headers:Mo(a)},s=wo.replace("{app-id}",i),e.next=6,fetch(s,o);case 6:if(200===(u=e.sent).status||304===u.status){e.next=19;break}return c="",e.prev=9,e.next=12,u.json();case 12:l=e.sent,(null===(r=l.error)||void 0===r?void 0:r.message)&&(c=l.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw _o.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 19:return e.abrupt("return",u.json());case 20:case"end":return e.stop()}}),t,null,[[9,16]])})))).apply(this,arguments)}function Vo(e){return jo.apply(this,arguments)}function jo(){return jo=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u,c,f,d=arguments;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:Po,i=d.length>2?d[2]:void 0,a=n.options,o=a.appId,s=a.apiKey,u=a.measurementId,o){t.next=4;break}throw _o.create("no-app-id");case 4:if(s){t.next=8;break}if(!u){t.next=7;break}return t.abrupt("return",{measurementId:u,appId:o});case 7:throw _o.create("no-api-key");case 8:return c=r.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new Wo,setTimeout(e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.abort();case 1:case"end":return e.stop()}}),t)}))),void 0!==i?i:ko),t.abrupt("return",Bo({appId:o,apiKey:s,measurementId:u},c,f,r));case 12:case"end":return t.stop()}}),t)}))),jo.apply(this,arguments)}function Bo(e,t,n){return qo.apply(this,arguments)}function qo(){return qo=e(l)(e(h).mark((function t(n,r,i){var a,o,s,u,c,l,f,d,p,v,y=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.throttleEndTimeMillis,o=r.backoffCount,s=y.length>3&&void 0!==y[3]?y[3]:Po,c=n.appId,l=n.measurementId,e.prev=3,e.next=6,zo(i,a);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!l){e.next=13;break}return Eo.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,Uo(n);case 17:return f=e.sent,s.deleteThrottleMetadata(c),e.abrupt("return",f);case 22:if(e.prev=22,e.t1=e.catch(14),Ho(d=e.t1)){e.next=33;break}if(s.deleteThrottleMetadata(c),!l){e.next=32;break}return Eo.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==d?void 0:d.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 32:throw e.t1;case 33:return p=503===Number(null===(u=null==d?void 0:d.customData)||void 0===u?void 0:u.httpStatus)?qr(o,s.intervalMillis,30):qr(o,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+p,backoffCount:o+1},s.setThrottleMetadata(c,v),Eo.debug("Calling attemptFetch again in ".concat(p," millis")),e.abrupt("return",Bo(n,v,i,s));case 38:case"end":return e.stop()}}),t,null,[[3,8],[14,22]])}))),qo.apply(this,arguments)}function zo(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(_o.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Ho(e){if(!(e instanceof Cr&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Ko,Go,Wo=function(){"use strict";function t(){e(Y)(this,t),this.listeners=[]}return e(X)(t,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(){return(Qo=e(l)(e(h).mark((function t(n,r,i,a,o){var s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.global){e.next=5;break}return n("event",i,a),e.abrupt("return");case 5:return e.next=7,r;case 7:s=e.sent,u=Object.assign(Object.assign({},a),{send_to:s}),n("event",i,u);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Jo(e){Go=e}function Yo(e){Ko=e}function Xo(){return $o.apply(this,arguments)}function $o(){return($o=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tr()){e.next=5;break}return Eo.warn(_o.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,Sr();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),Eo.warn(_o.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),t,null,[[5,10]])})))).apply(this,arguments)}function Zo(){return(Zo=e(l)(e(h).mark((function t(n,r,i,a,o,s,u){var c,l,f,d,p,v,y;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(l=Vo(n)).then((function(e){i[e.measurementId]=e.appId,n.options.measurementId&&e.measurementId!==n.options.measurementId&&Eo.warn("The measurement ID in the local Firebase config (".concat(n.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Eo.error(e)})),r.push(l),f=Xo().then((function(e){return e?a.getId():void 0})),t.t0=e(Bt),t.next=8,Promise.all([l,f]);case 8:return t.t1=t.sent,d=(0,t.t0)(t.t1,2),p=d[0],v=d[1],Do(s)||So(s,p.measurementId),Go&&(o("consent","default",Go),Jo(void 0)),o("js",new Date),(y=null!==(c=null==u?void 0:u.config)&&void 0!==c?c:{}).origin="firebase",y.update=!0,null!=v&&(y.firebase_id=v),o("config",p.measurementId,y),Ko&&(o("set",Ko),Yo(void 0)),t.abrupt("return",p.measurementId);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var es,ts,ns=function(){"use strict";function t(n){e(Y)(this,t),this.app=n}return e(X)(t,[{key:"_delete",value:function(){return delete rs[this.app.options.appId],Promise.resolve()}}]),t}(),rs={},is=[],as={},os="dataLayer",ss="gtag",us=!1;function cs(e,t,n){!function(){var e=[];if(xr()&&e.push("This is a browser extension environment."),Ar()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=_o.create("invalid-analytics-context",{errorInfo:t});Eo.warn(n.message)}}();var r,i,a=e.options.appId;if(!a)throw _o.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw _o.create("no-api-key");Eo.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=rs[a])throw _o.create("already-exists",{id:a});if(!us){r=os,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i;var o=Ro(rs,is,as,os,ss),s=o.wrappedGtag,u=o.gtagCore;ts=s,es=u,us=!0}return rs[a]=function(e,t,n,r,i,a,o){return Zo.apply(this,arguments)}(e,is,as,t,es,os,n),new ns(e)}function ls(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Li(e,go);if(n.isInitialized()){var r=n.getImmediate();if(Lr(t,n.getOptions()))return r;throw _o.create("already-initialized")}var i=n.initialize({options:t});return i}function fs(e,t,n,r){e=zr(e),function(e,t,n,r,i){return Qo.apply(this,arguments)}(ts,rs[e.app.options.appId],t,n,r).catch((function(e){return Eo.error(e)}))}var hs="@firebase/analytics",ds="0.9.5";Di(new Hr(go,(function(e,t){var n=t.options;return cs(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Di(new Hr("analytics-internal",(function(e){try{var t=e.getProvider(go).getImmediate();return{logEvent:function(e,n,r){return fs(t,e,n,r)}}}catch(e){throw _o.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Bi(hs,ds),Bi(hs,ds,"esm2017");re=i("ds8z5"),qn=i("hKHmD");var ps={};Object.defineProperty(ps,"__esModule",{value:!0}),ps.default=function(e,t,n){return ys(e,t,n)};var vs=function(e){return e&&e.__esModule?e:{default:e}}(i("2mz0K"));function ys(e,t,n){return(ys="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=vs.default(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}})(e,t,n)}var ms=i("fVNic");function gs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;function ks(){return e(qn)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ws=ks,bs=new Or("auth","Firebase",ks()),Es={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"},Is=new ni("@firebase/auth");function _s(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;Is.logLevel<=Wr.ERROR&&(a=Is).error.apply(a,["Auth (".concat(Fi,"): ").concat(t)].concat(e(Wt)(r)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw As.apply(void 0,[t].concat(e(Wt)(r)))}function Ts(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return As.apply(void 0,[t].concat(e(Wt)(r)))}function Ss(t,n,r){var i=Object.assign(Object.assign({},ws()),e(qn)({},n,r));return new Or("auth","Firebase",i).create(n,{appName:t.name})}function As(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;if("string"!=typeof t){var o,s=r[0],u=e(Wt)(r.slice(1));return u[0]&&(u[0].appName=t.name),(o=t._errorFactory).create.apply(o,[s].concat(e(Wt)(u)))}return(a=bs).create.apply(a,[t].concat(e(Wt)(r)))}function Cs(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(!t)throw As.apply(void 0,[n].concat(e(Wt)(i)))}function Os(e){var t="INTERNAL ASSERTION FAILED: "+e;throw _s(t),new Error(t)}function Ns(e,t){e||Os(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rs=new Map;function Ds(e){Ns(e instanceof Function,"Expected a class definition");var t=Rs.get(e);return t?(Ns(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rs.set(e,t),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(e,t){var n=Li(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Lr(n.getOptions(),null!=t?t:{}))return r;xs(r,"already-initialized")}return n.initialize({options:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ps(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ms(){return"http:"===Us()||"https:"===Us()}function Us(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fs=function(){"use strict";function t(n,r){e(Y)(this,t),this.shortDelay=n,this.longDelay=r,Ns(r>n,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())||"object"==typeof navigator&&"ReactNative"===navigator.product}return e(X)(t,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ms()||xr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(e,t){Ns(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js,Bs=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),t}(),qs=(js={},e(qn)(js,"CREDENTIAL_MISMATCH","custom-token-mismatch"),e(qn)(js,"MISSING_CUSTOM_TOKEN","internal-error"),e(qn)(js,"INVALID_IDENTIFIER","invalid-email"),e(qn)(js,"MISSING_CONTINUE_URI","internal-error"),e(qn)(js,"INVALID_PASSWORD","wrong-password"),e(qn)(js,"MISSING_PASSWORD","missing-password"),e(qn)(js,"EMAIL_EXISTS","email-already-in-use"),e(qn)(js,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),e(qn)(js,"INVALID_IDP_RESPONSE","invalid-credential"),e(qn)(js,"INVALID_PENDING_TOKEN","invalid-credential"),e(qn)(js,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),e(qn)(js,"MISSING_REQ_TYPE","internal-error"),e(qn)(js,"EMAIL_NOT_FOUND","user-not-found"),e(qn)(js,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),e(qn)(js,"EXPIRED_OOB_CODE","expired-action-code"),e(qn)(js,"INVALID_OOB_CODE","invalid-action-code"),e(qn)(js,"MISSING_OOB_CODE","internal-error"),e(qn)(js,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),e(qn)(js,"INVALID_ID_TOKEN","invalid-user-token"),e(qn)(js,"TOKEN_EXPIRED","user-token-expired"),e(qn)(js,"USER_NOT_FOUND","user-token-expired"),e(qn)(js,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),e(qn)(js,"INVALID_CODE","invalid-verification-code"),e(qn)(js,"INVALID_SESSION_INFO","invalid-verification-id"),e(qn)(js,"INVALID_TEMPORARY_PROOF","invalid-credential"),e(qn)(js,"MISSING_SESSION_INFO","missing-verification-id"),e(qn)(js,"SESSION_EXPIRED","code-expired"),e(qn)(js,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),e(qn)(js,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),e(qn)(js,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),e(qn)(js,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),e(qn)(js,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),e(qn)(js,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),e(qn)(js,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),e(qn)(js,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),e(qn)(js,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),e(qn)(js,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),e(qn)(js,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),js),zs=new Fs(3e4,6e4);function Hs(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ks(e,t,n,r){return Gs.apply(this,arguments)}function Gs(){return Gs=e(l)(e(h).mark((function t(n,r,i,a){var o,s=arguments;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},t.abrupt("return",Ws(n,o,e(l)(e(h).mark((function t(){var o,s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},s={},a&&("GET"===r?s=a:o={body:JSON.stringify(a)}),u=Mr(Object.assign({key:n.config.apiKey},s)).slice(1),e.next=6,n._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),e.abrupt("return",Bs.fetch()(Xs(n,n.config.apiHost,i,u),Object.assign({method:r,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),t)})))));case 2:case"end":return t.stop()}}),t)}))),Gs.apply(this,arguments)}function Ws(e,t,n){return Qs.apply(this,arguments)}function Qs(){return(Qs=e(l)(e(h).mark((function t(n,r,i){var a,o,s,u,c,l,f,d,p;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n._canInitEmulator=!1,a=Object.assign(Object.assign({},qs),r),t.prev=2,o=new $s(n),t.next=6,Promise.race([i(),o.promise]);case 6:return s=t.sent,o.clearNetworkTimeout(),t.next=10,s.json();case 10:if(!("needConfirmation"in(u=t.sent))){t.next=13;break}throw Zs(n,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){t.next=17;break}return t.abrupt("return",u);case 17:if(c=s.ok?u.errorMessage:u.error.message,l=e(Bt)(c.split(" : "),2),f=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){t.next=23;break}throw Zs(n,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){t.next=27;break}throw Zs(n,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){t.next=29;break}throw Zs(n,"user-disabled",u);case 29:if(p=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){t.next=34;break}throw Ss(n,p,d);case 34:xs(n,p);case 35:t.next=42;break;case 37:if(t.prev=37,t.t0=t.catch(2),!(t.t0 instanceof Cr)){t.next=41;break}throw t.t0;case 41:xs(n,"network-request-failed",{message:String(t.t0)});case 42:case"end":return t.stop()}}),t,null,[[2,37]])})))).apply(this,arguments)}function Js(e,t,n,r){return Ys.apply(this,arguments)}function Ys(){return Ys=e(l)(e(h).mark((function t(n,r,i,a){var o,s,u=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ks(n,r,i,a,o);case 3:return"mfaPendingCredential"in(s=e.sent)&&xs(n,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),t)}))),Ys.apply(this,arguments)}function Xs(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Vs(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $s=function(){"use strict";function t(n){var r=this;e(Y)(this,t),this.auth=n,this.timer=null,this.promise=new Promise((function(e,t){var n=r;r.timer=setTimeout((function(){return t(Ts(n.auth,"network-request-failed"))}),zs.get())}))}return e(X)(t,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),t}();function Zs(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ts(e,t,r);return i.customData._tokenResponse=n,i}function eu(e,t){return tu.apply(this,arguments)}function tu(){return(tu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ks(n,"POST","/v1/accounts:delete",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nu(e,t){return ru.apply(this,arguments)}function ru(){return(ru=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ks(n,"POST","/v1/accounts:lookup",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(){return au=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u,c=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],i=zr(n),e.next=4,i.getIdToken(r);case 4:return a=e.sent,Cs((o=su(a))&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error"),s="object"==typeof o.firebase?o.firebase:void 0,u=null==s?void 0:s.sign_in_provider,e.abrupt("return",{claims:o,token:a,authTime:iu(ou(o.auth_time)),issuedAtTime:iu(ou(o.iat)),expirationTime:iu(ou(o.exp)),signInProvider:u||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),t)}))),au.apply(this,arguments)}function ou(e){return 1e3*Number(e)}function su(t){var n=e(Bt)(t.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return _s("JWT malformed, contained fewer than 3 sections"),null;try{var o=vr(i);return o?JSON.parse(o):(_s("Failed to decode base64 JWT payload"),null)}catch(e){return _s("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function uu(e,t){return cu.apply(this,arguments)}function cu(){return cu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>2&&void 0!==i[2]&&i[2])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Cr&&lu(e.t0))){e.next=15;break}if(n.auth.currentUser!==n){e.next=15;break}return e.next=15,n.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),t,null,[[3,9]])}))),cu.apply(this,arguments)}function lu(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fu=function(){"use strict";function t(n){e(Y)(this,t),this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return e(X)(t,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t),r=this;this.timerId=setTimeout(e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.iteration();case 2:case"end":return e.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&t.schedule(!0),e.abrupt("return");case 9:t.schedule();case 10:case"end":return e.stop()}}),n,null,[[0,5]])})))()}}]),t}(),hu=function(){"use strict";function t(n,r){e(Y)(this,t),this.createdAt=n,this.lastLoginAt=r,this._initializeTime()}return e(X)(t,[{key:"_initializeTime",value:function(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(e){return pu.apply(this,arguments)}function pu(){return(pu=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){var r,i,a,o,s,u,c,l,f,d,p;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.auth,e.next=4,n.getIdToken();case 4:return a=e.sent,e.next=7,uu(n,nu(i,{idToken:a}));case 7:Cs(null==(o=e.sent)?void 0:o.users.length,i,"internal-error"),s=o.users[0],n._notifyReloadListener(s),u=(null===(r=s.providerUserInfo)||void 0===r?void 0:r.length)?mu(s.providerUserInfo):[],c=yu(n.providerData,u),l=n.isAnonymous,f=!(n.email&&s.passwordHash||(null==c?void 0:c.length)),d=!!l&&f,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new hu(s.createdAt,s.lastLoginAt),isAnonymous:d},Object.assign(n,p);case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function vu(){return(vu=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(n),e.next=3,du(r);case 3:return e.next=5,r.auth._persistUserIfCurrent(r);case 5:r.auth._notifyListenersIfCurrent(r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function yu(t,n){var r=t.filter((function(e){return!n.some((function(t){return t.providerId===e.providerId}))}));return e(Wt)(r).concat(e(Wt)(n))}function mu(e){return e.map((function(e){var t=e.providerId,n=gs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function gu(e,t){return ku.apply(this,arguments)}function ku(){return(ku=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ws(n,{},e(l)(e(h).mark((function t(){var i,a,o,s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Mr({grant_type:"refresh_token",refresh_token:r}).slice(1),a=n.config,o=a.tokenApiHost,s=a.apiKey,u=Xs(n,o,"/v1/token","key=".concat(s)),e.next=5,n._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Bs.fetch()(u,{method:"POST",headers:c,body:i}));case 8:case"end":return e.stop()}}),t)}))));case 2:return i=t.sent,t.abrupt("return",{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wu=function(){"use strict";function t(){e(Y)(this,t),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return e(X)(t,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Cs(e.idToken,"internal-error"),Cs(void 0!==e.idToken,"internal-error"),Cs(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,Cs(n=su(t),"internal-error"),Cs(void 0!==n.exp,"internal-error"),Cs(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cs(!r.accessToken||r.refreshToken,t,"user-token-expired"),n||!r.accessToken||r.isExpired){e.next=3;break}return e.abrupt("return",r.accessToken);case 3:if(!r.refreshToken){e.next=7;break}return e.next=6,r.refresh(t,r.refreshToken);case 6:return e.abrupt("return",r.accessToken);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),i)})))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){var a,o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gu(t,n);case 2:a=e.sent,o=a.accessToken,s=a.refreshToken,u=a.expiresIn,r.updateTokensAndExpiration(o,s,Number(u));case 7:case"end":return e.stop()}}),i)})))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new t,this.toJSON())}},{key:"_performRefresh",value:function(){return Os("not implemented")}}],[{key:"fromJSON",value:function(e,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new t;return r&&(Cs("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(Cs("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),a&&(Cs("number"==typeof a,"internal-error",{appName:e}),o.expirationTime=a),o}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e,t){Cs("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Eu=function(){"use strict";function t(n){e(Y)(this,t);var r=n.uid,i=n.auth,a=n.stsTokenManager,o=gs(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?e(Wt)(o.providerData):[],this.metadata=new hu(o.createdAt||void 0,o.lastLoginAt||void 0)}return e(X)(t,[{key:"getIdToken",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu(n,n.stsTokenManager.getToken(n.auth,t));case 2:if(Cs(i=e.sent,n.auth,"internal-error"),n.accessToken===i){e.next=9;break}return n.accessToken=i,e.next=8,n.auth._persistUserIfCurrent(n);case 8:n.auth._notifyListenersIfCurrent(n);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),r)})))()}},{key:"getIdTokenResult",value:function(e){return function(e){return au.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return vu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Cs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(e){var n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Cs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(l)(e(h).mark((function i(){var a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,t.idToken&&t.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(t),a=!0),!n){e.next=5;break}return e.next=5,du(r);case 5:return e.next=7,r.auth._persistUserIfCurrent(r);case 7:a&&r.auth._notifyListenersIfCurrent(r);case 8:case"end":return e.stop()}}),i)})))()}},{key:"delete",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdToken();case 2:return r=e.sent,e.next=5,uu(t,eu(t.auth,{idToken:r}));case 5:return t.stsTokenManager.clearRefreshToken(),e.abrupt("return",t.auth.signOut());case 7:case"end":return e.stop()}}),n)})))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(e,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,E=n.providerData,I=n.stsTokenManager;Cs(k&&I,e,"internal-error");var _=wu.fromJSON(this.name,I);Cs("string"==typeof k,e,"internal-error"),bu(f,e.name),bu(h,e.name),Cs("boolean"==typeof w,e,"internal-error"),Cs("boolean"==typeof b,e,"internal-error"),bu(d,e.name),bu(p,e.name),bu(v,e.name),bu(y,e.name),bu(m,e.name),bu(g,e.name);var x=new t({uid:k,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return E&&Array.isArray(E)&&(x.providerData=E.map((function(e){return Object.assign({},e)}))),y&&(x._redirectEventId=y),x}},{key:"_fromIdTokenResponse",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(l)(e(h).mark((function a(){var o,s;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new wu).updateFromServerResponse(r),s=new t({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),e.next=5,du(s);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),a)})))()}}]),t}(),Iu=function(){"use strict";function t(){e(Y)(this,t),this.type="NONE",this.storage={}}return e(X)(t,[{key:"_isAvailable",value:function(){return e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),t)})))()}},{key:"_set",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.storage[t]=n;case 1:case"end":return e.stop()}}),i)})))()}},{key:"_get",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.storage[t],e.abrupt("return",void 0===i?null:i);case 2:case"end":return e.stop()}}),r)})))()}},{key:"_remove",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete n.storage[t];case 1:case"end":return e.stop()}}),r)})))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Iu.type="NONE";var _u=Iu;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Tu=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.persistence=n,this.auth=r,this.userKey=i;var a=this.auth,o=a.config,s=a.name;this.fullUserKey=xu(this.userKey,o.apiKey,s),this.fullPersistenceKey=xu("persistence",o.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return e(X)(t,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.persistence._get(t.fullUserKey);case 2:return r=e.sent,e.abrupt("return",r?Eu._fromJSON(t.auth,r):null);case 4:case"end":return e.stop()}}),n)})))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.getCurrentUser();case 4:return i=e.sent,e.next=7,n.removeCurrentUser();case 7:if(n.persistence=t,!i){e.next=10;break}return e.abrupt("return",n.setCurrentUser(i));case 10:case"end":return e.stop()}}),r)})))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return e(l)(e(h).mark((function a(){var o,s,u,c,f,d,p,v,y,m,g,k,w;return e(h).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.length){a.next=2;break}return a.abrupt("return",new t(Ds(_u),n,i));case 2:return a.next=4,Promise.all(r.map(function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",n);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:o=a.sent.filter((function(e){return e})),s=o[0]||Ds(_u),u=xu(i,n.config.apiKey,n.name),c=null,f=!0,d=!1,p=void 0,a.prev=9,v=r[Symbol.iterator]();case 11:if(f=(y=v.next()).done){a.next=29;break}return m=y.value,a.prev=13,a.next=16,m._get(u);case 16:if(!(g=a.sent)){a.next=22;break}return k=Eu._fromJSON(n,g),m!==s&&(c=k),s=m,a.abrupt("break",29);case 22:a.next=26;break;case 24:a.prev=24,a.t0=a.catch(13);case 26:f=!0,a.next=11;break;case 29:a.next=35;break;case 31:a.prev=31,a.t1=a.catch(9),d=!0,p=a.t1;case 35:a.prev=35,a.prev=36,f||null==v.return||v.return();case 38:if(a.prev=38,!d){a.next=41;break}throw p;case 41:return a.finish(38);case 42:return a.finish(35);case 43:if(w=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&w.length){a.next=46;break}return a.abrupt("return",new t(s,n,i));case 46:if(s=w[0],!c){a.next=50;break}return a.next=50,s._set(u,c.toJSON());case 50:return a.next=52,Promise.all(r.map(function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===s){e.next=8;break}return e.prev=1,e.next=4,n._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()));case 52:return a.abrupt("return",new t(s,n,i));case 53:case"end":return a.stop()}}),a,null,[[9,31,35,43],[13,24],[36,,38,42]])})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Au(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Du(t))return"Blackberry";if(Lu(t))return"Webos";if(Cu(t))return"Safari";if((t.includes("chrome/")||Ou(t))&&!t.includes("edge/"))return"Chrome";if(Ru(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/firefox\//i.test(e)}function Cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/crios\//i.test(e)}function Nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/iemobile/i.test(e)}function Ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/android/i.test(e)}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/blackberry/i.test(e)}function Lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/webos/i.test(e)}function Pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return Pu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Uu(){return((e=_r()).indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0)&&10===document.documentMode;var e}function Fu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();return Pu(e)||Ru(e)||Lu(e)||Du(e)||/windows phone/i.test(e)||Nu(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Su(_r());break;case"Worker":t="".concat(Su(_r()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Fi,"/").concat(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ju=function(){"use strict";function t(n){e(Y)(this,t),this.auth=n,this.queue=[]}return e(X)(t,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(e){r(e)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a,o,s,u,c,l,f,d,p,v,y,m;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:i=[],e.prev=3,a=!0,o=!1,s=void 0,e.prev=5,u=n.queue[Symbol.iterator]();case 7:if(a=(c=u.next()).done){e.next=15;break}return l=c.value,e.next=11,l(t);case 11:l.onAbort&&i.push(l.onAbort);case 12:a=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),o=!0,s=e.t0;case 21:e.prev=21,e.prev=22,a||null==u.return||u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=52;break;case 31:for(e.prev=31,e.t1=e.catch(3),i.reverse(),f=!0,d=!1,p=void 0,e.prev=35,v=i[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){m=y.value;try{m()}catch(e){}}e.next=43;break;case 39:e.prev=39,e.t2=e.catch(35),d=!0,p=e.t2;case 43:e.prev=43,e.prev=44,f||null==v.return||v.return();case 46:if(e.prev=46,!d){e.next=49;break}throw p;case 49:return e.finish(46);case 50:return e.finish(43);case 51:throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 52:case"end":return e.stop()}}),r,null,[[3,31],[5,17,21,29],[22,,24,28],[35,39,43,51],[44,,46,50]])})))()}}]),t}(),Bu=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.app=n,this.heartbeatServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zu(this),this.idTokenSubscription=new zu(this),this.beforeStateQueue=new ju(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bs,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=i.sdkClientVersion}return e(X)(t,[{key:"_initializeWithPersistence",value:function(t,n){n&&(this._popupRedirectResolver=Ds(n));var r=this;return this._initializationPromise=this.queue(e(l)(e(h).mark((function i(){var a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r._deleted){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Tu.create(r,t);case 5:if(r.persistenceManager=e.sent,!r._deleted){e.next=8;break}return e.abrupt("return");case 8:if(!(null===(a=r._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){e.next=16;break}return e.prev=9,e.next=12,r._popupRedirectResolver._initialize(r);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return e.next=18,r.initializeCurrentUser(n);case 18:if(r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted){e.next=21;break}return e.abrupt("return");case 21:r._isInitialized=!0;case 22:case"end":return e.stop()}}),i,null,[[9,14]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.assertedPersistence.getCurrentUser();case 4:if(r=e.sent,t.currentUser||r){e.next=7;break}return e.abrupt("return");case 7:if(!t.currentUser||!r||t.currentUser.uid!==r.uid){e.next=12;break}return t._currentUser._assign(r),e.next=11,t.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,t._updateCurrentUser(r,!0);case 14:case"end":return e.stop()}}),n)})))()}},{key:"initializeCurrentUser",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a,o,s,u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.assertedPersistence.getCurrentUser();case 3:if(a=e.sent,o=a,s=!1,!t||!n.config.authDomain){e.next=15;break}return e.next=9,n.getOrInitRedirectPersistenceManager();case 9:return u=null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId,c=null==o?void 0:o._redirectEventId,e.next=13,n.tryRedirectSignIn(t);case 13:l=e.sent,u&&u!==c||!(null==l?void 0:l.user)||(o=l.user,s=!0);case 15:if(o){e.next=17;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 17:if(o._redirectEventId){e.next=33;break}if(!s){e.next=28;break}return e.prev=19,e.next=22,n.beforeStateQueue.runMiddleware(o);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(19),o=a,n._popupRedirectResolver._overrideRedirectResult(n,(function(){return Promise.reject(e.t0)}));case 28:if(!o){e.next=32;break}return e.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 32:return e.abrupt("return",n.directlySetCurrentUser(null));case 33:return Cs(n._popupRedirectResolver,n,"argument-error"),e.next=36,n.getOrInitRedirectPersistenceManager();case 36:if(!n.redirectUser||n.redirectUser._redirectEventId!==o._redirectEventId){e.next=38;break}return e.abrupt("return",n.directlySetCurrentUser(o));case 38:return e.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 39:case"end":return e.stop()}}),r,null,[[19,24]])})))()}},{key:"tryRedirectSignIn",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,n._popupRedirectResolver._completeRedirectFn(n,t,!0);case 4:i=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,n._setRedirectUser(null);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),r,null,[[1,7]])})))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,du(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=9;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 9:return e.abrupt("return",n.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),r,null,[[0,5]])})))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._deleted=!0;case 1:case"end":return e.stop()}}),n)})))()}},{key:"updateCurrentUser",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=t?zr(t):null)&&Cs(i.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),e.abrupt("return",n._updateCurrentUser(i&&i._clone(n)));case 3:case"end":return e.stop()}}),r)})))()}},{key:"_updateCurrentUser",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r._deleted){i.next=2;break}return i.abrupt("return");case 2:if(t&&Cs(r.tenantId===t.tenantId,r,"tenant-id-mismatch"),n){i.next=6;break}return i.next=6,r.beforeStateQueue.runMiddleware(t);case 6:return i.abrupt("return",r.queue(e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),n)})))));case 7:case"end":return i.stop()}}),i)})))()}},{key:"signOut",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.beforeStateQueue.runMiddleware(null);case 2:if(!t.redirectPersistenceManager&&!t._popupRedirectResolver){e.next=5;break}return e.next=5,t._setRedirectUser(null);case 5:return e.abrupt("return",t._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),n)})))()}},{key:"setPersistence",value:function(t){var n=this;return this.queue(e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.assertedPersistence.setPersistence(Ds(t));case 2:case"end":return e.stop()}}),r)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Or("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){var a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getOrInitRedirectPersistenceManager(n);case 2:return a=e.sent,e.abrupt("return",null===t?a.removeCurrentUser():a.setCurrentUser(t));case 4:case"end":return e.stop()}}),i)})))()}},{key:"getOrInitRedirectPersistenceManager",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.redirectPersistenceManager){e.next=9;break}return Cs(i=t&&Ds(t)||n._popupRedirectResolver,n,"argument-error"),e.next=5,Tu.create(n,[Ds(i._redirectPersistence)],"redirectUser");case 5:return n.redirectPersistenceManager=e.sent,e.next=8,n.redirectPersistenceManager.getCurrentUser();case 8:n.redirectUser=e.sent;case 9:return e.abrupt("return",n.redirectPersistenceManager);case 10:case"end":return e.stop()}}),r)})))()}},{key:"_redirectUserForId",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a;return e(h).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._isInitialized){r.next=4;break}return r.next=4,n.queue(e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)}))));case 4:if((null===(i=n._currentUser)||void 0===i?void 0:i._redirectEventId)!==t){r.next=6;break}return r.abrupt("return",n._currentUser);case 6:if((null===(a=n.redirectUser)||void 0===a?void 0:a._redirectEventId)!==t){r.next=8;break}return r.abrupt("return",n.redirectUser);case 8:return r.abrupt("return",null);case 9:case"end":return r.stop()}}),r)})))()}},{key:"_persistUserIfCurrent",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t!==n.currentUser){r.next=2;break}return r.abrupt("return",n.queue(e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),r)})))));case 2:case"end":return r.stop()}}),r)})))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Cs(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.currentUser&&n.currentUser!==t&&n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh(),n.currentUser=t,!t){e.next=8;break}return e.next=6,n.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,n.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),r)})))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Cs(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vu(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r,i,a;return e(h).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e(qn)({},"X-Client-Version",t.clientVersion),t.app.options.appId&&(i["X-Firebase-gmpid"]=t.app.options.appId),n.next=5,null===(r=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===r?void 0:r.getHeartbeatsHeader();case 5:return(a=n.sent)&&(i["X-Firebase-Client"]=a),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(e){return zr(e)}var zu=function(){"use strict";function t(n){var r,i,a=this;e(Y)(this,t),this.auth=n,this.observer=null,this.addObserver=(i=new Vr((function(e){return a.observer=e}),r)).subscribe.bind(i)}return e(X)(t,[{key:"next",get:function(){return Cs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),t}();function Hu(t,n,r){var i=qu(t);Cs(i._canInitEmulator,i,"emulator-config-failed"),Cs(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var a=!!(null==r?void 0:r.disableWarnings),o=Ku(n),s=function(t){var n=Ku(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:Gu(i.substr(o.length+1))}}var s=e(Bt)(i.split(":"),2);return{host:s[0],port:Gu(s[1])}}(n),u=s.host,c=s.port,l=null===c?"":":".concat(c);i.config.emulator={url:"".concat(o,"//").concat(u).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Ku(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gu(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Wu=function(){"use strict";function t(n,r){e(Y)(this,t),this.providerId=n,this.signInMethod=r}return e(X)(t,[{key:"toJSON",value:function(){return Os("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Os("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Os("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Os("not implemented")}}]),t}();function Qu(e,t){return Ju.apply(this,arguments)}function Ju(){return(Ju=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ks(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Yu(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(n,"POST","/v1/accounts:signInWithPassword",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $u(e,t){return Zu.apply(this,arguments)}function Zu(){return(Zu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(n,"POST","/v1/accounts:signInWithEmailLink",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return(tc=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(n,"POST","/v1/accounts:signInWithEmailLink",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e(Y)(this,r),(o=n.call(this,"password",a))._email=t,o._password=i,o._tenantId=s,o}return e(X)(r,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Yu(t,{returnSecureToken:!0,email:n._email,password:n._password}));case 4:return e.abrupt("return",$u(t,{email:n._email,oobCode:n._password}));case 5:xs(t,"internal-error");case 6:case"end":return e.stop()}}),r)})))()}},{key:"_linkToIdToken",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Qu(t,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password}));case 4:return e.abrupt("return",ec(t,{idToken:n,email:r._email,oobCode:r._password}));case 5:xs(t,"internal-error");case 6:case"end":return e.stop()}}),i)})))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new r(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new r(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),r}(Wu);function rc(e,t){return ic.apply(this,arguments)}function ic(){return(ic=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(n,"POST","/v1/accounts:signInWithIdp",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ac=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){var t;return e(Y)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).pendingToken=null,t}return e(X)(r,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return rc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,rc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,rc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xs("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.providerId,i=t.signInMethod,a=gs(t,["providerId","signInMethod"]);if(!n||!i)return null;var o=new r(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),r}(Wu);function oc(e,t){return sc.apply(this,arguments)}function sc(){return(sc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ks(n,"POST","/v1/accounts:sendVerificationCode",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function uc(){return(uc=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(n,"POST","/v1/accounts:signInWithPhoneNumber",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function cc(){return(cc=e(l)(e(h).mark((function t(n,r){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Js(n,"POST","/v1/accounts:signInWithPhoneNumber",Hs(n,r));case 2:if(!(i=e.sent).temporaryProof){e.next=5;break}throw Zs(n,"account-exists-with-different-credential",i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var lc=e(qn)({},"USER_NOT_FOUND","user-not-found");function fc(){return(fc=e(l)(e(h).mark((function t(n,r){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.assign(Object.assign({},r),{operation:"REAUTH"}),e.abrupt("return",Js(n,"POST","/v1/accounts:signInWithPhoneNumber",Hs(n,i),lc));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this,"phone","phone")).params=t,i}return e(X)(r,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return uc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return cc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return fc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new r({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new r({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e.verificationId,n=e.verificationCode,i=e.phoneNumber,a=e.temporaryProof;return n||t||i||a?new r({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:a}):null}}]),r}(Wu);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dc=function(){"use strict";function t(n){var r,i,a,o,s,u;e(Y)(this,t);var c=Ur(Fr(n)),l=null!==(r=c.apiKey)&&void 0!==r?r:null,f=null!==(i=c.oobCode)&&void 0!==i?i:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=c.mode)&&void 0!==a?a:null);Cs(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return e(X)(t,null,[{key:"parseLink",value:function(e){var n=function(e){var t=Ur(Fr(e)).link,n=t?Ur(Fr(t)).deep_link_id:null,r=Ur(Fr(e)).deep_link_id;return(r?Ur(Fr(r)).link:null)||r||n||t||e}(e);try{return new t(n)}catch(e){return null}}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pc=function(){"use strict";function t(){e(Y)(this,t),this.providerId=t.PROVIDER_ID}return e(X)(t,null,[{key:"credential",value:function(e,t){return nc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=dc.parseLink(t);return Cs(n,"argument-error"),nc._fromEmailAndCode(e,n.code,n.tenantId)}}]),t}();pc.PROVIDER_ID="password",pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vc=function(){"use strict";function t(n){e(Y)(this,t),this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}return e(X)(t,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),t}(),yc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){var t;return e(Y)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).scopes=[],t}return e(X)(r,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return e(Wt)(this.scopes)}}]),r}(vc),mc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.call(this,"facebook.com")}return e(X)(r,null,[{key:"credential",value:function(e){return ac._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(yc);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mc.FACEBOOK_SIGN_IN_METHOD="facebook.com",mc.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){var t;return e(Y)(this,r),(t=n.call(this,"google.com")).addScope("profile"),t}return e(X)(r,null,[{key:"credential",value:function(e,t){return ac._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthIdToken,i=t.oauthAccessToken;if(!n&&!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(yc);gc.GOOGLE_SIGN_IN_METHOD="google.com",gc.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.call(this,"github.com")}return e(X)(r,null,[{key:"credential",value:function(e){return ac._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(yc);kc.GITHUB_SIGN_IN_METHOD="github.com",kc.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.call(this,"twitter.com")}return e(X)(r,null,[{key:"credential",value:function(e,t){return ac._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthAccessToken,i=t.oauthTokenSecret;if(!n||!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(yc);function bc(e,t){return Ec.apply(this,arguments)}function Ec(){return(Ec=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(n,"POST","/v1/accounts:signUp",Hs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wc.TWITTER_SIGN_IN_METHOD="twitter.com",wc.PROVIDER_ID="twitter.com";var Ic=function(){"use strict";function t(n){e(Y)(this,t),this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}return e(X)(t,null,[{key:"_fromIdTokenResponse",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(l)(e(h).mark((function o(){var s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eu._fromIdTokenResponse(n,i,a);case 2:return s=e.sent,u=_c(i),c=new t({user:s,providerId:u,_tokenResponse:i,operationType:r}),e.abrupt("return",c);case 6:case"end":return e.stop()}}),o)})))()}},{key:"_forOperation",value:function(n,r,i){return e(l)(e(h).mark((function a(){var o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=_c(i),e.abrupt("return",new t({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return e.stop()}}),a)})))()}}]),t}();function _c(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o){var s,u;return e(Y)(this,r),(s=n.call(this,i.code,i.message)).operationType=a,s.user=o,Object.setPrototypeOf(e(re)(s),r.prototype),s.customData={appName:t.name,tenantId:null!==(u=t.tenantId)&&void 0!==u?u:void 0,_serverResponse:i.customData._serverResponse,operationType:a},s}return e(X)(r,null,[{key:"_fromErrorAndOperation",value:function(e,t,n,i){return new r(e,t,n,i)}}]),r}(Cr);function Tc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw xc._fromErrorAndOperation(e,n,t,r);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(e,t){return Ac.apply(this,arguments)}function Ac(){return Ac=e(l)(e(h).mark((function t(n,r){var i,a,o=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]&&o[2],e.t0=uu,e.t1=n,e.t2=r,e.t3=n.auth,e.next=7,n.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=i,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",Ic._forOperation(n,"link",a));case 14:case"end":return e.stop()}}),t)}))),Ac.apply(this,arguments)}function Cc(e,t){return Oc.apply(this,arguments)}function Oc(){return Oc=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c,l=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]&&l[2],a=n.auth,o="reauthenticate",e.prev=3,e.next=6,uu(n,Tc(a,o,r,n),i);case 6:return Cs((s=e.sent).idToken,a,"internal-error"),Cs(u=su(s.idToken),a,"internal-error"),c=u.sub,Cs(n.uid===c,a,"user-mismatch"),e.abrupt("return",Ic._forOperation(n,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),"auth/user-not-found"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&xs(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),t,null,[[3,15]])}))),Oc.apply(this,arguments)}function Nc(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i,a,o,s,u=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],a="signIn",e.next=4,Tc(n,a,r);case 4:return o=e.sent,e.next=7,Ic._fromIdTokenResponse(n,a,o);case 7:if(s=e.sent,i){e.next=11;break}return e.next=11,n._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),t)}))),Rc.apply(this,arguments)}function Dc(e,t){return Lc.apply(this,arguments)}function Lc(){return(Lc=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nc(qu(n),r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Pc(e,t,n){return Mc.apply(this,arguments)}function Mc(){return(Mc=e(l)(e(h).mark((function t(n,r,i){var a,o,s;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qu(n),e.next=3,bc(a,{returnSecureToken:!0,email:r,password:i});case 3:return o=e.sent,e.next=6,Ic._fromIdTokenResponse(a,"signIn",o);case 6:return s=e.sent,e.next=9,a._updateCurrentUser(s.user);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Uc(e,t){return Fc.apply(this,arguments)}function Fc(){return(Fc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ks(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Vc(e,t){return jc.apply(this,arguments)}function jc(){return(jc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.displayName,a=r.photoURL,void 0!==i||void 0!==a){e.next=3;break}return e.abrupt("return");case 3:return o=zr(n),e.next=6,o.getIdToken();case 6:return s=e.sent,u={idToken:s,displayName:i,photoUrl:a,returnSecureToken:!0},e.next=10,uu(o,Uc(o.auth,u));case 10:return c=e.sent,o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null,(l=o.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=o.displayName,l.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Bc(e,t,n,r){return zr(e).onIdTokenChanged(t,n,r)}function qc(e,t,n){return zr(e).beforeAuthStateChanged(t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zc(e,t){return Ks(e,"POST","/v2/accounts/mfaEnrollment:start",Hs(e,t))}function Hc(e,t){return Ks(e,"POST","/v2/accounts/mfaEnrollment:finalize",Hs(e,t))}new WeakMap;var Kc="__sak",Gc=function(){"use strict";function t(n,r){e(Y)(this,t),this.storageRetriever=n,this.type=r}return e(X)(t,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){var t,i;return e(Y)(this,r),(t=n.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(e,n){return t.onStorageEvent(e,n)},t.listeners={},t.localCache={},t.pollTimer=null,t.safariLocalStorageNotSynced=(Cu(i=_r())||Pu(i))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),t.fallbackToPolling=Fu(),t._shouldAllowMigration=!0,t}return e(X)(r,[{key:"forAllChangedKeys",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(this.listeners)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.storage.getItem(o),u=this.localCache[o];s!==u&&e(o,u,s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"onStorageEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(e.key){var r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}var a=function(){var e=n.storage.getItem(r);(t||n.localCache[r]!==e)&&n.notifyListeners(r,e)},o=this.storage.getItem(r);Uu()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else{var s=this;this.forAllChangedKeys((function(e,t,n){s.notifyListeners(e,n)}))}}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,s=Array.from(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t?JSON.parse(t):t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){var t=e;e.forAllChangedKeys((function(e,n,r){t.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(t,n){var i=this,a=this;return e(l)(e(h).mark((function o(){return e(h).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e(ps)(e(ms)(r.prototype),"_set",i).call(a,t,n);case 2:a.localCache[t]=JSON.stringify(n);case 3:case"end":return o.stop()}}),o)})))()}},{key:"_get",value:function(t){var n=this,i=this;return e(l)(e(h).mark((function a(){var o;return e(h).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(ps)(e(ms)(r.prototype),"_get",n).call(i,t);case 2:return o=a.sent,i.localCache[t]=JSON.stringify(o),a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()}},{key:"_remove",value:function(t){var n=this,i=this;return e(l)(e(h).mark((function a(){return e(h).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(ps)(e(ms)(r.prototype),"_remove",n).call(i,t);case 2:delete i.localCache[t];case 3:case"end":return a.stop()}}),a)})))()}}]),r}(Gc);Wc.type="LOCAL";var Qc=Wc,Jc=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.call(this,(function(){return window.sessionStorage}),"SESSION")}return e(X)(r,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),r}(Gc);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jc.type="SESSION";var Yc=Jc;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){return Promise.all(t.map((n=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:return r=e.sent,e.abrupt("return",{fulfilled:!0,value:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),t,null,[[0,7]])}))),function(e){return n.apply(this,arguments)})));var n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $c=function(){"use strict";function t(n){e(Y)(this,t),this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return e(X)(t,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a,o,s,u,c,f,d;return e(h).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(i=t).data,o=a.eventId,s=a.eventType,u=a.data,null==(c=n.handlersMap[s])?void 0:c.size){r.next=5;break}return r.abrupt("return");case 5:return i.ports[0].postMessage({status:"ack",eventId:o,eventType:s}),f=Array.from(c).map(function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(i.origin,u));case 1:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.next=9,Xc(f);case 9:d=r.sent,i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d});case 11:case"end":return r.stop()}}),r)})))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(e){var n=this.receivers.find((function(t){return t.isListeningto(e)}));if(n)return n;var r=new t(e);return this.receivers.push(r),r}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$c.receivers=[];var el=function(){"use strict";function t(n){e(Y)(this,t),this.target=n,this.handlers=new Set}return e(X)(t,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=this;return e(l)(e(h).mark((function a(){var o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=3;break}throw new Error("connection_unavailable");case 3:return e.abrupt("return",new Promise((function(e,a){var c=Zc("",20);o.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);u={messageChannel:o,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),s=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),e(n.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},i.handlers.add(u),o.port1.addEventListener("message",u.onMessage),i.target.postMessage({eventType:t,eventId:c,data:n},[o.port2])})).finally((function(){u&&i.removeMessageHandler(u)})));case 6:case"end":return e.stop()}}),a)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nl(){return void 0!==tl().WorkerGlobalScope&&"function"==typeof tl().importScripts}function rl(){return il.apply(this,arguments)}function il(){return(il=e(l)(e(h).mark((function t(){var n;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return n=e.sent,e.abrupt("return",n.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var al="firebaseLocalStorageDb",ol="firebaseLocalStorage",sl="fbase_key",ul=function(){"use strict";function t(n){e(Y)(this,t),this.request=n}return e(X)(t,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){var r=e;e.request.addEventListener("success",(function(){t(r.request.result)})),e.request.addEventListener("error",(function(){n(r.request.error)}))}))}}]),t}();function cl(e,t){return e.transaction([ol],t?"readwrite":"readonly").objectStore(ol)}function ll(){var e=indexedDB.deleteDatabase(al);return new ul(e).toPromise()}function fl(){var t=indexedDB.open(al,1);return new Promise((function(n,r){t.addEventListener("error",(function(){r(t.error)})),t.addEventListener("upgradeneeded",(function(){var e=t.result;try{e.createObjectStore(ol,{keyPath:sl})}catch(e){r(e)}})),t.addEventListener("success",e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=t.result).objectStoreNames.contains(ol)){e.next=12;break}return i.close(),e.next=5,ll();case 5:return e.t0=n,e.next=8,fl();case 8:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 12:n(i);case 13:case"end":return e.stop()}}),r)}))))}))}function hl(e,t,n){return dl.apply(this,arguments)}function dl(){return(dl=e(l)(e(h).mark((function t(n,r,i){var a,o;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=cl(n,!0).put((a={},e(qn)(a,sl,r),e(qn)(a,"value",i),a)),t.abrupt("return",new ul(o).toPromise());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pl(e,t){return vl.apply(this,arguments)}function vl(){return(vl=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cl(n,!1).get(r),e.next=3,new ul(i).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function yl(e,t){var n=cl(e,!0).delete(t);return new ul(n).toPromise()}var ml=function(){"use strict";function t(){e(Y)(this,t),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return e(X)(t,[{key:"_openDb",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.db){e.next=2;break}return e.abrupt("return",t.db);case 2:return e.next=4,fl();case 4:return t.db=e.sent,e.abrupt("return",t.db);case 6:case"end":return e.stop()}}),n)})))()}},{key:"_withRetries",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:return e.prev=2,e.next=5,n._openDb();case 5:return a=e.sent,e.next=8,t(a);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(i++>3)){e.next=15;break}throw e.t0;case 15:n.db&&(n.db.close(),n.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),r,null,[[2,11]])})))()}},{key:"initializeServiceWorkerMessaging",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl()?t.initializeReceiver():t.initializeSender());case 1:case"end":return e.stop()}}),n)})))()}},{key:"initializeReceiver",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.receiver=$c._getInstance(nl()?self:null),t.receiver._subscribe("keyChanged",function(){var n=e(l)(e(h).mark((function n(r,i){var a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(i.key)});case 4:case"end":return e.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}},{key:"initializeSender",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r,i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,rl();case 3:if(t.activeServiceWorker=e.sent,t.activeServiceWorker){e.next=6;break}return e.abrupt("return");case 6:return t.sender=new el(t.activeServiceWorker),e.next=9,t.sender._send("ping",{},800);case 9:if(a=e.sent){e.next=12;break}return e.abrupt("return");case 12:(null===(r=a[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=a[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0);case 13:case"end":return e.stop()}}),n)})))()}},{key:"notifyServiceWorker",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.sender&&n.activeServiceWorker&&(r=void 0,((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)===n.activeServiceWorker)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,n.sender._send("keyChanged",{key:t},n.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}var r}),r,null,[[2,7]])})))()}},{key:"_isAvailable",value:function(){return e(l)(e(h).mark((function t(){var n;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,fl();case 5:return n=e.sent,e.next=8,hl(n,Kc,"1");case 8:return e.next=10,yl(n,Kc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))()}},{key:"_withPendingWrite",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,n.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),r,null,[[1,,4,7]])})))()}},{key:"_set",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r._withPendingWrite(e(l)(e(h).mark((function i(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return hl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),i)})))));case 1:case"end":return i.stop()}}),i)})))()}},{key:"_get",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return pl(e,t)}));case 2:return i=e.sent,n.localCache[t]=i,e.abrupt("return",i);case 5:case"end":return e.stop()}}),r)})))()}},{key:"_remove",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite(e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return yl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),r)})))));case 1:case"end":return r.stop()}}),r)})))()}},{key:"_poll",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r,i,a,o,s,u,c,l,f,d,p,v,y,m,g,k,w;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._withRetries((function(e){var t=cl(e,!1).getAll();return new ul(t).toPromise()}));case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===t.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:for(i=[],a=new Set,o=!0,s=!1,u=void 0,e.prev=10,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)f=l.value,d=f.fbase_key,p=f.value,a.add(d),JSON.stringify(t.localCache[d])!==JSON.stringify(p)&&(t.notifyListeners(d,p),i.push(d));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,u=e.t0;case 18:e.prev=18,e.prev=19,o||null==c.return||c.return();case 21:if(e.prev=21,!s){e.next=24;break}throw u;case 24:return e.finish(21);case 25:return e.finish(18);case 26:for(v=!0,y=!1,m=void 0,e.prev=27,g=Object.keys(t.localCache)[Symbol.iterator]();!(v=(k=g.next()).done);v=!0)w=k.value,t.localCache[w]&&!a.has(w)&&(t.notifyListeners(w,null),i.push(w));e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),y=!0,m=e.t1;case 35:e.prev=35,e.prev=36,v||null==g.return||g.return();case 38:if(e.prev=38,!y){e.next=41;break}throw m;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",i);case 44:case"end":return e.stop()}}),n,null,[[10,14,18,26],[19,,21,25],[27,31,35,43],[36,,38,42]])})))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,s=Array.from(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){this.stopPolling();var t=this;this.pollTimer=setInterval(e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._poll());case 1:case"end":return e.stop()}}),n)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),t}();ml.type="LOCAL";var gl=ml;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(e,t){return Ks(e,"POST","/v2/accounts/mfaSignIn:start",Hs(e,t))}function wl(e,t){return Ks(e,"POST","/v2/accounts/mfaSignIn:finalize",Hs(e,t))}function bl(e){return new Promise((function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=Ts("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)}))}function El(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
El("rcb"),new Fs(3e4,6e4);var Il="recaptcha";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(e,t,n){return xl.apply(this,arguments)}function xl(){return(xl=e(l)(e(h).mark((function t(n,r,i){var a,o,s,u,c,l,f,d;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,i.verify();case 3:if(o=e.sent,e.prev=4,Cs("string"==typeof o,n,"argument-error"),Cs(i.type===Il,n,"argument-error"),!("session"in(s="string"==typeof r?{phoneNumber:r}:r))){e.next=28;break}if(u=s.session,!("phoneNumber"in s)){e.next=19;break}return Cs("enroll"===u.type,n,"internal-error"),e.next=15,zc(n,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:o}});case 15:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 19:return Cs("signin"===u.type,n,"internal-error"),Cs(l=(null===(a=s.multiFactorHint)||void 0===a?void 0:a.uid)||s.multiFactorUid,n,"missing-multi-factor-info"),e.next=24,kl(n,{mfaPendingCredential:u.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:o}});case 24:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 26:e.next=32;break;case 28:return e.next=30,oc(n,{phoneNumber:s.phoneNumber,recaptchaToken:o});case 30:return d=e.sent.sessionInfo,e.abrupt("return",d);case 32:return e.prev=32,i._reset(),e.finish(32);case 35:case"end":return e.stop()}}),t,null,[[4,,32,35]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tl=function(){"use strict";function t(n){e(Y)(this,t),this.providerId=t.PROVIDER_ID,this.auth=qu(n)}return e(X)(t,[{key:"verifyPhoneNumber",value:function(e,t){return _l(this.auth,e,zr(t))}}],[{key:"credential",value:function(e,t){return hc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(e){var n=e;return t.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?hc._fromTokenResponse(n,r):null}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Sl(e,t){return t?Ds(t):(Cs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl.PROVIDER_ID="phone",Tl.PHONE_SIGN_IN_METHOD="phone";var Al=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this,"custom","custom")).params=t,i}return e(X)(r,[{key:"_getIdTokenResponse",value:function(e){return rc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return rc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return rc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),r}(Wu);function Cl(e){return Nc(e.auth,new Al(e),e.bypassAuthState)}function Ol(e){var t=e.auth,n=e.user;return Cs(n,t,"internal-error"),Cc(n,new Al(e),e.bypassAuthState)}function Nl(e){return Rl.apply(this,arguments)}function Rl(){return(Rl=e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.auth,Cs(i=n.user,r,"internal-error"),e.abrupt("return",Sc(i,new Al(n),n.bypassAuthState));case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dl=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e(Y)(this,t),this.auth=n,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}return e(X)(t,[{key:"execute",value:function(){var t,n=this;return new Promise((t=e(l)(e(h).mark((function t(r,i){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingPromise={resolve:r,reject:i},e.prev=1,e.next=4,n.resolver._initialize(n.auth);case 4:return n.eventManager=e.sent,e.next=7,n.onExecution();case 7:n.eventManager.registerConsumer(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.reject(e.t0);case 13:case"end":return e.stop()}}),t,null,[[1,10]])}))),function(e,n){return t.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a,o,s,u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.urlResponse,a=t.sessionId,o=t.postBody,s=t.tenantId,u=t.error,c=t.type,!u){e.next=4;break}return n.reject(u),e.abrupt("return");case 4:return l={auth:n.auth,requestUri:i,sessionId:a,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState},e.prev=5,e.t0=n,e.next=9,n.getIdpTask(c)(l);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),n.reject(e.t2);case 16:case"end":return e.stop()}}),r,null,[[5,13]])})))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cl;case"linkViaPopup":case"linkViaRedirect":return Nl;case"reauthViaPopup":case"reauthViaRedirect":return Ol;default:xs(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),t}(),Ll=new Fs(2e3,1e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pl=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o,s){var u;return e(Y)(this,r),(u=n.call(this,t,i,o,s)).provider=a,u.authWindow=null,u.pollId=null,r.currentPopupAction&&r.currentPopupAction.cancel(),r.currentPopupAction=e(re)(u),u}return e(X)(r,[{key:"executeNotNull",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.execute();case 2:return Cs(r=e.sent,t.auth,"internal-error"),e.abrupt("return",r);case 5:case"end":return e.stop()}}),n)})))()}},{key:"onExecution",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns(1===t.filter.length,"Popup operations only handle one event"),r=Zc(),e.next=4,t.resolver._openPopup(t.auth,t.provider,t.filter[0],r);case 4:t.authWindow=e.sent,t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch((function(e){t.reject(e)})),t.resolver._isIframeWebStorageSupported(t.auth,(function(e){e||t.reject(Ts(t.auth,"web-storage-unsupported"))})),t.pollUserCancellation();case 9:case"end":return e.stop()}}),n)})))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ts(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this,t=function(){var n,r;if(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed){var i=e;e.pollId=window.setTimeout((function(){i.pollId=null,i.reject(Ts(i.auth,"popup-closed-by-user"))}),2e3)}else e.pollId=window.setTimeout(t,Ll.get())};t()}}]),r}(Dl);Pl.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ml=new Map,Ul=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(Y)(this,r),(a=n.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,o)).eventId=null,a}return e(X)(r,[{key:"execute",value:function(){var t=this,n=this;return e(l)(e(h).mark((function i(){var a,o;return e(h).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=Ml.get(n.auth._key())){i.next=21;break}return i.prev=2,i.next=5,Fl(n.resolver,n.auth);case 5:if(!i.sent){i.next=12;break}return i.next=9,e(ps)(e(ms)(r.prototype),"execute",t).call(n);case 9:i.t0=i.sent,i.next=13;break;case 12:i.t0=null;case 13:o=i.t0,a=function(){return Promise.resolve(o)},i.next=20;break;case 17:i.prev=17,i.t1=i.catch(2),a=function(){return Promise.reject(i.t1)};case 20:Ml.set(n.auth._key(),a);case 21:return n.bypassAuthState||Ml.set(n.auth._key(),(function(){return Promise.resolve(null)})),i.abrupt("return",a());case 23:case"end":return i.stop()}}),i,null,[[2,17]])})))()}},{key:"onAuthEvent",value:function(t){var n=this,i=this,a=function(){return e(ps)(e(ms)(r.prototype),"onAuthEvent",n)};return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",a().call(i,t));case 4:if("unknown"!==t.type){e.next=7;break}return i.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,i.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return i.user=r,e.abrupt("return",a().call(i,t));case 16:i.resolve(null);case 17:case"end":return e.stop()}}),n)})))()}},{key:"onExecution",value:function(){return e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})))()}},{key:"cleanUp",value:function(){}}]),r}(Dl);function Fl(e,t){return Vl.apply(this,arguments)}function Vl(){return(Vl=e(l)(e(h).mark((function t(n,r){var i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ql(r),a=Bl(n),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(i);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,a._remove(i);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function jl(e,t){Ml.set(e._key(),t)}function Bl(e){return Ds(e._redirectPersistence)}function ql(e){return xu("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(e,t){return Hl.apply(this,arguments)}function Hl(){return Hl=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]&&c[2],a=qu(n),o=Sl(a,r),s=new Ul(a,o,i),e.next=6,s.execute();case 6:if(!(u=e.sent)||i){e.next=13;break}return delete u.user._redirectEventId,e.next=11,a._persistUserIfCurrent(u.user);case 11:return e.next=13,a._setRedirectUser(null,r);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),t)}))),Hl.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Kl=function(){"use strict";function t(n){e(Y)(this,t),this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return e(X)(t,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Wl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ts(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Gl(e)),this.lastProcessedEventTime=Date.now()}}]),t}();function Gl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Wl(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Ql(e){return Jl.apply(this,arguments)}function Jl(){return Jl=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){var r,i=arguments;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",Ks(n,"GET","/v1/projects",r));case 2:case"end":return e.stop()}}),t)}))),Jl.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xl=/^https?/;function $l(){return($l=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ql(n);case 4:r=e.sent.authorizedDomains,i=!0,a=!1,o=void 0,e.prev=6,s=r[Symbol.iterator]();case 8:if(i=(u=s.next()).done){e.next=20;break}if(c=u.value,e.prev=10,!Zl(c)){e.next=13;break}return e.abrupt("return");case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:i=!0,e.next=8;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(6),a=!0,o=e.t1;case 26:e.prev=26,e.prev=27,i||null==s.return||s.return();case 29:if(e.prev=29,!a){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:xs(n,"unauthorized-domain");case 35:case"end":return e.stop()}}),t,null,[[6,22,26,34],[10,15],[27,,29,33]])})))).apply(this,arguments)}function Zl(e){var t=Ps(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Xl.test(r))return!1;if(Yl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ef=new Fs(3e4,6e4);function tf(){var t=tl().___jsl,n=!0,r=!1,i=void 0;if(null==t?void 0:t.H)try{for(var a,o=Object.keys(t.H)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(t.H[s].r=t.H[s].r||[],t.H[s].L=t.H[s].L||[],t.H[s].r=e(Wt)(t.H[s].L),t.CP)for(var u=0;u<t.CP.length;u++)t.CP[u]=null}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}var nf=null;function rf(e){return nf=nf||function(e){return new Promise((function(t,n){var r,i,a;function o(){tf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){tf(),n(Ts(e,"network-request-failed"))},timeout:ef.get()})}if(null===(i=null===(r=tl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=tl().gapi)||void 0===a?void 0:a.load)){var s=El("iframefcb");return tl()[s]=function(){gapi.load?o():n(Ts(e,"network-request-failed"))},bl("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw nf=null,e}))}(e),nf}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var af=new Fs(5e3,15e3),of={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uf(e){var t=e.config;Cs(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Vs(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Fi},i=sf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Mr(r).slice(1))}function cf(e){return lf.apply(this,arguments)}function lf(){return lf=e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rf(n);case 2:return r=t.sent,Cs(i=tl().gapi,n,"internal-error"),t.abrupt("return",r.open({where:document.body,url:uf(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:of,dontclear:!0},(function(t){return new Promise((r=e(l)(e(h).mark((function r(i,a){var o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){tl().clearTimeout(s),i(t)},e.next=3,t.restyle({setHideOnLeave:!1});case 3:o=Ts(n,"network-request-failed"),s=tl().setTimeout((function(){a(o)}),af.get()),t.ping(u).then(u,(function(){a(o)}));case 7:case"end":return e.stop()}}),r)}))),function(e,t){return r.apply(this,arguments)}));var r})));case 6:case"end":return t.stop()}}),t)}))),lf.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ff={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hf="_blank",df="http://localhost",pf=function(){"use strict";function t(n){e(Y)(this,t),this.window=n,this.associatedEvent=null}return e(X)(t,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),t}();function vf(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),u="",c=Object.assign(Object.assign({},ff),{width:i.toString(),height:a.toString(),top:o,left:s}),l=_r().toLowerCase();r&&(u=Ou(l)?hf:r),Au(l)&&(n=n||df,c.scrollbars="yes");var f=Object.entries(c).reduce((function(t,n){var r=e(Bt)(n,2),i=r[0],a=r[1];return"".concat(t).concat(i,"=").concat(a,",")}),"");if(Mu(l)&&"_self"!==u)return yf(n||"",u),new pf(null);var h=window.open(n||"",u,f);Cs(h,t,"popup-blocked");try{h.focus()}catch(e){}return new pf(h)}function yf(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mf="__/auth/handler",gf="emulator/auth/handler";function kf(t,n,r,i,a,o){Cs(t.config.authDomain,t,"auth-domain-config-required"),Cs(t.config.apiKey,t,"invalid-api-key");var s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Fi,eventId:a};if(n instanceof vc){n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Dr(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters()));var u=!0,c=!1,l=void 0;try{for(var f,h=Object.entries(o||{})[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=e(Bt)(f.value,2),p=d[0],v=d[1];s[p]=v}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}if(n instanceof yc){var y=n.getScopes().filter((function(e){return""!==e}));y.length>0&&(s.scopes=y.join(","))}t.tenantId&&(s.tid=t.tenantId);var m,g,k=s,w=!0,b=!1,E=void 0;try{for(var I,_=Object.keys(k)[Symbol.iterator]();!(w=(I=_.next()).done);w=!0){var x=I.value;void 0===k[x]&&delete k[x]}}catch(e){b=!0,E=e}finally{try{w||null==_.return||_.return()}finally{if(b)throw E}}return"".concat((m=t,g=m.config,g.emulator?Vs(g,gf):"https://".concat(g.authDomain,"/").concat(mf)),"?").concat(Mr(k).slice(1))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wf="webStorageSupport",bf=function(){"use strict";function t(){e(Y)(this,t),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yc,this._completeRedirectFn=zl,this._overrideRedirectResult=jl}return e(X)(t,[{key:"_openPopup",value:function(t,n,r,i){var a=this;return e(l)(e(h).mark((function o(){var s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns(null===(s=a.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),u=kf(t,n,r,Ps(),i),e.abrupt("return",vf(t,u,Zc()));case 4:case"end":return e.stop()}}),o)})))()}},{key:"_openRedirect",value:function(t,n,r,i){var a=this;return e(l)(e(h).mark((function o(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._originValidation(t);case 2:return o=kf(t,n,r,Ps(),i),tl().location.href=o,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var o}),o)})))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ns(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cf(t);case 2:return i=e.sent,a=new Kl(t),i.register("authEvent",(function(e){return Cs(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:a.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:a},n.iframes[t._key()]=i,e.abrupt("return",a);case 8:case"end":return e.stop()}}),r)})))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(wf,{type:wf},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),xs(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return $l.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Fu()||Cu()||Pu()}}]),t}(),Ef=bf,If=function(){"use strict";function t(n){e(Y)(this,t),this.factorId=n}return e(X)(t,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Os("unexpected MultiFactorSessionType")}}}]),t}(),_f=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this,"phone")).credential=t,i}return e(X)(r,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ks(e,"POST","/v2/accounts/mfaEnrollment:finalize",Hs(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ks(e,"POST","/v2/accounts/mfaSignIn:finalize",Hs(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new r(e)}}]),r}(If);(function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,null,[{key:"assertion",value:function(e){return _f._fromCredential(e)}}]),t}()).FACTOR_ID="phone",(function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,null,[{key:"assertionForEnrollment",value:function(e,t){return xf._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return xf._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(t){return e(l)(e(h).mark((function n(){var r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs(void 0!==(r=t).auth,"internal-error"),e.next=4,n=r.auth,a={idToken:r.credential,totpEnrollmentInfo:{}},Ks(n,"POST","/v2/accounts/mfaEnrollment:start",Hs(n,a));case 4:return i=e.sent,e.abrupt("return",Tf._fromStartTotpMfaEnrollmentResponse(i,r.auth));case 6:case"end":return e.stop()}var n,a}),n)})))()}}]),t}()).FACTOR_ID="totp";var xf=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o;return e(Y)(this,r),(o=n.call(this,"totp")).otp=t,o.enrollmentId=i,o.secret=a,o}return e(X)(r,[{key:"_finalizeEnroll",value:function(t,n,r){var i=this;return e(l)(e(h).mark((function a(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs(void 0!==i.secret,t,"argument-error"),e.abrupt("return",Hc(t,{idToken:n,displayName:r,totpVerificationInfo:i.secret._makeTotpVerificationInfo(i.otp)}));case 2:case"end":return e.stop()}}),a)})))()}},{key:"_finalizeSignIn",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){var a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs(void 0!==r.enrollmentId&&void 0!==r.otp,t,"argument-error"),a={verificationCode:r.otp},e.abrupt("return",wl(t,{mfaPendingCredential:n,mfaEnrollmentId:r.enrollmentId,totpVerificationInfo:a}));case 3:case"end":return e.stop()}}),i)})))()}}],[{key:"_fromSecret",value:function(e,t){return new r(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new r(t,e)}}]),r}(If),Tf=function(){"use strict";function t(n,r,i,a,o,s,u){e(Y)(this,t),this.sessionInfo=s,this.auth=u,this.secretKey=n,this.hashingAlgorithm=r,this.codeLength=i,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=o}return e(X)(t,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Sf(e)||Sf(t))&&(r=!0),r&&(Sf(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Sf(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(e,n){return new t(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}}]),t}();function Sf(e){return void 0===e||0===(null==e?void 0:e.length)}var Af="@firebase/auth",Cf="0.22.0",Of=function(){"use strict";function t(n){e(Y)(this,t),this.auth=n,this.internalListeners=new Map}return e(X)(t,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(t){var n=this;return e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.assertAuthConfigured(),e.next=3,n.auth._initializationPromise;case 3:if(n.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,n.auth.currentUser.getIdToken(t);case 7:return i=e.sent,e.abrupt("return",{accessToken:i});case 9:case"end":return e.stop()}}),r)})))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Cs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nf,Rf=br("authIdTokenMaxAge")||300,Df=null,Lf=function(t){return n=e(l)(e(h).mark((function n(r){var i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=5;break}return e.next=4,r.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(i=e.t0,!((a=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3)&&a>Rf)){e.next=9;break}return e.abrupt("return");case 9:if(o=null==i?void 0:i.token,Df!==o){e.next=12;break}return e.abrupt("return");case 12:return Df=o,e.next=15,fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 15:case"end":return e.stop()}}),n)}))),function(e){return n.apply(this,arguments)};var n};Nf="Browser",Di(new Hr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Cs(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Cs(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Nf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vu(Nf)},i=new Bu(e,t,r);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ds);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Di(new Hr("auth-internal",(function(e){var t=qu(e.getProvider("auth").getImmediate());return new Of(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(Af,Cf,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Nf)),Bi(Af,Cf,"esm2017");var Pf,Mf=i("ge8co"),Uf=(ms=i("fVNic"),i("jmhxu")),Ff=(p=i("l5bVx"),ms=i("fVNic"),p=i("l5bVx"),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}),Vf={},jf=jf||{},Bf=Ff||self;function qf(){}function zf(t){var n=void 0===t?"undefined":e(p)(t);return"array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length}function Hf(t){var n=void 0===t?"undefined":e(p)(t);return"object"==n&&null!=t||"function"==n}var Kf="closure_uid_"+(1e9*Math.random()>>>0),Gf=0;function Wf(e,t,n){return e.call.apply(e.bind,arguments)}function Qf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jf(e,t,n){return(Jf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wf:Qf).apply(null,arguments)}function Yf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xf(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function $f(){this.s=this.s,this.o=this.o}$f.prototype.s=!1,$f.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Kf)&&e[Kf]||(e[Kf]=++Gf))},$f.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Zf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function eh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function th(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(zf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function nh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}nh.prototype.h=function(){this.defaultPrevented=!0};var rh=function(){if(!Bf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Bf.addEventListener("test",qf,t),Bf.removeEventListener("test",qf,t)}catch(e){}return e}();function ih(e){return/^[\s\xa0]*$/.test(e)}var ah=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function oh(e,t){return e<t?-1:e>t?1:0}function sh(){var e=Bf.navigator;return e&&(e=e.userAgent)?e:""}function uh(e){return-1!=sh().indexOf(e)}function ch(e){return ch[" "](e),e}ch[" "]=qf;var lh,fh,hh=uh("Opera"),dh=uh("Trident")||uh("MSIE"),ph=uh("Edge"),vh=ph||dh,yh=uh("Gecko")&&!(-1!=sh().toLowerCase().indexOf("webkit")&&!uh("Edge"))&&!(uh("Trident")||uh("MSIE"))&&!uh("Edge"),mh=-1!=sh().toLowerCase().indexOf("webkit")&&!uh("Edge");function gh(){var e=Bf.document;return e?e.documentMode:void 0}e:{var kh="",wh=(fh=sh(),yh?/rv:([^\);]+)(\)|;)/.exec(fh):ph?/Edge\/([\d\.]+)/.exec(fh):dh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fh):mh?/WebKit\/(\S+)/.exec(fh):hh?/(?:Version)[ \/]?(\S+)/.exec(fh):void 0);if(wh&&(kh=wh?wh[1]:""),dh){var bh=gh();if(null!=bh&&bh>parseFloat(kh)){lh=String(bh);break e}}lh=kh}var Eh,Ih={};function _h(){return function(e){var t=Ih;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ah(String(lh)).split("."),n=ah("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=oh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||oh(0==a[2].length,0==o[2].length)||oh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Bf.document&&dh){var xh=gh();Eh=xh||(parseInt(lh,10)||void 0)}else Eh=void 0;var Th=Eh;function Sh(e,t){if(nh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yh){e:{try{ch(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ah[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sh.X.h.call(this)}}Xf(Sh,nh);var Ah={2:"touch",3:"pen",4:"mouse"};Sh.prototype.h=function(){Sh.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ch="closure_listenable_"+(1e6*Math.random()|0),Oh=0;function Nh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Oh,this.ba=this.ea=!1}function Rh(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Dh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Lh(e){var t={};for(var n in e)t[n]=e[n];return t}var Ph="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ph.length;a++)n=Ph[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Uh(e){this.src=e,this.g={},this.h=0}function Fh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Zf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Rh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Vh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Uh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Vh(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Nh(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var jh="closure_lm_"+(1e6*Math.random()|0),Bh={};function qh(e,t,n,r,i){if(r&&r.once)return Hh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qh(e,t[a],n,r,i);return null}return n=Xh(n),e&&e[Ch]?e.N(t,n,Hf(r)?!!r.capture:!!r,i):zh(e,t,n,!1,r,i)}function zh(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Hf(i)?!!i.capture:!!i,s=Jh(e);if(s||(e[jh]=s=new Uh(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Qh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Wh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Hh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Hh(e,t[a],n,r,i);return null}return n=Xh(n),e&&e[Ch]?e.O(t,n,Hf(r)?!!r.capture:!!r,i):zh(e,t,n,!0,r,i)}function Kh(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Kh(e,t[a],n,r,i);else r=Hf(r)?!!r.capture:!!r,n=Xh(n),e&&e[Ch]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Vh(a=e.g[t],n,r,i))&&(Rh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Jh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Vh(t,n,r,i)),(n=-1<e?t[e]:null)&&Gh(n))}function Gh(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ch])Fh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Wh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jh(t))?(Fh(n,e),0==n.h&&(n.src=null,t[jh]=null)):Rh(e)}}}function Wh(e){return e in Bh?Bh[e]:Bh[e]="on"+e}function Qh(e,t){if(e.ba)e=!0;else{t=new Sh(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Gh(e),e=n.call(r,t)}return e}function Jh(e){return(e=e[jh])instanceof Uh?e:null}var Yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xh(e){return"function"==typeof e?e:(e[Yh]||(e[Yh]=function(t){return e.handleEvent(t)}),e[Yh])}function $h(){$f.call(this),this.i=new Uh(this),this.P=this,this.I=null}function Zh(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new nh(t,e);else if(t instanceof nh)t.target=t.target||e;else{var i=t;Mh(t=new nh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ed(o,r,!0,t)&&i}if(i=ed(o=t.g=e,r,!0,t)&&i,i=ed(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ed(o=t.g=n[a],r,!1,t)&&i}function ed(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Fh(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Xf($h,$f),$h.prototype[Ch]=!0,$h.prototype.removeEventListener=function(e,t,n,r){Kh(this,e,t,n,r)},$h.prototype.M=function(){if($h.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Rh(n[r]);delete t.g[e],t.h--}}this.I=null},$h.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$h.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var td=Bf.JSON.stringify;function nd(){var e=ld,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var rd,id=function(){"use strict";function t(){e(Y)(this,t),this.h=this.g=null}return e(X)(t,[{key:"add",value:function(e,t){var n=ad.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),ad=new(function(){"use strict";function t(n,r){e(Y)(this,t),this.i=n,this.j=r,this.h=0,this.g=null}return e(X)(t,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),t}())((function(){return new od}),(function(e){return e.reset()})),od=function(){"use strict";function t(){e(Y)(this,t),this.next=this.g=this.h=null}return e(X)(t,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function sd(e){Bf.setTimeout((function(){throw e}),0)}function ud(e,t){rd||function(){var e=Bf.Promise.resolve(void 0);rd=function(){e.then(fd)}}(),cd||(rd(),cd=!0),ld.add(e,t)}var cd=!1,ld=new id;function fd(){for(var e;e=nd();){try{e.h.call(e.g)}catch(e){sd(e)}var t=ad;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}cd=!1}function hd(e,t){$h.call(this),this.h=e||1,this.g=t||Bf,this.j=Jf(this.lb,this),this.l=Date.now()}function dd(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function pd(e,t,n){if("function"==typeof e)n&&(e=Jf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jf(e.handleEvent,e)}return 2147483647<Number(t)?-1:Bf.setTimeout(e,t||0)}function vd(e){e.g=pd((function(){e.g=null,e.i&&(e.i=!1,vd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xf(hd,$h),(Pf=hd.prototype).ca=!1,Pf.R=null,Pf.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Zh(this,"tick"),this.ca&&(dd(this),this.start()))}},Pf.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pf.M=function(){hd.X.M.call(this),dd(this),delete this.g};var yd=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this)).m=t,a.j=i,a.h=null,a.i=!1,a.g=null,a}return e(X)(r,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vd(this)}},{key:"M",value:function(){e(ps)(e(ms)(r.prototype),"M",this).call(this),this.g&&(Bf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),r}($f);function md(e){$f.call(this),this.h=e,this.g={}}Xf(md,$f);var gd=[];function kd(e,t,n,r){Array.isArray(n)||(n&&(gd[0]=n.toString()),n=gd);for(var i=0;i<n.length;i++){var a=qh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wd(e){Dh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gh(e)}),e),e.g={}}function bd(){this.g=!0}function Ed(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return td(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}md.prototype.M=function(){md.X.M.call(this),wd(this)},md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bd.prototype.Aa=function(){this.g=!1},bd.prototype.info=function(){};var Id={},_d=null;function xd(){return _d=_d||new $h}function Td(e){nh.call(this,Id.Pa,e)}function Sd(e){var t=xd();Zh(t,new Td(t))}function Ad(e,t){nh.call(this,Id.STAT_EVENT,e),this.stat=t}function Cd(e){var t=xd();Zh(t,new Ad(t,e))}function Od(e,t){nh.call(this,Id.Qa,e),this.size=t}function Nd(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Bf.setTimeout((function(){e()}),t)}Id.Pa="serverreachability",Xf(Td,nh),Id.STAT_EVENT="statevent",Xf(Ad,nh),Id.Qa="timingevent",Xf(Od,nh);var Rd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dd={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ld(){}function Pd(e){return e.h||(e.h=e.i())}function Md(){}Ld.prototype.h=null;var Ud,Fd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Vd(){nh.call(this,"d")}function jd(){nh.call(this,"c")}function Bd(){}function qd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new md(this),this.O=Hd,e=vh?125:void 0,this.T=new hd(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zd}function zd(){this.i=null,this.g="",this.h=!1}Xf(Vd,nh),Xf(jd,nh),Xf(Bd,Ld),Bd.prototype.g=function(){return new XMLHttpRequest},Bd.prototype.i=function(){return{}},Ud=new Bd;var Hd=45e3,Kd={},Gd={};function Wd(e,t,n){e.K=1,e.v=hp(sp(t)),e.s=n,e.P=!0,Qd(e,null)}function Qd(e,t){e.F=Date.now(),$d(e),e.A=sp(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),xp(n.i,"t",r),e.C=0,n=e.l.H,e.h=new zd,e.g=xv(e.l,n?t:null,!e.s),0<e.N&&(e.L=new yd(Jf(e.La,e,e.g),e.N)),kd(e.S,e.g,"readystatechange",e.ib),t=e.H?Lh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Sd(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Jd(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Yd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xd(e,n))==Gd){4==t&&(e.o=4,Cd(14),i=!1),Ed(e.j,e.m,null,"[Incomplete Response]");break}if(r==Kd){e.o=4,Cd(15),Ed(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ed(e.j,e.m,r,null),rp(e,r)}Jd(e)&&r!=Gd&&r!=Kd&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Cd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),mv(t),t.K=!0,Cd(11))):(Ed(e.j,e.m,n,"[Invalid Chunked Response]"),np(e),tp(e))}function Xd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Gd:(n=Number(t.substring(n,r)),isNaN(n)?Kd:(r+=1)+n>t.length?Gd:(t=t.substr(r,n),e.C=r+n,t))}function $d(e){e.V=Date.now()+e.O,Zd(e,e.O)}function Zd(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Nd(Jf(e.gb,e),t)}function ep(e){e.B&&(Bf.clearTimeout(e.B),e.B=null)}function tp(e){0==e.l.G||e.I||wv(e.l,e)}function np(e){ep(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,dd(e.T),wd(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function rp(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Rp(n.h,e)))if(!e.J&&Rp(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;kv(n),cv(n)}yv(n),Cd(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Nd(Jf(n.cb,n),6e3));if(1>=Np(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Ev(n,11)}else if((e.J||n.g==e)&&kv(n),!ih(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Dp(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,fp(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=_v(r,r.H?r.ka:null,r.V),d.J){Lp(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(ep(p),$d(p)),r.g=d}else vv(r);0<n.i.length&&fv(n)}else"stop"!=a[0]&&"close"!=a[0]||Ev(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ev(n,7):uv(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Sd()}catch(a){}}function ip(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(zf(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(zf(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(zf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Pf=qd.prototype).setTimeout=function(e){this.O=e},Pf.ib=function(e){e=e.target;var t=this.L;t&&3==nv(e)?t.l():this.La(e)},Pf.La=function(e){try{if(e==this.g)e:{var t=nv(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||vh||this.g&&(this.h.h||this.g.fa()||rv(this.g)))){this.I||4!=t||7==n||Sd(),ep(this);var r=this.g.aa();this.Y=r;t:if(Jd(this)){var i=rv(this.g);e="";var a=i.length,o=4==nv(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){np(this),tp(this);var s="";break t}this.h.i=new Bf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ih(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Cd(12),np(this),tp(this);break e}Ed(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rp(this,r)}this.P?(Yd(this,t,s),vh&&this.i&&3==t&&(kd(this.S,this.T,"tick",this.hb),this.T.start())):(Ed(this.j,this.m,s,null),rp(this,s)),4==t&&np(this),this.i&&!this.I&&(4==t?wv(this.l,this):(this.i=!1,$d(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Cd(12)):(this.o=0,Cd(13)),np(this),tp(this)}}}catch(t){}},Pf.hb=function(){if(this.g){var e=nv(this.g),t=this.g.fa();this.C<t.length&&(ep(this),Yd(this,e,t),this.i&&4!=e&&$d(this))}},Pf.cancel=function(){this.I=!0,np(this)},Pf.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Sd(),Cd(17)),np(this),this.o=2,tp(this)):Zd(this,this.V-e)};var ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function op(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof op){this.h=void 0!==t?t:e.h,up(this,e.j),this.s=e.s,this.g=e.g,cp(this,e.m),this.l=e.l,t=e.i;var n=new bp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lp(this,n),this.o=e.o}else e&&(n=String(e).match(ap))?(this.h=!!t,up(this,n[1]||"",!0),this.s=dp(n[2]||""),this.g=dp(n[3]||"",!0),cp(this,n[4]),this.l=dp(n[5]||"",!0),lp(this,n[6]||"",!0),this.o=dp(n[7]||"")):(this.h=!!t,this.i=new bp(null,this.h))}function sp(e){return new op(e)}function up(e,t,n){e.j=n?dp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function cp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function lp(e,t,n){t instanceof bp?(e.i=t,function(e,t){t&&!e.j&&(Ep(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ip(this,t),xp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pp(t,kp)),e.i=new bp(t,e.h))}function fp(e,t,n){e.i.set(t,n)}function hp(e){return fp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pp(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,vp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}op.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pp(t,yp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(pp(t,yp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pp(n,"/"==n.charAt(0)?gp:mp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",pp(n,wp)),e.join("")};var yp=/[#\/\?@]/g,mp=/[#\?:]/g,gp=/[#\?]/g,kp=/[#\?@]/g,wp=/#/g;function bp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ep(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ip(e,t){Ep(e),t=Tp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _p(e,t){return Ep(e),t=Tp(e,t),e.g.has(t)}function xp(e,t,n){Ip(e,t),0<n.length&&(e.i=null,e.g.set(Tp(e,t),eh(n)),e.h+=n.length)}function Tp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Pf=bp.prototype).add=function(e,t){Ep(this),this.i=null,e=Tp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Pf.forEach=function(e,t){Ep(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Pf.oa=function(){Ep(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Pf.W=function(e){Ep(this);var t=[];if("string"==typeof e)_p(this,e)&&(t=t.concat(this.g.get(Tp(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Pf.set=function(e,t){return Ep(this),this.i=null,_p(this,e=Tp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pf.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Pf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Sp=function t(n,r){"use strict";e(Y)(this,t),this.h=n,this.g=r};function Ap(e){this.l=e||Cp,Bf.PerformanceNavigationTiming?e=0<(e=Bf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Bf.g&&Bf.g.Ga&&Bf.g.Ga()&&Bf.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cp=10;function Op(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Np(e){return e.h?1:e.g?e.g.size:0}function Rp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Dp(e,t){e.g?e.g.add(t):e.h=t}function Lp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Pp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t=e.i,n=!0,r=!1,i=void 0;try{for(var a,o=e.g.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t.concat(s.D)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}return eh(e.i)}function Mp(){}function Up(){this.g=new Mp}function Fp(e,t,n){var r=n||"";try{ip(e,(function(e,n){var i=e;Hf(e)&&(i=td(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Vp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function jp(e){this.l=e.ac||null,this.j=e.jb||!1}function Bp(e,t){$h.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=qp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ap.prototype.cancel=function(){if(this.i=Pp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e=!0,t=!1,n=void 0;try{for(var r,i=this.g.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cancel()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.g.clear()}},Mp.prototype.stringify=function(e){return Bf.JSON.stringify(e,void 0)},Mp.prototype.parse=function(e){return Bf.JSON.parse(e,void 0)},Xf(jp,Ld),jp.prototype.g=function(){return new Bp(this.l,this.j)},jp.prototype.i=function(e){return function(){return e}}({}),Xf(Bp,$h);var qp=0;function zp(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Hp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Kp(e)}function Kp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pf=Bp.prototype).open=function(e,t){if(this.readyState!=qp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Kp(this)},Pf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Bf).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Pf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hp(this)),this.readyState=qp},Pf.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kp(this)),this.g&&(this.readyState=3,Kp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Bf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zp(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Pf.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hp(this):Kp(this),3==this.readyState&&zp(this)}},Pf.Va=function(e){this.g&&(this.response=this.responseText=e,Hp(this))},Pf.Ua=function(e){this.g&&(this.response=e,Hp(this))},Pf.ga=function(){this.g&&Hp(this)},Pf.setRequestHeader=function(e,t){this.v.append(e,t)},Pf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Gp=Bf.JSON.parse;function Wp(e){$h.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Qp,this.K=this.L=!1}Xf(Wp,$h);var Qp="",Jp=/^https?$/i,Yp=["POST","PUT"];function Xp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$p(e),ev(e)}function $p(e){e.D||(e.D=!0,Zh(e,"complete"),Zh(e,"error"))}function Zp(e){if(e.h&&void 0!==jf&&(!e.C[1]||4!=nv(e)||2!=e.aa()))if(e.v&&4==nv(e))pd(e.Ha,0,e);else if(Zh(e,"readystatechange"),4==nv(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ap)[1]||null;if(!a&&Bf.self&&Bf.self.location){var o=Bf.self.location.protocol;a=o.substr(0,o.length-1)}i=!Jp.test(a?a.toLowerCase():"")}t=i}if(t)Zh(e,"complete"),Zh(e,"success");else{e.m=6;try{var s=2<nv(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.aa()+"]",$p(e)}}finally{ev(e)}}}function ev(e,t){if(e.g){tv(e);var n=e.g,r=e.C[0]?qf:null;e.g=null,e.C=null,t||Zh(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function tv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Bf.clearTimeout(e.A),e.A=null)}function nv(e){return e.g?e.g.readyState:0}function rv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Qp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function iv(e){var t="";return Dh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function av(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iv(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):fp(e,t,n))}function ov(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sv(e){this.Ca=0,this.i=[],this.j=new bd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ov("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ov("baseRetryDelayMs",5e3,e),this.bb=ov("retryDelaySeedMs",1e4,e),this.$a=ov("forwardChannelMaxRetries",2,e),this.ta=ov("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Ap(e&&e.concurrentRequestLimit),this.Fa=new Up,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function uv(e){if(lv(e),3==e.G){var t=e.U++,n=sp(e.F);fp(n,"SID",e.I),fp(n,"RID",t),fp(n,"TYPE","terminate"),dv(e,n),(t=new qd(e,e.j,t,void 0)).K=2,t.v=hp(sp(n)),n=!1,Bf.navigator&&Bf.navigator.sendBeacon&&(n=Bf.navigator.sendBeacon(t.v.toString(),"")),!n&&Bf.Image&&((new Image).src=t.v,n=!0),n||(t.g=xv(t.l,null),t.g.da(t.v)),t.F=Date.now(),$d(t)}Iv(e)}function cv(e){e.g&&(mv(e),e.g.cancel(),e.g=null)}function lv(e){cv(e),e.u&&(Bf.clearTimeout(e.u),e.u=null),kv(e),e.h.cancel(),e.m&&("number"==typeof e.m&&Bf.clearTimeout(e.m),e.m=null)}function fv(e){Op(e.h)||e.m||(e.m=!0,ud(e.Ja,e),e.C=0)}function hv(e,t){var n;n=t?t.m:e.U++;var r=sp(e.F);fp(r,"SID",e.I),fp(r,"RID",n),fp(r,"AID",e.T),dv(e,r),e.o&&e.s&&av(r,e.o,e.s),n=new qd(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=pv(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Dp(e.h,n),Wd(n,r,t)}function dv(e,t){e.ia&&Dh(e.ia,(function(e,n){fp(t,n,e)})),e.l&&ip({},(function(e,n){fp(t,n,e)}))}function pv(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Jf(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Fp(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function vv(e){e.g||e.u||(e.Z=1,ud(e.Ia,e),e.A=0)}function yv(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Nd(Jf(e.Ia,e),bv(e,e.A)),e.A++,!0)}function mv(e){null!=e.B&&(Bf.clearTimeout(e.B),e.B=null)}function gv(e){e.g=new qd(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=sp(e.sa);fp(t,"RID","rpc"),fp(t,"SID",e.I),fp(t,"CI",e.L?"0":"1"),fp(t,"AID",e.T),fp(t,"TYPE","xmlhttp"),dv(e,t),e.o&&e.s&&av(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=hp(sp(t)),n.s=null,n.P=!0,Qd(n,e)}function kv(e){null!=e.v&&(Bf.clearTimeout(e.v),e.v=null)}function wv(e,t){var n=null;if(e.g==t){kv(e),mv(e),e.g=null;var r=2}else{if(!Rp(e.h,t))return;n=t.D,Lp(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Zh(r=xd(),new Od(r,n)),fv(e)}else vv(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Np(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=Nd(Jf(e.Ja,e,t),bv(e,e.C)),e.C++,0)))}(e,t)||2==r&&yv(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Ev(e,5);break;case 4:Ev(e,10);break;case 3:Ev(e,6);break;default:Ev(e,2)}}function bv(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Ev(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Jf(e.kb,e);n||(n=new op("//www.google.com/images/cleardot.gif"),Bf.location&&"http"==Bf.location.protocol||up(n,"https"),hp(n)),function(e,t){var n=new bd;if(Bf.Image){var r=new Image;r.onload=Yf(Vp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Yf(Vp,n,r,"TestLoadImage: error",!1,t),r.onabort=Yf(Vp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Yf(Vp,n,r,"TestLoadImage: timeout",!1,t),Bf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cd(2);e.G=0,e.l&&e.l.va(t),Iv(e),lv(e)}function Iv(e){if(e.G=0,e.la=[],e.l){var t=Pp(e.h);0==t.length&&0==e.i.length||(th(e.la,t),th(e.la,e.i),e.h.i.length=0,eh(e.i),e.i.length=0),e.l.ua()}}function _v(e,t,n){var r=n instanceof op?sp(n):new op(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),cp(r,r.m);else{var i=Bf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new op(null,void 0);r&&up(a,r),t&&(a.g=t),i&&cp(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&fp(r,n,t),fp(r,"VER",e.ma),dv(e,r),r}function xv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Wp(new jp({jb:!0})):new Wp(e.ra)).Ka(e.H),t}function Tv(){}function Sv(){if(dh&&!(10<=Number(Th)))throw Error("Environmental error: no available transport.")}function Av(e,t){$h.call(this),this.g=new sv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!ih(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ih(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nv(this)}function Cv(e){Vd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ov(){jd.call(this),this.status=1}function Nv(e){this.g=e}(Pf=Wp.prototype).Ka=function(e){this.L=e},Pf.da=function(t,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);n=n?n.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ud.g(),this.C=this.u?Pd(this.u):Pd(Ud),this.g.onreadystatechange=Jf(this.Ha,this);try{this.F=!0,this.g.open(n,String(t),!0),this.F=!1}catch(e){return void Xp(this,e)}if(t=r||"",r=new Map(this.headers),i){var a=!0,o=!1,s=void 0;if(Object.getPrototypeOf(i)===Object.prototype)for(var u in i)r.set(u,i[u]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));try{for(var c,l=i.keys()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;r.set(f,i.get(f))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}}i=Array.from(r.keys()).find((function(e){return"content-type"==e.toLowerCase()})),u=Bf.FormData&&t instanceof Bf.FormData,!(0<=Zf(Yp,n))||i||u||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=e(Bt)(v.value,2),g=m[0],k=m[1];this.g.setRequestHeader(g,k)}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tv(this),0<this.B&&((this.K=function(e){return dh&&_h()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jf(this.qa,this)):this.A=pd(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(e){Xp(this,e)}},Pf.qa=function(){void 0!==jf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zh(this,"timeout"),this.abort(8))},Pf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Zh(this,"complete"),Zh(this,"abort"),ev(this))},Pf.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ev(this,!0)),Wp.X.M.call(this)},Pf.Ha=function(){this.s||(this.F||this.v||this.l?Zp(this):this.fb())},Pf.fb=function(){Zp(this)},Pf.aa=function(){try{return 2<nv(this)?this.g.status:-1}catch(e){return-1}},Pf.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Pf.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Gp(t)}},Pf.Ea=function(){return this.m},Pf.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Pf=sv.prototype).ma=8,Pf.G=1,Pf.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new qd(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Mh(n=Lh(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=pv(this,t,r),fp(i=sp(this.F),"RID",e),fp(i,"CVER",22),this.D&&fp(i,"X-HTTP-Session-Id",this.D),dv(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(iv(n)))+"&"+r:this.o&&av(i,this.o,n)),Dp(this.h,t),this.Ya&&fp(i,"TYPE","init"),this.O?(fp(i,"$req",r),fp(i,"SID","null"),t.Z=!0,Wd(t,i,null)):Wd(t,i,r),this.G=2}}else 3==this.G&&(e?hv(this,e):0==this.i.length||Op(this.h)||hv(this))},Pf.Ia=function(){if(this.u=null,gv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Nd(Jf(this.eb,this),e)}},Pf.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Cd(10),cv(this),gv(this))},Pf.cb=function(){null!=this.v&&(this.v=null,cv(this),yv(this),Cd(19))},Pf.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Cd(2)):(this.j.info("Failed to ping google.com"),Cd(1))},(Pf=Tv.prototype).xa=function(){},Pf.wa=function(){},Pf.va=function(){},Pf.ua=function(){},Pf.Ra=function(){},Sv.prototype.g=function(e,t){return new Av(e,t)},Xf(Av,$h),Av.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Cd(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=_v(e,null,e.V),fv(e)},Av.prototype.close=function(){uv(this.g)},Av.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=td(e),e=n);t.i.push(new Sp(t.ab++,e)),3==t.G&&fv(t)},Av.prototype.M=function(){this.g.l=null,delete this.j,uv(this.g),delete this.g,Av.X.M.call(this)},Xf(Cv,Vd),Xf(Ov,jd),Xf(Nv,Tv),Nv.prototype.xa=function(){Zh(this.g,"a")},Nv.prototype.wa=function(e){Zh(this.g,new Cv(e))},Nv.prototype.va=function(e){Zh(this.g,new Ov)},Nv.prototype.ua=function(){Zh(this.g,"b")},Sv.prototype.createWebChannel=Sv.prototype.g,Av.prototype.send=Av.prototype.u,Av.prototype.open=Av.prototype.m,Av.prototype.close=Av.prototype.close,Rd.NO_ERROR=0,Rd.TIMEOUT=8,Rd.HTTP_ERROR=6,Dd.COMPLETE="complete",Md.EventType=Fd,Fd.OPEN="a",Fd.CLOSE="b",Fd.ERROR="c",Fd.MESSAGE="d",$h.prototype.listen=$h.prototype.N,Wp.prototype.listenOnce=Wp.prototype.O,Wp.prototype.getLastError=Wp.prototype.Oa,Wp.prototype.getLastErrorCode=Wp.prototype.Ea,Wp.prototype.getStatus=Wp.prototype.aa,Wp.prototype.getResponseJson=Wp.prototype.Sa,Wp.prototype.getResponseText=Wp.prototype.fa,Wp.prototype.send=Wp.prototype.da,Wp.prototype.setWithCredentials=Wp.prototype.Ka;var Rv=Vf.createWebChannelTransport=function(){return new Sv},Dv=Vf.getStatEventTarget=function(){return xd()},Lv=Vf.ErrorCode=Rd,Pv=Vf.EventType=Dd,Mv=Vf.Event=Id,Uv=Vf.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fv=Vf.FetchXmlHttpFactory=jp,Vv=Vf.WebChannel=Md,jv=Vf.XhrIo=Wp,Bv="@firebase/firestore",qv=function(){"use strict";function t(n){e(Y)(this,t),this.uid=n}return e(X)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),t}();qv.UNAUTHENTICATED=new qv(null),qv.GOOGLE_CREDENTIALS=new qv("google-credentials-uid"),qv.FIRST_PARTY=new qv("first-party-uid"),qv.MOCK_USER=new qv("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zv="9.19.0",Hv=new ni("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return Hv.logLevel}function Gv(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Hv.logLevel<=Wr.DEBUG){var a,o=r.map(Jv);(a=Hv).debug.apply(a,["Firestore (".concat(zv,"): ").concat(t)].concat(e(Wt)(o)))}}function Wv(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Hv.logLevel<=Wr.ERROR){var a,o=r.map(Jv);(a=Hv).error.apply(a,["Firestore (".concat(zv,"): ").concat(t)].concat(e(Wt)(o)))}}function Qv(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Hv.logLevel<=Wr.WARN){var a,o=r.map(Jv);(a=Hv).warn.apply(a,["Firestore (".concat(zv,"): ").concat(t)].concat(e(Wt)(o)))}}function Jv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(zv,") INTERNAL ASSERTION FAILED: ")+e;throw Wv(t),new Error(t)}function Xv(e,t){e||Yv()}function $v(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ey=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this,t,i)).code=t,a.message=i,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},e(Uf)(a)}return r}(Cr),ty=function t(){"use strict";var n=this;e(Y)(this,t),this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))},ny=function t(n,r){"use strict";e(Y)(this,t),this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(n))},ry=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(qv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),iy=function(){"use strict";function t(n){e(Y)(this,t),this.token=n,this.changeListener=null}return e(X)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),ay=function(){"use strict";function t(n){e(Y)(this,t),this.t=n,this.currentUser=qv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return e(X)(t,[{key:"start",value:function(t,n){var r=this,i=this.i,a=function(e){return r.i!==i?(i=r.i,n(e)):Promise.resolve()},o=new ty;this.o=function(){var e=r;r.i++,r.currentUser=r.u(),o.resolve(),o=new ty,t.enqueueRetryable((function(){return a(e.currentUser)}))};var s=function(){var n=o,i=r;t.enqueueRetryable(e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.promise;case 2:return e.next=4,a(i.currentUser);case 4:case"end":return e.stop()}}),t)}))))},u=function(e){Gv("FirebaseAuthCredentialsProvider","Auth detected"),r.auth=e,r.auth.addAuthTokenListener(r.o),s()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!r.auth){var e=r.t.getImmediate({optional:!0});e?u(e):(Gv("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ty)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Gv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Xv("string"==typeof n.accessToken),new ny(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Xv(null===e||"string"==typeof e),new qv(e)}}]),t}(),oy=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.h=n,this.l=r,this.m=i,this.type="FirstParty",this.user=qv.FIRST_PARTY,this.g=new Map}return e(X)(t,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),t}(),sy=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.h=n,this.l=r,this.m=i}return e(X)(t,[{key:"getToken",value:function(){return Promise.resolve(new oy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(qv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),uy=function t(n){"use strict";e(Y)(this,t),this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)},cy=function(){"use strict";function t(n){e(Y)(this,t),this.I=n,this.forceRefresh=!1,this.appCheck=null,this.T=null}return e(X)(t,[{key:"start",value:function(e,t){var n=this;this.o=function(r){e.enqueueRetryable((function(){return function(e){null!=e.error&&Gv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Gv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()}(r)}))};var r=function(e){Gv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?r(e):Gv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Xv("string"==typeof t.token),e.T=t.token,new uy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ly(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fy=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ly(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),t}();function hy(e,t){return e<t?-1:e>t?1:0}function dy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var py=function(){"use strict";function t(n,r){if(e(Y)(this,t),this.seconds=n,this.nanoseconds=r,r<0)throw new ey(Zv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ey(Zv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new ey(Zv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new ey(Zv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return e(X)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?hy(this.nanoseconds,e.nanoseconds):hy(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),vy=function(){"use strict";function t(n){e(Y)(this,t),this.timestamp=n}return e(X)(t,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new py(0,0))}},{key:"max",value:function(){return new t(new py(253402300799,999999999))}}]),t}(),yy=function(){"use strict";function t(n,r,i){e(Y)(this,t),void 0===r?r=0:r>n.length&&Yv(),void 0===i?i=n.length-r:i>n.length-r&&Yv(),this.segments=n,this.offset=r,this.len=i}return e(X)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(e){n.push(e)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),t}(),my=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.apply(this,arguments)}return e(X)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=[],o=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f,h=c.value;if(h.indexOf("//")>=0)throw new ey(Zv.INVALID_ARGUMENT,"Invalid segment (".concat(h,"). Paths must not contain // in them."));(f=a).push.apply(f,e(Wt)(h.split("/").filter((function(e){return e.length>0}))))}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return new r(a)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(yy),gy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ky=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.apply(this,arguments)}return e(X)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return gy.test(e)}},{key:"keyField",value:function(){return new r(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],n="",i=0,a=function(){if(0===n.length)throw new ey(Zv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new ey(Zv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ey(Zv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(n+=s,i++):(a(),i++)}if(a(),o)throw new ey(Zv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(t)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(yy),wy=function(){"use strict";function t(n){e(Y)(this,t),this.path=n}return e(X)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===my.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(my.fromString(e))}},{key:"fromName",value:function(e){return new t(my.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(my.emptyPath())}},{key:"comparator",value:function(e,t){return my.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(e){return new t(new my(e.slice()))}}]),t}(),by=function t(n,r,i,a){"use strict";e(Y)(this,t),this.indexId=n,this.collectionGroup=r,this.fields=i,this.indexState=a};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */by.UNKNOWN_ID=-1;function Ey(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vy.fromTimestamp(1e9===r?new py(n+1,0):new py(n,r));return new _y(i,wy.empty(),t)}function Iy(e){return new _y(e.readTime,e.key,-1)}var _y=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.readTime=n,this.documentKey=r,this.largestBatchId=i}return e(X)(t,null,[{key:"min",value:function(){return new t(vy.min(),wy.empty(),-1)}},{key:"max",value:function(){return new t(vy.max(),wy.empty(),-1)}}]),t}();function xy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=wy.comparator(e.documentKey,t.documentKey))?n:hy(e.largestBatchId,t.largestBatchId)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ty="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sy=function(){"use strict";function t(){e(Y)(this,t),this.onCommittedListeners=[]}return e(X)(t,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),t}();function Ay(e){return Cy.apply(this,arguments)}function Cy(){return(Cy=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code===Zv.FAILED_PRECONDITION&&n.message===Ty){e.next=2;break}throw n;case 2:Gv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oy=function(){"use strict";function t(n){var r=this;e(Y)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n((function(e){r.isDone=!0,r.result=e,r.nextCallback&&r.nextCallback(e)}),(function(e){r.isDone=!0,r.error=e,r.catchCallback&&r.catchCallback(e)}))}return e(X)(t,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(e,n){var r=this;return this.callbackAttached&&Yv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){var a=r;r.nextCallback=function(n){a.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){a.wrapFailure(n,e).next(t,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var r=0,i=0,a=!1;e.forEach((function(e){++r,e.next((function(){++i,a&&i===r&&t()}),(function(e){return n(e)}))})),a=!0,i===r&&t()}))}},{key:"or",value:function(e){var n=t.resolve(!1),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,r){var i=r.value;n=n.next((function(e){return e?t.resolve(e):i()}))},u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(e,n){return new t((function(t,r){for(var i=function(i){var u=i;n(e[u]).next((function(e){o[u]=e,++s===a&&t(o)}),(function(e){return r(e)}))},a=e.length,o=new Array(a),s=0,u=0;u<a;u++)i(u)}))}},{key:"doWhile",value:function(e,n){return new t((function(t,r){var i=function(){!0===e()?n().next((function(){i()}),r):t()};i()}))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(e){return"IndexedDbTransactionError"===e.name}var Ry=function(){"use strict";function t(n,r){var i=this;e(Y)(this,t),this.previousValue=n,r&&(r.sequenceNumberHandler=function(e){return i.ot(e)},this.ut=function(e){return r.writeSequenceNumber(e)})}return e(X)(t,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),t}();function Dy(e){return null==e}function Ly(e){return 0===e&&1/e==-1/0}function Py(e){return"number"==typeof e&&Number.isInteger(e)&&!Ly(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ry.ct=-1;var My=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Uy=(e(Wt)(My).concat(["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Fy=Uy;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e(Wt)(Fy).concat(["indexConfiguration","indexState","indexEntries"]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function By(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qy=function(){"use strict";function t(n,r){e(Y)(this,t),this.comparator=n,this.root=r||Hy.EMPTY}return e(X)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hy.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new zy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new zy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new zy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new zy(this.root,e,this.comparator,!0)}}]),t}(),zy=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this.isReverse=a,this.nodeStack=[];for(var o=1;!n.isEmpty();)if(o=r?i(n.key,r):1,r&&a&&(o*=-1),o<0)n=this.isReverse?n.left:n.right;else{if(0===o){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}return e(X)(t,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),t}(),Hy=function(){"use strict";function t(n,r,i,a,o){e(Y)(this,t),this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=a?a:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return e(X)(t,[{key:"copy",value:function(e,n,r,i,a){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Yv();if(this.right.isRed())throw Yv();var e=this.left.check();if(e!==this.right.check())throw Yv();return e+(this.isRed()?0:1)}}]),t}();Hy.EMPTY=null,Hy.RED=!0,Hy.BLACK=!1,Hy.EMPTY=new(function(){"use strict";function t(){e(Y)(this,t),this.size=0}return e(X)(t,[{key:"key",get:function(){throw Yv()}},{key:"value",get:function(){throw Yv()}},{key:"color",get:function(){throw Yv()}},{key:"left",get:function(){throw Yv()}},{key:"right",get:function(){throw Yv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Hy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ky=function(){"use strict";function t(n){e(Y)(this,t),this.comparator=n,this.data=new qy(this.comparator)}return e(X)(t,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Gy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Gy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),Gy=function(){"use strict";function t(n){e(Y)(this,t),this.iter=n}return e(X)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wy=function(){"use strict";function t(n){e(Y)(this,t),this.fields=n,n.sort(ky.comparator)}return e(X)(t,[{key:"unionWith",value:function(e){var n=new Ky(ky.comparator),r=!0,i=!1,a=void 0;try{for(var o,s=this.fields[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n=n.add(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=!0,l=!1,f=void 0;try{for(var h,d=e[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;n=n.add(p)}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return new t(n.toArray())}},{key:"covers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.fields[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.isPrefixOf(e))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"isEqual",value:function(e){return dy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new t([])}}]),t}(),Qy=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){var t;return e(Y)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="Base64DecodeError",e(Uf)(t)}return r}(e(zn)(Error));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jy=Symbol.iterator,Yy=function(){"use strict";function t(n){e(Y)(this,t),this.binaryString=n}return e(X)(t,[{key:Jy,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){var e;return e=this.binaryString,btoa(e)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return hy(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qy("Invalid base64 string: "+e):e}}(e))}},{key:"fromUint8Array",value:function(e){return new t(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yy.EMPTY_BYTE_STRING=new Yy("");var Xy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $y(e){if(Xv(!!e),"string"==typeof e){var t=0,n=Xy.exec(e);if(Xv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zy(e.seconds),nanos:Zy(e.nanos)}}function Zy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function em(e){return"string"==typeof e?Yy.fromBase64String(e):Yy.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nm(e){var t=e.mapValue.fields.__previous_value__;return tm(t)?nm(t):t}function rm(e){var t=$y(e.mapValue.fields.__local_write_time__.timestampValue);return new py(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var im=function t(n,r,i,a,o,s,u,c){"use strict";e(Y)(this,t),this.databaseId=n,this.appId=r,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.useFetchStreams=c},am=function(){"use strict";function t(n,r){e(Y)(this,t),this.projectId=n,this.database=r||"(default)"}return e(X)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}(),om={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tm(e)?4:wm(e)?9007199254740991:10:Yv()}function um(e,t){if(e===t)return!0;var n,r=sm(e);if(r!==sm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rm(e).isEqual(rm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$y(e.timestampValue),r=$y(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,em(e.bytesValue).isEqual(em(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zy(e.geoPointValue.latitude)===Zy(t.geoPointValue.latitude)&&Zy(e.geoPointValue.longitude)===Zy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zy(e.integerValue)===Zy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Zy(e.doubleValue),r=Zy(t.doubleValue);return n===r?Ly(n)===Ly(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dy(e.arrayValue.values||[],t.arrayValue.values||[],um);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Vy(n)!==Vy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!um(n[i],r[i])))return!1;return!0}(e,t);default:return Yv()}}function cm(e,t){return void 0!==(e.values||[]).find((function(e){return um(e,t)}))}function lm(e,t){if(e===t)return 0;var n,r,i,a,o=sm(e),s=sm(t);if(o!==s)return hy(o,s);switch(o){case 0:case 9007199254740991:return 0;case 1:return hy(e.booleanValue,t.booleanValue);case 2:return r=t,i=Zy((n=e).integerValue||n.doubleValue),a=Zy(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return fm(e.timestampValue,t.timestampValue);case 4:return fm(rm(e),rm(t));case 5:return hy(e.stringValue,t.stringValue);case 6:return function(e,t){var n=em(e),r=em(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=hy(n[i],r[i]);if(0!==a)return a}return hy(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=hy(Zy(e.latitude),Zy(t.latitude));return 0!==n?n:hy(Zy(e.longitude),Zy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=lm(n[i],r[i]);if(a)return a}return hy(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===om.mapValue&&t===om.mapValue)return 0;if(e===om.mapValue)return 1;if(t===om.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=hy(r[o],a[o]);if(0!==s)return s;var u=lm(n[r[o]],i[a[o]]);if(0!==u)return u}return hy(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Yv()}}function fm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return hy(e,t);var n=$y(e),r=$y(t),i=hy(n.seconds,r.seconds);return 0!==i?i:hy(n.nanos,r.nanos)}function hm(e){return dm(e)}function dm(e){var t,n,r,i;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=e.timestampValue,i=$y(r),"time(".concat(i.seconds,",").concat(i.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?em(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,wy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t="[",n=!0,r=!0,i=!1,a=void 0;try{for(var o,s=(e.values||[])[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n?n=!1:t+=",",t+=dm(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t+"]"}(e.arrayValue):"mapValue"in e?function(e){var t=Object.keys(e.fields||{}).sort(),n="{",r=!0,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r?r=!1:n+=",",n+="".concat(c,":").concat(dm(e.fields[c]))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n+"}"}(e.mapValue):Yv()}function pm(e){return!!e&&"integerValue"in e}function vm(e){return!!e&&"arrayValue"in e}function ym(e){return!!e&&"nullValue"in e}function mm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gm(e){return!!e&&"mapValue"in e}function km(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return jy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=km(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=km(e.arrayValue.values[r]);return n}return Object.assign({},e)}function wm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bm=function(){"use strict";function t(n){e(Y)(this,t),this.value=n}return e(X)(t,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!gm(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=km(t)}},{key:"setAll",value:function(e){var t=this,n=ky.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=km(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());gm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return um(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];gm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){jy(t,(function(t,n){return e[t]=n}));var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;delete e[u]}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"clone",value:function(){return new t(km(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function Em(e){var t=[];return jy(e.fields,(function(e,n){var r=new ky([e]);if(gm(n)){var i=Em(n.mapValue).fields,a=!0,o=!1,s=void 0;if(0===i.length)t.push(r);else try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t.push(r.child(l))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}else t.push(r)})),new Wy(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Im=function(){"use strict";function t(n,r,i,a,o,s,u){e(Y)(this,t),this.key=n,this.documentType=r,this.version=i,this.readTime=a,this.createTime=o,this.data=s,this.documentState=u}return e(X)(t,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(vy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bm.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bm.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=vy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,vy.min(),vy.min(),vy.min(),bm.empty(),0)}},{key:"newFoundDocument",value:function(e,n,r,i){return new t(e,1,n,vy.min(),r,i,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,vy.min(),vy.min(),bm.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,vy.min(),vy.min(),bm.empty(),2)}}]),t}(),_m=function t(n,r){"use strict";e(Y)(this,t),this.position=n,this.inclusive=r};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?wy.comparator(wy.fromName(o.referenceValue),n.key):lm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Tm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!um(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sm=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";e(Y)(this,t),this.field=n,this.dir=r};function Am(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cm=function t(){"use strict";e(Y)(this,t)},Om=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o;return e(Y)(this,r),(o=n.call(this)).field=t,o.op=i,o.value=a,e(Uf)(o)}return e(X)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lm(t,this.value)):null!==t&&sm(this.value)===sm(t)&&this.matchesComparison(lm(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fm(e,t,n):"array-contains"===t?new qm(e,n):"in"===t?new zm(e,n):"not-in"===t?new Hm(e,n):"array-contains-any"===t?new Km(e,n):new r(e,t,n)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Vm(e,n):new jm(e,n)}}]),r}(Cm),Nm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this)).filters=t,a.op=i,a.ht=null,e(Uf)(a)}return e(X)(r,[{key:"matches",value:function(e){return Rm(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getFlattenedFilters()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e(o))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}],[{key:"create",value:function(e,t){return new r(e,t)}}]),r}(Cm);function Rm(e){return"and"===e.op}function Dm(e){return Lm(e)&&Rm(e)}function Lm(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value instanceof Nm)return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}function Pm(e){if(e instanceof Om)return e.field.canonicalString()+e.op.toString()+hm(e.value);if(Dm(e))return e.filters.map((function(e){return Pm(e)})).join(",");var t=e.filters.map((function(e){return Pm(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Mm(e,t){return e instanceof Om?(n=e,(r=t)instanceof Om&&n.op===r.op&&n.field.isEqual(r.field)&&um(n.value,r.value)):e instanceof Nm?function(e,t){return t instanceof Nm&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Mm(n,t.filters[r])}),!0)}(e,t):void Yv();var n,r}function Um(e){return e instanceof Om?"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(hm(t.value)):e instanceof Nm?function(e){return e.op.toString()+" {"+e.getFilters().map(Um).join(" ,")+"}"}(e):"Filter";var t}var Fm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o;return e(Y)(this,r),(o=n.call(this,t,i,a)).key=wy.fromName(a.referenceValue),e(Uf)(o)}return e(X)(r,[{key:"matches",value:function(e){var t=wy.comparator(e.key,this.key);return this.matchesComparison(t)}}]),r}(Om),Vm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this,t,"in",i)).keys=Bm("in",i),e(Uf)(a)}return e(X)(r,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(Om),jm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this,t,"not-in",i)).keys=Bm("not-in",i),e(Uf)(a)}return e(X)(r,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(Om);function Bm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return wy.fromName(e.referenceValue)}))}var qm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){return e(Y)(this,r),n.call(this,t,"array-contains",i)}return e(X)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return vm(t)&&cm(t.arrayValue,this.value)}}]),r}(Om),zm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){return e(Y)(this,r),n.call(this,t,"in",i)}return e(X)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cm(this.value.arrayValue,t)}}]),r}(Om),Hm=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){return e(Y)(this,r),n.call(this,t,"not-in",i)}return e(X)(r,[{key:"matches",value:function(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cm(this.value.arrayValue,t)}}]),r}(Om),Km=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){return e(Y)(this,r),n.call(this,t,"array-contains-any",i)}return e(X)(r,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cm(t.value.arrayValue,e)}))}}]),r}(Om),Gm=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;e(Y)(this,t),this.path=n,this.collectionGroup=r,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=s,this.endAt=u,this.ft=null};function Wm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Gm(e,t,n,r,i,a,o)}function Qm(e){var t=$v(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Pm(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),Dy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hm(e)})).join(",")),t.ft=n}return t.ft}function Jm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Am(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Mm(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tm(e.startAt,t.startAt)&&Tm(e.endAt,t.endAt)}function Ym(e){return wy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xm=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e(Y)(this,t),this.path=n,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.dt=null,this.wt=null,this.startAt,this.endAt};function $m(e,t,n,r,i,a,o,s){return new Xm(e,t,n,r,i,a,o,s)}function Zm(e){return new Xm(e)}function eg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ng(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value.getFirstInequalityField();if(null!==o)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}function rg(e){return null!==e.collectionGroup}function ig(e){var t=$v(e);if(null===t.dt){t.dt=[];var n=ng(t),r=tg(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Sm(n)),t.dt.push(new Sm(ky.keyField(),"asc"));else{var i=!1,a=!0,o=!1,s=void 0;try{for(var u,c=t.explicitOrderBy[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t.dt.push(l),l.field.isKeyField()&&(i=!0)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(!i){var f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Sm(ky.keyField(),f))}}}return t.dt}function ag(e){var t=$v(e);if(!t.wt)if("F"===t.limitType)t.wt=Wm(t.path,t.collectionGroup,ig(t),t.filters,t.limit,t.startAt,t.endAt);else{var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=ig(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c="desc"===u.dir?"asc":"desc";n.push(new Sm(u.field,c))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var l=t.endAt?new _m(t.endAt.position,t.endAt.inclusive):null,f=t.startAt?new _m(t.startAt.position,t.startAt.inclusive):null;t.wt=Wm(t.path,t.collectionGroup,n,t.filters,t.limit,l,f)}return t.wt}function og(e,t,n){return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sg(e,t){return Jm(ag(e),ag(t))&&e.limitType===t.limitType}function ug(e){return"".concat(Qm(ag(e)),"|lt:").concat(e.limitType)}function cg(e){return"Query(target=".concat((t=ag(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: [".concat(t.filters.map((function(e){return Um(e)})).join(", "),"]")),Dy(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: [".concat(t.orderBy.map((function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t})).join(", "),"]")),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hm(e)})).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hm(e)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(e.limitType,")");var t,n}function lg(e,t){return t.isFoundDocument()&&(i=e,o=(a=t).key.path,null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):wy.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o))&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=ig(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!s.field.isKeyField()&&null===t.data.field(s.field))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.filters[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(!a.value.matches(t))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){var r=xm(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,ig(n),r)||n.endAt&&!function(e,t,n){var r=xm(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,ig(n),r)));var n,r,i,a,o}function fg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hg(e){return function(t,n){var r=!1,i=!0,a=!1,o=void 0;try{for(var s,u=ig(e)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=dg(c,t,n);if(0!==l)return l;r=r||c.field.isKeyField()}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return 0}}function dg(e,t,n){var r,i,a,o,s=e.field.isKeyField()?wy.comparator(t.key,n.key):(r=e.field,i=n,a=t.data.field(r),o=i.data.field(r),null!==a&&null!==o?lm(a,o):Yv());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Yv()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pg=function(){"use strict";function t(n,r){e(Y)(this,t),this.mapKeyFn=n,this.equalsFn=r,this.inner={},this.innerSize=0}return e(X)(t,[{key:"get",value:function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=e(Bt)(s.value,2),l=c[0],f=c[1];if(this.equalsFn(l,t))return f}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(t){jy(this.inner,(function(n,r){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=e(Bt)(s.value,2),l=c[0],f=c[1];t(l,f)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}))}},{key:"isEmpty",value:function(){return By(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),vg=new qy(wy.comparator);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){return vg}var mg=new qy(wy.comparator);function gg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=mg,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.insert(c.key,c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function kg(e){var t=mg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function wg(){return Eg()}function bg(){return Eg()}function Eg(){return new pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ig=new qy(wy.comparator),_g=new Ky(wy.comparator);function xg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=_g,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.add(c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}var Tg=new Ky(hy);function Sg(){return Tg}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ly(t)?"-0":t}}function Cg(e){return{integerValue:""+e}}function Og(e,t){return Py(t)?Cg(t):Ag(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ng=function t(){"use strict";e(Y)(this,t),this._=void 0};function Rg(e,t,n){return e instanceof Pg?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof Mg?Ug(e,t):e instanceof Fg?Vg(e,t):function(e,t){var n=Lg(e,t),r=Bg(n)+Bg(e._t);return pm(n)&&pm(e._t)?Cg(r):Ag(e.serializer,r)}(e,t);var r,i,a}function Dg(e,t,n){return e instanceof Mg?Ug(e,t):e instanceof Fg?Vg(e,t):n}function Lg(e,t){var n,r;return e instanceof jg?pm(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null}var Pg=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.apply(this,arguments)}return r}(Ng),Mg=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this)).elements=t,e(Uf)(i)}return r}(Ng);function Ug(e,t){var n=qg(t),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,t){var r=t.value;n.some((function(e){return um(e,r)}))||n.push(r)},u=e.elements[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var Fg=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this)).elements=t,e(Uf)(i)}return r}(Ng);function Vg(e,t){var n=qg(t),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,t){var r=t.value;n=n.filter((function(e){return!um(e,r)}))},u=e.elements[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var jg=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this)).serializer=t,a._t=i,e(Uf)(a)}return r}(Ng);function Bg(e){return Zy(e.integerValue||e.doubleValue)}function qg(e){return vm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zg=function t(n,r){"use strict";e(Y)(this,t),this.field=n,this.transform=r};var Hg=function t(n,r){"use strict";e(Y)(this,t),this.version=n,this.transformResults=r},Kg=function(){"use strict";function t(n,r){e(Y)(this,t),this.updateTime=n,this.exists=r}return e(X)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function Gg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Wg=function t(){"use strict";e(Y)(this,t)};function Qg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ok(e.key,Kg.none()):new Zg(e.key,e.data,Kg.none());var n=e.data,r=bm.empty(),i=new Ky(ky.comparator),a=!0,o=!1,s=void 0;try{for(var u,c=t.fields[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(!i.has(l)){var f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?r.delete(l):r.set(l,f),i=i.add(l)}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return new ek(e.key,r,new Wy(i.toArray()),Kg.none())}function Jg(e,t,n){var r,i,a,o,s;e instanceof Zg?(i=t,a=n,o=(r=e).value.clone(),s=nk(r.fieldTransforms,i,a.transformResults),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()):e instanceof ek?function(e,t,n){if(Gg(e.precondition,t)){var r=nk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yg(e,t,n,r){return e instanceof Zg?function(e,t,n,r){if(!Gg(e.precondition,t))return n;var i=e.value.clone(),a=rk(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ek?function(e,t,n,r){if(!Gg(e.precondition,t))return n;var i=rk(e.fieldTransforms,r,t),a=t.data;return a.setAll(tk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):(i=t,a=n,Gg(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a);var i,a}function Xg(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var o,s=e.fieldTransforms[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=t.data.field(u.field),l=Lg(u.transform,c||null);null!=l&&(null===n&&(n=bm.empty()),n.set(u.field,l))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n||null}function $g(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&dy(n,r,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Mg&&r instanceof Mg||n instanceof Fg&&r instanceof Fg?dy(n.elements,r.elements,um):n instanceof jg&&r instanceof jg?um(n._t,r._t):n instanceof Pg&&r instanceof Pg);var n,r}(e,t)}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}var Zg=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e(Y)(this,r),(o=n.call(this)).key=t,o.value=i,o.precondition=a,o.fieldTransforms=s,o.type=0,e(Uf)(o)}return e(X)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(Wg),ek=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return e(Y)(this,r),(s=n.call(this)).key=t,s.data=i,s.fieldMask=a,s.precondition=o,s.fieldTransforms=u,s.type=1,e(Uf)(s)}return e(X)(r,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),r}(Wg);function tk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function nk(e,t,n){var r=new Map;Xv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Dg(o,s,n[i]))}return r}function rk(e,t,n){var r=new Map,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.transform,f=n.data.field(c.field);r.set(c.field,Rg(l,f,t))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}var ik,ak,ok=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this)).key=t,a.precondition=i,a.type=2,a.fieldTransforms=[],e(Uf)(a)}return e(X)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(Wg),sk=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this)).key=t,a.precondition=i,a.type=3,a.fieldTransforms=[],e(Uf)(a)}return e(X)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(Wg),uk=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this.batchId=n,this.localWriteTime=r,this.baseMutations=i,this.mutations=a}return e(X)(t,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Jg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.baseMutations[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.key.isEqual(e.key)&&(t=Yg(s,e,t,this.localWriteTime))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=this.mutations[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;d.key.isEqual(e.key)&&(t=Yg(d,e,t,this.localWriteTime))}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=bg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Qg(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(vy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),xg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&dy(this.mutations,e.mutations,(function(e,t){return $g(e,t)}))&&dy(this.baseMutations,e.baseMutations,(function(e,t){return $g(e,t)}))}}]),t}(),ck=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this.batch=n,this.commitVersion=r,this.mutationResults=i,this.docVersions=a}return e(X)(t,null,[{key:"from",value:function(e,n,r){Xv(e.mutations.length===r.length);for(var i=Ig,a=e.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new t(e,n,r,i)}}]),t}(),lk=function(){"use strict";function t(n,r){e(Y)(this,t),this.largestBatchId=n,this.mutation=r}return e(X)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),fk=function t(n){"use strict";e(Y)(this,t),this.count=n};function hk(e){switch(e){default:return Yv();case Zv.CANCELLED:case Zv.UNKNOWN:case Zv.DEADLINE_EXCEEDED:case Zv.RESOURCE_EXHAUSTED:case Zv.INTERNAL:case Zv.UNAVAILABLE:case Zv.UNAUTHENTICATED:return!1;case Zv.INVALID_ARGUMENT:case Zv.NOT_FOUND:case Zv.ALREADY_EXISTS:case Zv.PERMISSION_DENIED:case Zv.FAILED_PRECONDITION:case Zv.ABORTED:case Zv.OUT_OF_RANGE:case Zv.UNIMPLEMENTED:case Zv.DATA_LOSS:return!0}}function dk(e){if(void 0===e)return Wv("GRPC error has no .code"),Zv.UNKNOWN;switch(e){case ik.OK:return Zv.OK;case ik.CANCELLED:return Zv.CANCELLED;case ik.UNKNOWN:return Zv.UNKNOWN;case ik.DEADLINE_EXCEEDED:return Zv.DEADLINE_EXCEEDED;case ik.RESOURCE_EXHAUSTED:return Zv.RESOURCE_EXHAUSTED;case ik.INTERNAL:return Zv.INTERNAL;case ik.UNAVAILABLE:return Zv.UNAVAILABLE;case ik.UNAUTHENTICATED:return Zv.UNAUTHENTICATED;case ik.INVALID_ARGUMENT:return Zv.INVALID_ARGUMENT;case ik.NOT_FOUND:return Zv.NOT_FOUND;case ik.ALREADY_EXISTS:return Zv.ALREADY_EXISTS;case ik.PERMISSION_DENIED:return Zv.PERMISSION_DENIED;case ik.FAILED_PRECONDITION:return Zv.FAILED_PRECONDITION;case ik.ABORTED:return Zv.ABORTED;case ik.OUT_OF_RANGE:return Zv.OUT_OF_RANGE;case ik.UNIMPLEMENTED:return Zv.UNIMPLEMENTED;case ik.DATA_LOSS:return Zv.DATA_LOSS;default:return Yv()}}(ak=ik||(ik={}))[ak.OK=0]="OK",ak[ak.CANCELLED=1]="CANCELLED",ak[ak.UNKNOWN=2]="UNKNOWN",ak[ak.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ak[ak.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ak[ak.NOT_FOUND=5]="NOT_FOUND",ak[ak.ALREADY_EXISTS=6]="ALREADY_EXISTS",ak[ak.PERMISSION_DENIED=7]="PERMISSION_DENIED",ak[ak.UNAUTHENTICATED=16]="UNAUTHENTICATED",ak[ak.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ak[ak.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ak[ak.ABORTED=10]="ABORTED",ak[ak.OUT_OF_RANGE=11]="OUT_OF_RANGE",ak[ak.UNIMPLEMENTED=12]="UNIMPLEMENTED",ak[ak.INTERNAL=13]="INTERNAL",ak[ak.UNAVAILABLE=14]="UNAVAILABLE",ak[ak.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pk=function(){"use strict";function t(){e(Y)(this,t),this.onExistenceFilterMismatchCallbacks=new Map}return e(X)(t,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return vk}},{key:"getOrCreateInstance",value:function(){return null===vk&&(vk=new t),vk}}]),t}(),vk=null,yk=function(){"use strict";function t(n,r,i,a,o){e(Y)(this,t),this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}return e(X)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n,r){var i=new Map;return i.set(e,mk.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(vy.min(),i,Sg(),yg(),xg())}}]),t}(),mk=function(){"use strict";function t(n,r,i,a,o){e(Y)(this,t),this.resumeToken=n,this.current=r,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}return e(X)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n,r){return new t(r,n,xg(),xg(),xg())}}]),t}(),gk=function t(n,r,i,a){"use strict";e(Y)(this,t),this.It=n,this.removedTargetIds=r,this.key=i,this.Tt=a},kk=function t(n,r){"use strict";e(Y)(this,t),this.targetId=n,this.Et=r},wk=function t(n,r){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yy.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e(Y)(this,t),this.state=n,this.targetIds=r,this.resumeToken=i,this.cause=a},bk=function(){"use strict";function t(){e(Y)(this,t),this.At=0,this.Rt=_k(),this.vt=Yy.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return e(X)(t,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=xg(),t=xg(),n=xg();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Yv()}})),new mk(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=_k()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),t}(),Ek=function(){"use strict";function t(n){e(Y)(this,t),this.Ft=n,this.Bt=new Map,this.Lt=yg(),this.qt=Ik(),this.Ut=new Ky(hy)}return e(X)(t,[{key:"Kt",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.It[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(o,e.Tt):this.Qt(o,e.key,e.Tt)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var s=!0,u=!1,c=void 0;try{for(var l,f=e.removedTargetIds[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;this.Qt(h,e.key,e.Tt)}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Yv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Ym(a))if(0===r){var o=new wy(a.path);this.Qt(n,o,Im.newNoDocument(o,vy.min()))}else Xv(1===r);else{var s=this.Zt(n);s!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=pk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:s,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Ym(a.target)){var o=new wy(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Im.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=xg();this.qt.forEach((function(e,n){var i=t,a=!0;n.forEachWhile((function(e){var t=i.Yt(e);return!t||2===t.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new yk(e,n,this.Ut,this.Lt,r);return this.Lt=yg(),this.qt=Ik(),this.Ut=new Ky(hy),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new bk,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Ky(hy),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Gv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new bk),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),t}();function Ik(){return new qy(wy.comparator)}function _k(){return new qy(wy.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xk={asc:"ASCENDING",desc:"DESCENDING"},Tk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sk={and:"AND",or:"OR"},Ak=function t(n,r){"use strict";e(Y)(this,t),this.databaseId=n,this.useProto3Json=r};function Ck(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ok(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nk(e,t){return Ck(e,t.toTimestamp())}function Rk(e){return Xv(!!e),vy.fromTimestamp((t=$y(e),new py(t.seconds,t.nanos)));var t}function Dk(e,t){return(n=e,new my(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function Lk(e){var t=my.fromString(e);return Xv($k(t)),t}function Pk(e,t){return Dk(e.databaseId,t.path)}function Mk(e,t){var n=Lk(t);if(n.get(1)!==e.databaseId.projectId)throw new ey(Zv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ey(Zv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wy(jk(n))}function Uk(e,t){return Dk(e.databaseId,t)}function Fk(e){var t=Lk(e);return 4===t.length?my.emptyPath():jk(t)}function Vk(e){return new my(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jk(e){return Xv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bk(e,t,n){return{name:Pk(e,t),fields:n.value.mapValue.fields}}function qk(e,t){var n,r,i;if(t instanceof Zg)n={update:Bk(e,t.key,t.value)};else if(t instanceof ok)n={delete:Pk(e,t.key)};else if(t instanceof ek)n={update:Bk(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach((function(e){return i.push(e.canonicalString())})),{fieldPaths:i})};else{if(!(t instanceof sk))return Yv();n={verify:Pk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Pg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jg)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Yv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Nk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yv()}(e,t.precondition)),n}function zk(e,t){return{documents:[Uk(e,t.path)]}}function Hk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Uk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Uk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Xk(Nm.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return{field:Jk((t=e).field),direction:Wk(t.dir)};var t}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s,u,c=(o=e,s=t.limit,o.useProto3Json||Dy(s)?s:{value:s});return null!==c&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt={before:(u=t.startAt).inclusive,values:u.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Kk(e){var t=Fk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Xv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o,s,u=[];n.where&&(o=n.where,u=(s=Gk(o))instanceof Nm&&Dm(s)?s.getFilters():[s]);var c=[];n.orderBy&&(c=n.orderBy.map((function(e){return new Sm(Yk((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var l=null;n.limit&&(l=function(e){var t;return Dy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var f=null;n.startAt&&(f=function(e){var t=!!e.before,n=e.values||[];return new _m(n,t)}(n.startAt));var h=null;return n.endAt&&(h=function(e){var t=!e.before,n=e.values||[];return new _m(n,t)}(n.endAt)),$m(t,i,c,u,l,"F",f,h)}function Gk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Yk(e.unaryFilter.field);return Om.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Yk(e.unaryFilter.field);return Om.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yk(e.unaryFilter.field);return Om.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yk(e.unaryFilter.field);return Om.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Yv()}}(e):void 0!==e.fieldFilter?(n=e,Om.create(Yk(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yv()}}(n.fieldFilter.op),n.fieldFilter.value)):void 0!==e.compositeFilter?(t=e,Nm.create(t.compositeFilter.filters.map((function(e){return Gk(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Yv()}}(t.compositeFilter.op))):Yv();var t,n}function Wk(e){return xk[e]}function Qk(e){return Tk[e]}function Jk(e){return{fieldPath:e.canonicalString()}}function Yk(e){return ky.fromServerFormat(e.fieldPath)}function Xk(e){return e instanceof Om?function(e){if("=="===e.op){if(mm(e.value))return{unaryFilter:{field:Jk(e.field),op:"IS_NAN"}};if(ym(e.value))return{unaryFilter:{field:Jk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mm(e.value))return{unaryFilter:{field:Jk(e.field),op:"IS_NOT_NAN"}};if(ym(e.value))return{unaryFilter:{field:Jk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jk(e.field),op:Qk(e.op),value:e.value}}}(e):e instanceof Nm?(r=(t=e).getFilters().map((function(e){return Xk(e)})),1===r.length?r[0]:{compositeFilter:{op:(n=t.op,Sk[n]),filters:r}}):Yv();var t,n,r}function $k(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zk=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vy.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yy.EMPTY_BYTE_STRING;e(Y)(this,t),this.target=n,this.targetId=r,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u}return e(X)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),ew=function t(n){"use strict";e(Y)(this,t),this.se=n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(e){var t=Kk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?og(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nw=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Zy(e.integerValue));else if("doubleValue"in e){var n=Zy(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Ly(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(em(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?wm(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Yv()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);var r=!0,i=!1,a=void 0;try{for(var o,s=Object.keys(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.fe(u,t),this.ue(n[u],t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.ue(u,t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),wy.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),t}();nw.pe=new nw;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rw=function(){"use strict";function t(){e(Y)(this,t),this.He=new iw}return e(X)(t,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Oy.resolve()}},{key:"getCollectionParents",value:function(e,t){return Oy.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Oy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Oy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Oy.resolve(null)}},{key:"getIndexType",value:function(e,t){return Oy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Oy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Oy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Oy.resolve(_y.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Oy.resolve(_y.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Oy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Oy.resolve()}}]),t}(),iw=function(){"use strict";function t(){e(Y)(this,t),this.index={}}return e(X)(t,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ky(my.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ky(my.comparator)).toArray()}}]),t}();new Uint8Array(0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aw=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return e(X)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aw.DEFAULT_COLLECTION_PERCENTILE=10,aw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,aw.DEFAULT=new aw(41943040,aw.DEFAULT_COLLECTION_PERCENTILE,aw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),aw.DISABLED=new aw(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ow=function(){"use strict";function t(n){e(Y)(this,t),this.Rn=n}return e(X)(t,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new t(0)}},{key:"bn",value:function(){return new t(-1)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sw=function(){"use strict";function t(){e(Y)(this,t),this.changes=new pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e(X)(t,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Im.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Oy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var uw=function t(n,r){"use strict";e(Y)(this,t),this.overlayedDocument=n,this.mutatedFields=r},cw=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this.remoteDocumentCache=n,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=a}return e(X)(t,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Yg(r.mutation,e,Wy.empty(),py.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,xg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xg(),r=this,i=wg();return this.populateOverlays(e,i,t).next((function(){return r.computeViews(e,t,i,n).next((function(e){var t=gg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=wg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,xg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=yg(),a=Eg(),o=Eg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ek)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Yg(o.mutation,t,o.mutation.getFieldMask(),py.now())):a.set(t.key,Wy.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new uw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Eg(),i=new qy((function(e,t){return e-t})),a=xg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n=!0,a=!1,o=void 0;try{for(var s,u=function(e,n){var a=n.value;a.keys().forEach((function(e){var n=t.get(e);if(null!==n){var o=r.get(e)||Wy.empty();o=a.applyToLocalView(n,o),r.set(e,o);var s=(i.get(a.batchId)||xg()).add(e);i=i.insert(a.batchId,s)}}))},c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)u(0,s)}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}})).next((function(){for(var o=[],s=i.getReverseIterator();s.hasNext();){var u=s.getNext(),c=u.key,l=u.value,f=bg();l.forEach((function(e){if(!a.has(e)){var n=Qg(t.get(e),r.get(e));null!==n&&f.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,c,f))}return Oy.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return r=t,wy.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):rg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var r}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=i,s=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Oy.resolve(wg()),u=-1,c=a;return s.next((function(t){return Oy.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Oy.resolve():o.remoteDocumentCache.getEntry(e,t).next((function(e){c=c.insert(t,e)}))})).next((function(){return o.populateOverlays(e,t,a)})).next((function(){return o.computeViews(e,c,t,xg())})).next((function(e){return{batchId:u,changes:kg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new wy(t)).next((function(e){var t=gg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gg();return this.indexManager.getCollectionParents(e,i).next((function(o){return Oy.forEach(o,(function(o){var s,u,c=(s=t,u=o.child(i),new Xm(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.getDocumentsMatchingCollectionQuery(e,c,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Im.newInvalidDocument(r)))}));var n=gg();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Yg(a.mutation,i,Wy.empty(),py.now()),lg(t,i)&&(n=n.insert(e,i))})),n}))}}]),t}(),lw=function(){"use strict";function t(n){e(Y)(this,t),this.serializer=n,this.Zn=new Map,this.Xn=new Map}return e(X)(t,[{key:"getBundleMetadata",value:function(e,t){return Oy.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Rk(n.createTime)}),Oy.resolve()}},{key:"getNamedQuery",value:function(e,t){return Oy.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:tw(n.bundledQuery),readTime:Rk(n.readTime)}),Oy.resolve();var n}}]),t}(),fw=function(){"use strict";function t(){e(Y)(this,t),this.overlays=new qy(wy.comparator),this.ts=new Map}return e(X)(t,[{key:"getOverlay",value:function(e,t){return Oy.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=wg();return Oy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Oy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Oy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=wg(),i=t.length+1,a=new wy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Oy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new qy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=wg(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=wg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Oy.resolve(u)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lk(t,n));var a=this.ts.get(t);void 0===a&&(a=xg(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),t}(),hw=function(){"use strict";function t(){e(Y)(this,t),this.es=new Ky(dw.ns),this.ss=new Ky(dw.rs)}return e(X)(t,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new dw(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new dw(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new wy(new my([])),r=new dw(n,e),i=new dw(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new wy(new my([])),n=new dw(t,e),r=new dw(t,e+1),i=xg();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new dw(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),t}(),dw=function(){"use strict";function t(n,r){e(Y)(this,t),this.key=n,this.ds=r}return e(X)(t,null,[{key:"ns",value:function(e,t){return wy.comparator(e.key,t.key)||hy(e.ds,t.ds)}},{key:"rs",value:function(e,t){return hy(e.ds,t.ds)||wy.comparator(e.key,t.key)}}]),t}(),pw=function(){"use strict";function t(n,r){e(Y)(this,t),this.indexManager=n,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this._s=new Ky(dw.ns)}return e(X)(t,[{key:"checkEmpty",value:function(e){return Oy.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new uk(i,t,n,r);this.mutationQueue.push(a);var o=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;this._s=this._s.add(new dw(f.key,i)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast())}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return Oy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Oy.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Oy.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Oy.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Oy.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new dw(t,0),i=new dw(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Oy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ky(hy);return t.forEach((function(e){var t=new dw(e,0),i=new dw(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Oy.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;wy.isDocumentKey(i)||(i=i.child(""));var a=new dw(new wy(i),0),o=new Ky(hy);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Oy.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Xv(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Oy.forEach(t.mutations,(function(i){var a=new dw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new dw(t,0),r=this._s.firstAfterOrEqual(n);return Oy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Oy.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),t}(),vw=function(){"use strict";function t(n){e(Y)(this,t),this.Ts=n,this.docs=new qy(wy.comparator),this.size=0}return e(X)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Oy.resolve(n?n.document.mutableCopy():Im.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=yg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Im.newInvalidDocument(e))})),Oy.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=yg(),a=t.path,o=new wy(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||xy(Iy(l),n)<=0||(r.has(l.key)||lg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Oy.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Yv()}},{key:"Es",value:function(e,t){return Oy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new yw(this)}},{key:"getSize",value:function(e){return Oy.resolve(this.size)}}]),t}(),yw=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this)).Jn=t,e(Uf)(i)}return e(X)(r,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Oy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),r}(sw),mw=function(){"use strict";function t(n){e(Y)(this,t),this.persistence=n,this.As=new pg((function(e){return Qm(e)}),Jm),this.lastRemoteSnapshotVersion=vy.min(),this.highestTargetId=0,this.Rs=0,this.vs=new hw,this.targetCount=0,this.bs=ow.vn()}return e(X)(t,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Oy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Oy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Oy.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Oy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Oy.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new ow(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Oy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Oy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Oy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Oy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Oy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Oy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Oy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Oy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Oy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Oy.resolve(n)}},{key:"containsKey",value:function(e,t){return Oy.resolve(this.vs.containsKey(t))}}]),t}(),gw=function(){"use strict";function t(n,r){var i=this;e(Y)(this,t),this.Ps={},this.overlays={},this.Vs=new Ry(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=n(this),this.Ds=new mw(this),this.indexManager=new rw,this.remoteDocumentCache=new vw((function(e){return i.referenceDelegate.Cs(e)})),this.serializer=new ew(r),this.xs=new lw(this.serializer)}return e(X)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new fw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new pw(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Gv("MemoryPersistence","Starting transaction:",e);var i=new kw(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Oy.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),t}(),kw=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this)).currentSequenceNumber=t,e(Uf)(i)}return r}(Sy),ww=function(){"use strict";function t(n){e(Y)(this,t),this.persistence=n,this.$s=new hw,this.Ms=null}return e(X)(t,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Yv()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Oy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Oy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Oy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){var t=n;e.forEach((function(e){return t.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oy.forEach(this.Bs,(function(r){var i=wy.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,vy.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Oy.or([function(){return Oy.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(e){return new t(e)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bw=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this.targetId=n,this.fromCache=r,this.Vi=i,this.Si=a}return e(X)(t,null,[{key:"Di",value:function(e,n){var r=xg(),i=xg(),a=!0,o=!1,s=void 0;try{for(var u,c=n.docChanges[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return new t(e,n.fromCache,r,i)}}]),t}(),Ew=function(){"use strict";function t(){e(Y)(this,t),this.Ci=!1}return e(X)(t,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(t,n){var r=this;if(eg(n))return Oy.resolve(null);var i=ag(n);return this.indexManager.getIndexType(t,i).next((function(a){return 0===a?null:(null!==n.limit&&1===a&&(n=og(n,null,"F"),i=ag(n)),r.indexManager.getDocumentsMatchingTarget(t,i).next((function(a){var o=r,s=xg.apply(void 0,e(Wt)(a));return r.xi.getDocuments(t,s).next((function(e){return o.indexManager.getMinOffset(t,i).next((function(r){var i=o.$i(n,e);return o.Mi(n,i,s,r.readTime)?o.Ni(t,og(n,null,"F")):o.Fi(t,i,n,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return eg(t)||r.isEqual(vy.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Kv()<=Wr.DEBUG&&Gv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cg(t)),i.Fi(e,o,t,Ey(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Ky(hg(e));return t.forEach((function(t,r){lg(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Kv()<=Wr.DEBUG&&Gv("QueryEngine","Using full collection scan to execute query:",cg(t)),this.xi.getDocumentsMatchingQuery(e,t,_y.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),t}(),Iw=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this.persistence=n,this.Bi=r,this.serializer=a,this.Li=new qy(hy),this.qi=new pg((function(e){return Qm(e)}),Jm),this.Ui=new Map,this.Ki=n.getRemoteDocumentCache(),this.Ds=n.getTargetCache(),this.xs=n.getBundleCache(),this.Gi(i)}return e(X)(t,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cw(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(e,t,n,r){return new Iw(e,t,n,r)}function xw(e,t){return Tw.apply(this,arguments)}function Tw(){return(Tw=e(l)(e(h).mark((function t(n,r){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$v(n),e.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return i.mutationQueue.getAllMutationBatches(e).next((function(n){return t=n,i.Gi(r),i.mutationQueue.getAllMutationBatches(e)})).next((function(n){var r=[],a=[],o=xg(),s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;r.push(h.batchId);var d=!0,p=!1,v=void 0;try{for(var y,m=h.mutations[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var g=y.value;o=o.add(g.key)}}catch(e){p=!0,v=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}var k=!0,w=!1,b=void 0;try{for(var E,I=n[Symbol.iterator]();!(k=(E=I.next()).done);k=!0){var _=E.value;a.push(_.batchId);var x=!0,T=!1,S=void 0;try{for(var A,C=_.mutations[Symbol.iterator]();!(x=(A=C.next()).done);x=!0){var O=A.value;o=o.add(O.key)}}catch(e){T=!0,S=e}finally{try{x||null==C.return||C.return()}finally{if(T)throw S}}}}catch(e){w=!0,b=e}finally{try{k||null==I.return||I.return()}finally{if(w)throw b}}return i.localDocuments.getDocuments(e,o).next((function(e){return{Qi:e,removedBatchIds:r,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Sw(e,t){var n=$v(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,a,o,s,u,c,l=t.batch.keys(),f=n.Ki.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,a=t,o=f,s=a.batch,u=s.keys(),c=Oy.resolve(),u.forEach((function(e){c=c.next((function(){return o.getEntry(i,e)})).next((function(t){var n=a.docVersions.get(e);Xv(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,a),t.isValidDocument()&&(t.setReadTime(a.commitVersion),o.addEntry(t)))}))})),c.next((function(){return r.mutationQueue.removeMutationBatch(i,s)}))).next((function(){return f.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,l,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=xg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,l)}))}))}function Aw(e){var t=$v(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function Cw(e,t){var n=$v(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,s)})));var c,l,f,h=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?h=h.withResumeToken(Yy.EMPTY_BYTE_STRING,vy.min()).withLastLimboFreeSnapshotVersion(vy.min()):a.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(a.resumeToken,r)),i=i.insert(s,h),l=h,f=a,(0===(c=u).resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size>0)&&o.push(n.Ds.updateTargetData(e,h))}}));var s=yg(),u=xg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ow(e,a,t.documentUpdates).next((function(e){s=e.zi,u=e.ji}))),!r.isEqual(vy.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Oy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Li=i,e}))}function Ow(e,t,n){var r=xg(),i=xg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=yg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(vy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Gv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function Nw(e,t){var n=$v(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Rw(e,t){var n=$v(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Oy.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new Zk(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Dw(e,t,n){return Lw.apply(this,arguments)}function Lw(){return(Lw=e(l)(e(h).mark((function t(n,r,i){var a,o,s;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$v(n),o=a.Li.get(r),s=i?"readwrite":"readwrite-primary",e.prev=1,e.t0=i,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",s,(function(e){return a.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ny(e.t1)){e.next=12;break}throw e.t1;case 12:Gv("LocalStore","Failed to update sequence numbers for target ".concat(r,": ").concat(e.t1));case 13:a.Li=a.Li.remove(r),a.qi.delete(o.target);case 14:case"end":return e.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function Pw(e,t,n){var r=$v(e),i=vy.min(),a=xg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return(o=r,s=e,u=ag(t),c=$v(o),l=c.qi.get(u),void 0!==l?Oy.resolve(c.Li.get(l)):c.Ds.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:vy.min(),n?a:xg())})).next((function(e){return Mw(r,fg(t),e),{documents:e,Wi:a}}));var o,s,u,c,l}))}function Mw(e,t,n){var r=e.Ui.get(t)||vy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}var Uw=function(){"use strict";function t(){e(Y)(this,t),this.activeTargetIds=Sg()}return e(X)(t,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),t}(),Fw=function(){"use strict";function t(){e(Y)(this,t),this.Br=new Uw,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e(X)(t,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Uw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),t}(),Vw=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),t}(),jw=function(){"use strict";function t(){var n=this;e(Y)(this,t),this.Ur=function(){return n.Kr()},this.Gr=function(){return n.Qr()},this.zr=[],this.jr()}return e(X)(t,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Gv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.zr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(0)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"Qr",value:function(){Gv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.zr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(1)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),Bw=null;function qw(){return null===Bw?Bw=268435456+Math.round(2147483648*Math.random()):Bw++,"0x"+Bw.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var zw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Hw=function(){"use strict";function t(n){e(Y)(this,t),this.Wr=n.Wr,this.Hr=n.Hr}return e(X)(t,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),t}(),Kw="WebChannelConnection",Gw=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this,t)).forceLongPolling=t.forceLongPolling,i.autoDetectLongPolling=t.autoDetectLongPolling,i.useFetchStreams=t.useFetchStreams,e(Uf)(i)}return e(X)(r,[{key:"lo",value:function(e,t,n,r){var i=qw();return new Promise((function(a,o){var s=new jv;s.setWithCredentials(!0),s.listenOnce(Pv.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Lv.NO_ERROR:var t=s.getResponseJson();Gv(Kw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Lv.TIMEOUT:Gv(Kw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ey(Zv.DEADLINE_EXCEEDED,"Request time out"));break;case Lv.HTTP_ERROR:var n=s.getStatus();if(Gv(Kw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=(l=u.status,f=l.toLowerCase().replace(/_/g,"-"),Object.values(Zv).indexOf(f)>=0?f:Zv.UNKNOWN);o(new ey(c,u.message))}else o(new ey(Zv.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ey(Zv.UNAVAILABLE,"Connection failed."));break;default:Yv()}}finally{Gv(Kw,"RPC '".concat(e,"' ").concat(i," completed."))}var l,f}));var u=JSON.stringify(r);Gv(Kw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=qw(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Rv(),o=Dv(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Fv({})),this.ho(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var u=i.join("");Gv(Kw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);var c=a.createWebChannel(u,s),l=!1,f=!1,h=new Hw({Wr:function(t){f?Gv(Kw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Gv(Kw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Vv.EventType.OPEN,(function(){f||Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Vv.EventType.CLOSE,(function(){f||(f=!0,Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Vv.EventType.ERROR,(function(t){f||(f=!0,Qv(Kw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new ey(Zv.UNAVAILABLE,"The operation could not be completed")))})),d(c,Vv.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Xv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=ik[e];if(void 0!==t)return dk(t)}(s),l=o.message;void 0===u&&(u=Zv.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),f=!0,h.so(new ey(u,l)),c.close()}else Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Mv.STAT_EVENT,(function(t){t.stat===Uv.PROXY?Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Uv.NOPROXY&&Gv(Kw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),r}(function(){"use strict";function t(n){e(Y)(this,t),this.databaseInfo=n,this.databaseId=n.databaseId;var r=n.ssl?"https":"http";this.ro=r+"://"+n.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e(X)(t,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=qw(),o=this.ao(e,t);Gv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.ho(s,r,i),this.lo(e,o,s,n).then((function(t){return Gv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Qv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=zw[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(e){return new Ak(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jw=function(){"use strict";function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;e(Y)(this,t),this.Ws=n,this.timerId=r,this._o=i,this.mo=a,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return e(X)(t,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Gv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),t}(),Yw=function(){"use strict";function t(n,r,i,a,o,s,u,c){e(Y)(this,t),this.Ws=n,this.bo=i,this.Po=a,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Jw(n,r)}return e(X)(t,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.xo(),!e.t0){e.next=4;break}return e.next=4,t.close(0);case 4:case"end":return e.stop()}}),n)})))()}},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.No()){e.next=2;break}return e.abrupt("return",t.close(0));case 2:case"end":return e.stop()}}),n)})))()}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==t?r.Co.reset():n&&n.code===Zv.RESOURCE_EXHAUSTED?(Wv(n.toString()),Wv("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):n&&n.code===Zv.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=t,e.next=9,r.listener.Zr(n);case 9:case"end":return e.stop()}}),i)})))()}},{key:"qo",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var n=this.Uo(this.Vo),r=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(n){var i=e(Bt)(n,2),a=i[0],o=i[1];t.Vo===r&&t.Ko(a,o)}),(function(e){var r=t;n((function(){var t=new ey(Zv.UNKNOWN,"Fetching auth token failed: "+e.message);return r.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){var e=n;r((function(){return e.state=2,e.Do=e.Ws.enqueueAfterDelay(e.Po,1e4,(function(){return e.No()&&(e.state=3),Promise.resolve()})),e.listener.Jr()}))})),this.stream.Zr((function(e){var t=n;r((function(){return t.Go(e)}))})),this.stream.onMessage((function(e){var t=n;r((function(){return t.onMessage(e)}))}))}},{key:"ko",value:function(){var t=this;this.state=5,this.Co.Ao(e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),n)}))))}},{key:"Go",value:function(e){return Gv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){var r=t;t.Ws.enqueueAndForget((function(){return r.Vo===e?n():(Gv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),Xw=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o,s,u){var c;return e(Y)(this,r),(c=n.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,u)).serializer=s,e(Uf)(c)}return e(X)(r,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Yv(),a=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Xv(void 0===t||"string"==typeof t),Yy.fromBase64String(t||"")):(Xv(void 0===t||t instanceof Uint8Array),Yy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,u=s&&function(e){var t=void 0===e.code?Zv.UNKNOWN:dk(e.code);return new ey(t,e.message||"")}(s);n=new wk(i,a,o,u||null)}else if("documentChange"in t){t.documentChange;var c=t.documentChange;c.document,c.document.name,c.document.updateTime;var l=Mk(e,c.document.name),f=Rk(c.document.updateTime),h=c.document.createTime?Rk(c.document.createTime):vy.min(),d=new bm({mapValue:{fields:c.document.fields}}),p=Im.newFoundDocument(l,f,h,d),v=c.targetIds||[],y=c.removedTargetIds||[];n=new gk(v,y,p.key,p)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=Mk(e,m.document),k=m.readTime?Rk(m.readTime):vy.min(),w=Im.newNoDocument(g,k),b=m.removedTargetIds||[];n=new gk([],b,w.key,w)}else if("documentRemove"in t){t.documentRemove;var E=t.documentRemove;E.document;var I=Mk(e,E.document),_=E.removedTargetIds||[];n=new gk([],_,I,null)}else{if(!("filter"in t))return Yv();t.filter;var x=t.filter;x.targetId;var T=x.count||0,S=new fk(T),A=x.targetId;n=new kk(A,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vy.min():t.readTime?Rk(t.readTime):vy.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t,n,r,i,a={};a.database=Vk(this.serializer),a.addTarget=(t=this.serializer,i=(n=e).target,(r=Ym(i)?{documents:zk(t,i)}:{query:Hk(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Ok(t,n.resumeToken):n.snapshotVersion.compareTo(vy.min())>0&&(r.readTime=Ck(t,n.snapshotVersion.toTimestamp())),r);var o=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Yv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);o&&(a.labels=o),this.Fo(a)}},{key:"Wo",value:function(e){var t={};t.database=Vk(this.serializer),t.removeTarget=e,this.Fo(t)}}]),r}(Yw),$w=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o,s,u){var c;return e(Y)(this,r),(c=n.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,u)).serializer=s,c.Ho=!1,e(Uf)(c)}return e(X)(r,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,e(ps)(e(ms)(r.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Xv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(Xv(void 0!==i),r.map((function(e){return n=i,(r=(t=e).updateTime?Rk(t.updateTime):Rk(n)).isEqual(vy.min())&&(r=Rk(n)),new Hg(r,t.transformResults||[]);var t,n,r}))):[]),n=Rk(e.commitTime);return this.listener.Zo(n,t)}var r,i;return Xv(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Vk(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return qk(t.serializer,e)}))};this.Fo(n)}}]),r}(Yw),Zw=function(t){"use strict";e(ie)(r,(function t(){e(Y)(this,t)}));var n=e(se)(r);function r(t,i,a,o){var s;return e(Y)(this,r),(s=n.call(this)).authCredentials=t,s.appCheckCredentials=i,s.connection=a,s.serializer=o,s.eu=!1,e(Uf)(s)}return e(X)(r,[{key:"nu",value:function(){if(this.eu)throw new ey(Zv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=e(Bt)(a,2),s=o[0],u=o[1];return i.connection.co(t,n,r,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Zv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ey(Zv.UNKNOWN,e.toString())}))}},{key:"fo",value:function(t,n,r,i){var a=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var s=e(Bt)(o,2),u=s[0],c=s[1];return a.connection.fo(t,n,r,u,c,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Zv.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new ey(Zv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),r}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eb=function(){"use strict";function t(n,r){e(Y)(this,t),this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return e(X)(t,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Wv(t),this.ru=!1):Gv("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),t}(),tb=function t(n,r,i,a,o){"use strict";var s=this;e(Y)(this,t),this.localStore=n,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr((function(t){var n=s;i.enqueueAndForget(e(l)(e(h).mark((function t(){return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=hb(n),!t.t0){t.next=5;break}return Gv("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=$v(n)).du.add(4),e.next=4,ib(r);case 4:return r.mu.set("Unknown"),r.du.delete(4),e.next=8,nb(r);case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(n);case 5:case"end":return t.stop()}}),t)}))))})),this.mu=new eb(i,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e){return rb.apply(this,arguments)}function rb(){return(rb=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,i=!1,a=void 0,!hb(n)){e.next=25;break}e.prev=2,o=n.wu[Symbol.iterator]();case 4:if(r=(s=o.next()).done){e.next=11;break}return u=s.value,e.next=8,u(!0);case 8:r=!0,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),i=!0,a=e.t0;case 17:e.prev=17,e.prev=18,r||null==o.return||o.return();case 20:if(e.prev=20,!i){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),t,null,[[2,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function ib(e){return ab.apply(this,arguments)}function ab(){return(ab=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,a=void 0,e.prev=1,o=n.wu[Symbol.iterator]();case 3:if(r=(s=o.next()).done){e.next=10;break}return u=s.value,e.next=7,u(!1);case 7:r=!0,e.next=3;break;case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),i=!0,a=e.t0;case 16:e.prev=16,e.prev=17,r||null==o.return||o.return();case 19:if(e.prev=19,!i){e.next=22;break}throw a;case 22:return e.finish(19);case 23:return e.finish(16);case 24:case"end":return e.stop()}}),t,null,[[1,12,16,24],[17,,19,23]])})))).apply(this,arguments)}function ob(e,t){var n=$v(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),fb(n)?lb(n):Bb(n).No()&&ub(n,t))}function sb(e,t){var n=$v(e),r=Bb(n);n.fu.delete(t),r.No()&&cb(n,t),0===n.fu.size&&(r.No()?r.$o():hb(n)&&n.mu.set("Unknown"))}function ub(e,t){e.gu.Ot(t.targetId),Bb(e).jo(t)}function cb(e,t){e.gu.Ot(t),Bb(e).Wo(t)}function lb(e){e.gu=new Ek({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),Bb(e).start(),e.mu.ou()}function fb(e){return hb(e)&&!Bb(e).xo()&&e.fu.size>0}function hb(e){return 0===$v(e).du.size}function db(e){e.gu=void 0}function pb(e){return vb.apply(this,arguments)}function vb(){return(vb=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.fu.forEach((function(e,t){ub(n,e)}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function yb(e,t){return mb.apply(this,arguments)}function mb(){return(mb=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:db(n),fb(n)?(n.mu.au(r),lb(n)):n.mu.set("Unknown");case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function gb(e,t,n){return kb.apply(this,arguments)}function kb(){return kb=e(l)(e(h).mark((function t(n,r,i){var a;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.mu.set("Online"),!(r instanceof wk&&2===r.state&&r.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.cause,a=!0,o=!1,s=void 0,e.prev=2,u=r.targetIds[Symbol.iterator]();case 4:if(a=(c=u.next()).done){e.next=15;break}if(l=c.value,e.t0=n.fu.has(l),!e.t0){e.next=12;break}return e.next=10,n.remoteSyncer.rejectListen(l,i);case 10:n.fu.delete(l),n.gu.removeTarget(l);case 12:a=!0,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(2),o=!0,s=e.t1;case 21:e.prev=21,e.prev=22,a||null==u.return||u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),t,null,[[2,17,21,29],[22,,24,28]])})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),Gv("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t.t0),t.next=11,wb(n,t.t0);case 11:case 22:t.next=29;break;case 13:if(r instanceof gk?n.gu.Kt(r):r instanceof kk?n.gu.Jt(r):n.gu.zt(r),i.isEqual(vy.min())){t.next=29;break}return t.prev=14,t.next=17,Aw(n.localStore);case 17:if(a=t.sent,t.t1=i.compareTo(a)>=0,!t.t1){t.next=22;break}return t.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Yy.EMPTY_BYTE_STRING,n.snapshotVersion)),cb(e,t);var r=new Zk(n.target,t,1,n.sequenceNumber);ub(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(n,i);case 24:return t.prev=24,t.t2=t.catch(14),Gv("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,wb(n,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])}))),kb.apply(this,arguments)}function wb(e,t,n){return bb.apply(this,arguments)}function bb(){return(bb=e(l)(e(h).mark((function t(n,r,i){return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ny(r)){t.next=2;break}throw r;case 2:return n.du.add(1),t.next=5,ib(n);case 5:n.mu.set("Offline"),i||(i=function(){return Aw(n.localStore)}),n.asyncQueue.enqueueRetryable(e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gv("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return n.du.delete(1),e.next=6,nb(n);case 6:case"end":return e.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Eb(e,t){return t().catch((function(n){return wb(e,n,t)}))}function Ib(e){return _b.apply(this,arguments)}function _b(){return(_b=e(l)(e(h).mark((function t(n){var r,i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=$v(n),i=qb(r),a=r.lu.length>0?r.lu[r.lu.length-1].batchId:-1;case 2:if(!xb(r)){e.next=19;break}return e.prev=3,e.next=6,Nw(r.localStore,a);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===r.lu.length&&i.$o(),e.abrupt("break",19);case 10:a=o.batchId,Tb(r,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,wb(r,e.t0);case 17:e.next=2;break;case 19:Sb(r)&&Ab(r);case 20:case"end":return e.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function xb(e){return hb(e)&&e.lu.length<10}function Tb(e,t){e.lu.push(t);var n=qb(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function Sb(e){return hb(e)&&!qb(e).xo()&&e.lu.length>0}function Ab(e){qb(e).start()}function Cb(e){return Ob.apply(this,arguments)}function Ob(){return(Ob=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qb(n).tu();case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Nb(e){return Rb.apply(this,arguments)}function Rb(){return(Rb=e(l)(e(h).mark((function t(n){var r,i,a,o,s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=qb(n),i=!0,a=!1,o=void 0,e.prev=2,s=n.lu[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)c=u.value,r.Yo(c.mutations);e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),a=!0,o=e.t0;case 10:e.prev=10,e.prev=11,i||null==s.return||s.return();case 13:if(e.prev=13,!a){e.next=16;break}throw o;case 16:return e.finish(13);case 17:return e.finish(10);case 18:case"end":return e.stop()}}),t,null,[[2,6,10,18],[11,,13,17]])})))).apply(this,arguments)}function Db(e,t,n){return Lb.apply(this,arguments)}function Lb(){return(Lb=e(l)(e(h).mark((function t(n,r,i){var a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.lu.shift(),o=ck.from(a,r,i),e.next=3,Eb(n,(function(){return n.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,Ib(n);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Pb(e,t){return Mb.apply(this,arguments)}function Mb(){return Mb=e(l)(e(h).mark((function t(n,r){return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r&&qb(n).Jo,!t.t0){t.next=4;break}return t.next=4,function(){var t=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hk(a=r.code)||a===Zv.ABORTED){e.next=7;break}return i=n.lu.shift(),qb(n).Oo(),e.next=5,Eb(n,(function(){return n.remoteSyncer.rejectFailedWrite(i.batchId,r)}));case 5:return e.next=7,Ib(n);case 7:case 8:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:Sb(n)&&Ab(n);case 5:case"end":return t.stop()}}),t)}))),Mb.apply(this,arguments)}function Ub(e,t){return Fb.apply(this,arguments)}function Fb(){return(Fb=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=$v(n)).asyncQueue.verifyOperationInProgress(),Gv("RemoteStore","RemoteStore received new credentials"),a=hb(i),i.du.add(3),e.next=6,ib(i);case 6:return a&&i.mu.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(r);case 9:return i.du.delete(3),e.next=12,nb(i);case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Vb(e,t){return jb.apply(this,arguments)}function jb(){return(jb=e(l)(e(h).mark((function t(n,r){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$v(n),!r){e.next=7;break}return i.du.delete(2),e.next=5,nb(i);case 5:e.next=13;break;case 7:if(e.t0=r,e.t0){e.next=13;break}return i.du.add(2),e.next=12,ib(i);case 12:i.mu.set("Unknown");case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Bb(t){return t.yu||(t.yu=(r=t.datastore,i=t.asyncQueue,a={Jr:pb.bind(null,t),Zr:yb.bind(null,t),zo:gb.bind(null,t)},(o=$v(r)).nu(),new Xw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)),t.wu.push((n=e(l)(e(h).mark((function n(r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.yu.Oo(),fb(t)?lb(t):t.mu.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.yu.stop();case 6:db(t);case 7:case"end":return e.stop()}}),n)}))),function(e){return n.apply(this,arguments)}))),t.yu;var n,r,i,a,o}function qb(t){return t.pu||(t.pu=(r=t.datastore,i=t.asyncQueue,a={Jr:Cb.bind(null,t),Zr:Pb.bind(null,t),Xo:Nb.bind(null,t),Zo:Db.bind(null,t)},(o=$v(r)).nu(),new $w(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)),t.wu.push((n=e(l)(e(h).mark((function n(r){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return t.pu.Oo(),e.next=4,Ib(t);case 4:e.next=9;break;case 6:return e.next=8,t.pu.stop();case 8:t.lu.length>0&&(Gv("RemoteStore","Stopping write stream with ".concat(t.lu.length," pending writes")),t.lu=[]);case 9:case"end":return e.stop()}}),n)}))),function(e){return n.apply(this,arguments)}))),t.pu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var n,r,i,a,o}var zb=function(){"use strict";function t(n,r,i,a,o){e(Y)(this,t),this.asyncQueue=n,this.timerId=r,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new ty,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e(X)(t,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ey(Zv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}],[{key:"createAndSchedule",value:function(e,n,r,i,a){var o=new t(e,n,Date.now()+r,i,a);return o.start(r),o}}]),t}();function Hb(e,t){if(Wv("AsyncQueue","".concat(t,": ").concat(e)),Ny(e))return new ey(Zv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kb=function(){"use strict";function t(n){e(Y)(this,t),this.comparator=n?function(e,t){return n(e,t)||wy.comparator(e.key,t.key)}:function(e,t){return wy.comparator(e.key,t.key)},this.keyedMap=gg(),this.sortedSet=new qy(this.comparator)}return e(X)(t,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),Gb=function(){"use strict";function t(){e(Y)(this,t),this.Iu=new qy(wy.comparator)}return e(X)(t,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Yv():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),t}(),Wb=function(){"use strict";function t(n,r,i,a,o,s,u,c,l){e(Y)(this,t),this.query=n,this.docs=r,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=l}return e(X)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new t(e,n,Kb.emptySet(n),o,r,i,!0,!1,a)}}]),t}(),Qb=function t(){"use strict";e(Y)(this,t),this.Eu=void 0,this.listeners=[]},Jb=function t(){"use strict";e(Y)(this,t),this.queries=new pg((function(e){return ug(e)}),sg),this.onlineState="Unknown",this.Au=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(e,t){return Xb.apply(this,arguments)}function Xb(){return(Xb=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$v(n),a=r.query,o=!1,(s=i.queries.get(a))||(o=!0,s=new Qb),!o){e.next=13;break}return e.prev=3,e.next=6,i.onListen(a);case 6:s.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Hb(e.t0,"Initialization of query '".concat(cg(r.query),"' failed")),e.abrupt("return",void r.onError(u));case 13:i.queries.set(a,s),s.listeners.push(r),r.Ru(i.onlineState),s.Eu&&r.vu(s.Eu)&&nE(i);case 14:case"end":return e.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function $b(e,t){return Zb.apply(this,arguments)}function Zb(){return(Zb=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$v(n),a=r.query,o=!1,(s=i.queries.get(a))&&(u=s.listeners.indexOf(r))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),!o){e.next=6;break}return e.abrupt("return",(i.queries.delete(a),i.onUnlisten(a)));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function eE(e,t){var n=$v(e),r=!1,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.query,f=n.queries.get(l);if(f){var h=!0,d=!1,p=void 0;try{for(var v,y=f.listeners[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){v.value.vu(c)&&(r=!0)}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}f.Eu=c}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}r&&nE(n)}function tE(e,t,n){var r=$v(e),i=r.queries.get(t),a=!0,o=!1,s=void 0;if(i)try{for(var u,c=i.listeners[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.onError(n)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r.queries.delete(t)}function nE(e){e.Au.forEach((function(e){e.next()}))}var rE=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.query=n,this.bu=r,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}return e(X)(t,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e.docChanges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;3!==s.type&&t.push(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e=new Wb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var u=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),u=!0):this.Du(e,this.onlineState)&&(this.Cu(e),u=!0),this.Vu=e,u}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Wb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var iE=function t(n){"use strict";e(Y)(this,t),this.key=n},aE=function t(n){"use strict";e(Y)(this,t),this.key=n},oE=function(){"use strict";function t(n,r){e(Y)(this,t),this.query=n,this.Lu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=xg(),this.mutatedKeys=xg(),this.Ku=hg(n),this.Gu=new Kb(this.Ku)}return e(X)(t,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Gb,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=lg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Ku(f,u)>0||c&&n.Ku(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:s,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return n=e.type,i=t.type,(a=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yv()}})(n)-a(i)||r.Ku(e.doc,t.doc);var n,i,a})),this.Hu(n);var o=t?this.Ju():[],s=0===this.Uu.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new Wb(this.query,e.Gu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Gb,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=xg(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new aE(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new iE(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=xg();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Wb.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),t}(),sE=function t(n,r,i){"use strict";e(Y)(this,t),this.query=n,this.targetId=r,this.view=i},uE=function t(n){"use strict";e(Y)(this,t),this.key=n,this.ec=!1},cE=function(){"use strict";function t(n,r,i,a,o,s){e(Y)(this,t),this.localStore=n,this.remoteStore=r,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nc={},this.sc=new pg((function(e){return ug(e)}),sg),this.ic=new Map,this.rc=new Set,this.oc=new qy(wy.comparator),this.uc=new Map,this.cc=new hw,this.ac={},this.hc=new Map,this.lc=ow.bn(),this.onlineState="Unknown",this.fc=void 0}return e(X)(t,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),t}();function lE(e,t){return fE.apply(this,arguments)}function fE(){return(fE=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=VE(n),!(s=i.sc.get(r))){e.next=7;break}a=s.targetId,i.sharedClientState.addLocalQueryTarget(a),o=s.view.tc(),e.next=16;break;case 7:return e.next=9,Rw(i.localStore,ag(r));case 9:return u=e.sent,i.isPrimaryClient&&ob(i.remoteStore,u),c=i.sharedClientState.addLocalQueryTarget(u.targetId),a=u.targetId,e.next=15,hE(i,r,a,"current"===c,u.resumeToken);case 15:o=e.sent;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function hE(e,t,n,r,i){return dE.apply(this,arguments)}function dE(){return dE=e(l)(e(h).mark((function t(n,r,i,a,o){var s,u,c,f,d,p;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dc=function(t,r,i){return(a=e(l)(e(h).mark((function t(n,r,i,a){var o,s,u;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.view.zu(i),e.t0=o.Mi,!e.t0){e.next=6;break}return e.next=5,Pw(n.localStore,r.query,!1).then((function(e){var t=e.documents;return r.view.zu(t,o)}));case 5:o=e.sent;case 6:return s=a&&a.targetChanges.get(r.targetId),u=r.view.applyChanges(o,n.isPrimaryClient,s),e.abrupt("return",(NE(n,r.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),t)}))),function(e,t,n,r){return a.apply(this,arguments)})(n,t,r,i);var a},t.next=3,Pw(n.localStore,r,!0);case 3:return s=t.sent,u=new oE(r,s.Wi),c=u.zu(s.documents),f=mk.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==n.onlineState,o),d=u.applyChanges(c,n.isPrimaryClient,f),NE(n,i,d.Yu),p=new sE(r,i,u),t.abrupt("return",(n.sc.set(r,p),n.ic.has(i)?n.ic.get(i).push(r):n.ic.set(i,[r]),d.snapshot));case 11:case"end":return t.stop()}}),t)}))),dE.apply(this,arguments)}function pE(e,t){return vE.apply(this,arguments)}function vE(){return(vE=e(l)(e(h).mark((function t(n,r){var i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$v(n),a=i.sc.get(r),!((o=i.ic.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.ic.set(a.targetId,o.filter((function(e){return!sg(e,r)}))),void i.sc.delete(r)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,Dw(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),sb(i.remoteStore,a.targetId),CE(i,a.targetId)})).catch(Ay);case 9:e.next=14;break;case 11:return CE(i,a.targetId),e.next=14,Dw(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function yE(e,t,n){return mE.apply(this,arguments)}function mE(){return(mE=e(l)(e(h).mark((function t(n,r,i){var a,o,s;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jE(n),e.prev=1,e.next=4,function(e,t){var n,r,i=$v(e),a=py.now(),o=t.reduce((function(e,t){return e.add(t.key)}),xg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=yg(),u=xg();return i.Ki.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o=[],s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=Xg(h,n.get(h.key).overlayedDocument);null!=d&&o.push(new ek(h.key,d,Em(d.value.mapValue),Kg.exists(!0)))}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return i.mutationQueue.addMutationBatch(e,a,o,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:kg(n)}}))}(a.localStore,r);case 4:return o=e.sent,a.sharedClientState.addPendingMutation(o.batchId),t=a,u=o.batchId,c=i,l=void 0,(l=t.ac[t.currentUser.toKey()])||(l=new qy(hy)),l=l.insert(u,c),t.ac[t.currentUser.toKey()]=l,e.next=9,LE(a,o.changes);case 9:return e.next=11,Ib(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=Hb(e.t0,"Failed to persist write"),i.reject(s);case 17:case"end":return e.stop()}var t,u,c,l}),t,null,[[1,13]])})))).apply(this,arguments)}function gE(e,t){return kE.apply(this,arguments)}function kE(){return(kE=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$v(n),e.prev=1,e.next=4,Cw(i.localStore,r);case 4:return a=e.sent,r.targetChanges.forEach((function(e,t){var n=i.uc.get(t);n&&(Xv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Xv(n.ec):e.removedDocuments.size>0&&(Xv(n.ec),n.ec=!1))})),e.next=8,LE(i,a,r);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ay(e.t0);case 14:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function wE(e,t,n){var r=$v(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=$v(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i=!0,a=!1,o=void 0;try{for(var s,u=n.listeners[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.Ru(t)&&(r=!0)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}})),r&&nE(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bE(e,t,n){return EE.apply(this,arguments)}function EE(){return(EE=e(l)(e(h).mark((function t(n,r,i){var a,o,s,u,c,l;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=$v(n)).sharedClientState.updateQueryState(r,"rejected",i),o=a.uc.get(r),!(s=o&&o.key)){e.next=14;break}return u=(u=new qy(wy.comparator)).insert(s,Im.newNoDocument(s,vy.min())),c=xg().add(s),l=new yk(vy.min(),new Map,new Ky(hy),u,c),e.next=9,gE(a,l);case 9:a.oc=a.oc.remove(s),a.uc.delete(r),DE(a),e.next=16;break;case 14:return e.next=16,Dw(a.localStore,r,!1).then((function(){return CE(a,r,i)})).catch(Ay);case 16:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function IE(e,t){return _E.apply(this,arguments)}function _E(){return(_E=e(l)(e(h).mark((function t(n,r){var i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$v(n),a=r.batch.batchId,e.prev=1,e.next=4,Sw(i.localStore,r);case 4:return o=e.sent,AE(i,a,null),SE(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,LE(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ay(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function xE(e,t,n){return TE.apply(this,arguments)}function TE(){return(TE=e(l)(e(h).mark((function t(n,r,i){var a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$v(n),e.prev=1,e.next=4,function(e,t){var n=$v(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Xv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,r);case 4:return o=e.sent,AE(a,r,i),SE(a,r),a.sharedClientState.updateMutationState(r,"rejected",i),e.next=10,LE(a,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ay(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function SE(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function AE(e,t,n){var r=$v(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function CE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r=!0,i=!1,a=void 0;try{for(var o,s=e.ic.get(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.sc.delete(u),n&&e.nc.wc(u,n)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||OE(e,t)}))}function OE(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(sb(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),DE(e))}function NE(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u instanceof iE?(e.cc.addReference(u.key,t),RE(e,u)):u instanceof aE?(Gv("SyncEngine","Document no longer in limbo: "+u.key),e.cc.removeReference(u.key,t),e.cc.containsKey(u.key)||OE(e,u.key)):Yv()}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}function RE(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Gv("SyncEngine","New document in limbo: "+n),e.rc.add(r),DE(e))}function DE(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new wy(my.fromString(t)),r=e.lc.next();e.uc.set(r,new uE(n)),e.oc=e.oc.insert(n,r),ob(e.remoteStore,new Zk(ag(Zm(n.path)),r,2,Ry.ct))}}function LE(e,t,n){return PE.apply(this,arguments)}function PE(){return PE=e(l)(e(h).mark((function t(n,r,i){var a,o,s,u;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=$v(n),o=[],s=[],u=[],t.t0=a.sc.isEmpty(),t.t0){t.next=9;break}return a.sc.forEach((function(e,t){u.push(a.dc(t,r,i).then((function(e){if((e||i)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=bw.Di(t.targetId,e);s.push(n)}})))})),t.next=6,Promise.all(u);case 6:return a.nc.zo(o),t.next=9,function(){var t=e(l)(e(h).mark((function t(n,r){var i,a,o,s,u,c,l,f,d,p,v;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$v(n),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Oy.forEach(r,(function(t){return Oy.forEach(t.Vi,(function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Oy.forEach(t.Si,(function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ny(e.t0)){e.next=10;break}throw e.t0;case 10:Gv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:for(a=!0,o=!1,s=void 0,e.prev=12,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)l=c.value,f=l.targetId,l.fromCache||(d=i.Li.get(f),p=d.snapshotVersion,v=d.withLastLimboFreeSnapshotVersion(p),i.Li=i.Li.insert(f,v));e.next=20;break;case 16:e.prev=16,e.t1=e.catch(12),o=!0,s=e.t1;case 20:e.prev=20,e.prev=21,a||null==u.return||u.return();case 23:if(e.prev=23,!o){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),t,null,[[1,6],[12,16,20,28],[21,,23,27]])})));return function(e,n){return t.apply(this,arguments)}}()(a.localStore,s);case 9:case"end":return t.stop()}}),t)}))),PE.apply(this,arguments)}function ME(e,t){return UE.apply(this,arguments)}function UE(){return(UE=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=$v(n)).currentUser.isEqual(r)){e.next=11;break}return Gv("SyncEngine","User change. New user:",r.toKey()),e.next=5,xw(i.localStore,r);case 5:return a=e.sent,i.currentUser=r,(t=i).hc.forEach((function(e){e.forEach((function(e){e.reject(new ey(Zv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.hc.clear(),i.sharedClientState.handleUserChange(r,a.removedBatchIds,a.addedBatchIds),e.next=11,LE(i,a.Qi);case 11:case"end":return e.stop()}var t}),t)})))).apply(this,arguments)}function FE(e,t){var n=$v(e),r=n.uc.get(t);if(r&&r.ec)return xg().add(r.key);var i=xg(),a=n.ic.get(t);if(!a)return i;var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=n.sc.get(f);i=i.unionWith(h.view.Qu)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return i}function VE(e){var t=$v(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bE.bind(null,t),t.nc.zo=eE.bind(null,t.eventManager),t.nc.wc=tE.bind(null,t.eventManager),t}function jE(e){var t=$v(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=IE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xE.bind(null,t),t}var BE=function(){"use strict";function t(){e(Y)(this,t),this.synchronizeTabs=!1}return e(X)(t,[{key:"initialize",value:function(t){var n=this;return e(l)(e(h).mark((function r(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.serializer=Qw(t.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(t),n.persistence=n.createPersistence(t),e.next=5,n.persistence.start();case 5:n.localStore=n.createLocalStore(t),n.gcScheduler=n.createGarbageCollectionScheduler(t,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(t,n.localStore);case 8:case"end":return e.stop()}}),r)})))()}},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return _w(this.persistence,new Ew,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new gw(ww.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Fw}},{key:"terminate",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.gcScheduler&&t.gcScheduler.stop(),e.next=3,t.sharedClientState.shutdown();case 3:return e.next=5,t.persistence.shutdown();case 5:case"end":return e.stop()}}),n)})))()}}]),t}(),qE=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,[{key:"initialize",value:function(t,n){var r=this;return e(l)(e(h).mark((function i(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.localStore,e.t0){e.next=12;break}return r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=function(e){return wE(r.syncEngine,e,1)},r.remoteStore.remoteSyncer.handleCredentialChange=ME.bind(null,r.syncEngine),e.next=12,Vb(r.remoteStore,r.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),i)})))()}},{key:"createEventManager",value:function(e){return new Jb}},{key:"createDatastore",value:function(e){var t,n,r,i=Qw(e.databaseInfo.databaseId),a=(t=e.databaseInfo,new Gw(t));return n=e.authCredentials,r=e.appCheckCredentials,new Zw(n,r,a,i)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return wE(o.syncEngine,e,0)},a=jw.D()?new jw:new Vw,new tb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,a=this.sharedClientState,o=e.initialUser,s=e.maxConcurrentLimboResolutions,u=t,c=new cE(n,r,i,a,o,s),u&&(c.fc=!0),c;var n,r,i,a,o,s,u,c}},{key:"terminate",value:function(){return(t=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$v(n),Gv("RemoteStore","RemoteStore shutting down."),r.du.add(5),e.next=5,ib(r);case 5:r._u.shutdown(),r.mu.set("Unknown");case 7:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zE=function(){"use strict";function t(n){e(Y)(this,t),this.observer=n,this.muted=!1}return e(X)(t,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Wv("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),t}(),HE=function(){"use strict";function t(n,r,i,a){var o=this;e(Y)(this,t);var s,u=this;this.authCredentials=n,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=a,this.user=qv.UNAUTHENTICATED,this.clientId=fy.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,(s=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gv("FirestoreClient","Received user=",n.uid),e.next=3,u.authCredentialListener(n);case 3:u.user=n;case 4:case"end":return e.stop()}}),t)}))),function(e){return s.apply(this,arguments)})),this.appCheckCredentials.start(i,(function(e){return Gv("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return e(X)(t,[{key:"getConfiguration",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),n)})))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ey(Zv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){this.asyncQueue.enterRestrictedMode();var t=new ty,n=this;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(e(l)(e(h).mark((function r(){var i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=n._onlineComponents,!e.t0){e.next=5;break}return e.next=5,n._onlineComponents.terminate();case 5:if(e.t1=n._offlineComponents,!e.t1){e.next=9;break}return e.next=9,n._offlineComponents.terminate();case 9:n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),t.resolve(),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(0),i=Hb(e.t2,"Failed to shutdown persistence"),t.reject(i);case 18:case"end":return e.stop()}}),r,null,[[0,14]])})))),t.promise}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(e,t){return GE.apply(this,arguments)}function GE(){return GE=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),Gv("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,n.getConfiguration();case 3:return i=t.sent,t.next=6,r.initialize(i);case 6:a=i.initialUser,n.setCredentialChangeListener(function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(n),e.t0){e.next=5;break}return e.next=4,xw(r.localStore,n);case 4:a=n;case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener((function(){return n.terminate()})),n._offlineComponents=r;case 8:case"end":return t.stop()}}),t)}))),GE.apply(this,arguments)}function WE(e,t){return QE.apply(this,arguments)}function QE(){return(QE=e(l)(e(h).mark((function t(n,r){var i,a;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.asyncQueue.verifyOperationInProgress(),e.next=3,YE(n);case 3:return i=e.sent,Gv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.getConfiguration();case 7:return a=e.sent,e.next=10,r.initialize(i,a);case 10:n.setCredentialChangeListener((function(e){return Ub(r.remoteStore,e)})),n.setAppCheckTokenChangeListener((function(e,t){return Ub(r.remoteStore,t)})),n._onlineComponents=r;case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function JE(e){return"FirebaseError"===e.name?e.code===Zv.FAILED_PRECONDITION||e.code===Zv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function YE(e){return XE.apply(this,arguments)}function XE(){return(XE=e(l)(e(h).mark((function t(n){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n._offlineComponents){e.next=21;break}if(!n._uninitializedComponentsProvider){e.next=18;break}return Gv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,KE(n,n._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),JE(r=e.t0)){e.next=13;break}throw r;case 13:return Qv("Error using user provided cache. Falling back to memory cache: "+r),e.next=16,KE(n,new BE);case 16:e.next=21;break;case 18:return Gv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,KE(n,new BE);case 21:return e.abrupt("return",n._offlineComponents);case 22:case"end":return e.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function $E(e){return ZE.apply(this,arguments)}function ZE(){return(ZE=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n._onlineComponents,e.t0){e.next=11;break}if(!n._uninitializedComponentsProvider){e.next=8;break}return Gv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,WE(n,n._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Gv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,WE(n,new qE);case 11:return e.abrupt("return",(e.t0,n._onlineComponents));case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function eI(e){return $E(e).then((function(e){return e.syncEngine}))}function tI(e){return nI.apply(this,arguments)}function nI(){return(nI=e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$E(n);case 2:return r=e.sent,i=r.eventManager,e.abrupt("return",(i.onListen=lE.bind(null,r.syncEngine),i.onUnlisten=pE.bind(null,r.syncEngine),i));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function rI(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new ty;return t.asyncQueue.enqueueAndForget(e(l)(e(h).mark((function a(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n,r,i){var a=new zE({next:function(a){t.enqueueAndForget((function(){return $b(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new ey(Zv.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new ey(Zv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new rE(Zm(n.path),a,{includeMetadataChanges:!0,xu:!0});return Yb(e,o)},e.next=3,tI(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),a)})))),i.promise}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var iI=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(e,t,n){if(!n)throw new ey(Zv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function oI(e){if(!wy.isDocumentKey(e))throw new ey(Zv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function sI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":Yv()}function uI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ey(Zv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=sI(e);throw new ey(Zv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cI=function(){"use strict";function t(n){var r;if(e(Y)(this,t),void 0===n.host){if(void 0!==n.ssl)throw new ey(Zv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.cache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new ey(Zv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new ey(Zv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}return e(X)(t,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),t}(),lI=function(){"use strict";function t(n,r,i,a){e(Y)(this,t),this._authCredentials=n,this._appCheckCredentials=r,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cI({}),this._settingsFrozen=!1}return e(X)(t,[{key:"app",get:function(){if(!this._app)throw new ey(Zv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ey(Zv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ry;switch(e.type){case"firstParty":return new sy(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ey(Zv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=iI.get(e))&&(Gv("ComponentProvider","Removing Datastore"),iI.delete(e),t.terminate()),Promise.resolve();var e,t}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=uI(e,lI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Qv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=qv.MOCK_USER;else{o=Ir(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new ey(Zv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new qv(u)}e._authCredentials=new iy(new ny(o,s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hI=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.converter=r,this._key=i,this.type="document",this.firestore=n}return e(X)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new pI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),dI=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.converter=r,this._query=i,this.type="query",this.firestore=n}return e(X)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),pI=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a){var o;return e(Y)(this,r),(o=n.call(this,t,i,Zm(a)))._path=a,o.type="collection",e(Uf)(o)}return e(X)(r,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new hI(this.firestore,null,new wy(e))}},{key:"withConverter",value:function(e){return new r(this.firestore,e,this._path)}}]),r}(dI);function vI(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(t=zr(t),1===arguments.length&&(n=fy.A()),aI("doc","path",n),t instanceof lI){var o,s=(o=my).fromString.apply(o,[n].concat(e(Wt)(i)));return oI(s),new hI(t,null,new wy(s))}var u;if(!(t instanceof hI||t instanceof pI))throw new ey(Zv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=t._path.child((u=my).fromString.apply(u,[n].concat(e(Wt)(i))));return oI(c),new hI(t.firestore,t instanceof pI?t.converter:null,new wy(c))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yI=function(){"use strict";function t(){var n=this;e(Y)(this,t),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Jw(this,"async_queue_retry"),this.qc=function(){var e=Ww();e&&Gv("AsyncQueue","Visibility state changed to "+e.visibilityState),n.Co.vo()};var r=Ww();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.qc)}return e(X)(t,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Ww();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new ty;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var t=this;return e(l)(e(h).mark((function n(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.kc.length){e.next=14;break}return e.prev=1,e.next=4,t.kc[0]();case 4:t.kc.shift(),t.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ny(e.t0)){e.next=12;break}throw e.t0;case 12:Gv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:t.kc.length>0&&t.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){var n,r;throw t.Mc=e,t.Fc=!1,Wv("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=zb.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Yv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var t=this;return e(l)(e(h).mark((function n(){var r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:return r=t.Nc,e.next=4,r;case 4:if(r!==t.Nc){e.next=1;break}case 5:case"end":return e.stop()}}),n)})))()}},{key:"jc",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.$c[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.timerId===e)return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n=!0,r=!1,i=void 0;try{for(var a,o=t.$c[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.skipDelay(),"all"!==e&&s.timerId===e)break}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),t}();var mI=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o){var s;return e(Y)(this,r),(s=n.call(this,t,i,a,o)).type="firestore",s._queue=new yI,s._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",e(Uf)(s)}return e(X)(r,[{key:"_terminate",value:function(){return this._firestoreClient||kI(this),this._firestoreClient.terminate()}}]),r}(lI);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(e){return e._firestoreClient||kI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kI(e){var t,n,r,i,a,o,s,u=e._freezeSettings(),c=(i=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",o=e._persistenceKey,new im(i,a,o,(s=u).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));e._firestoreClient=new HE(e._authCredentials,e._appCheckCredentials,e._queue,c),(null===(n=u.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=u.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.cache.kind,_offline:u.cache._offlineComponentProvider,_online:u.cache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wI=function(){"use strict";function t(n){e(Y)(this,t),this._byteString=n}return e(X)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(Yy.fromBase64String(e))}catch(e){throw new ey(Zv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(e){return new t(Yy.fromUint8Array(e))}}]),t}(),bI=function(){"use strict";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e(Y)(this,t);for(var a=0;a<r.length;++a)if(0===r[a].length)throw new ey(Zv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ky(r)}return e(X)(t,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EI=function t(n){"use strict";e(Y)(this,t),this._methodName=n},II=function(){"use strict";function t(n,r){if(e(Y)(this,t),!isFinite(n)||n<-90||n>90)throw new ey(Zv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new ey(Zv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}return e(X)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return hy(this._lat,e._lat)||hy(this._long,e._long)}}]),t}(),_I=/^__.*__$/,xI=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(X)(t,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ek(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zg(e,this.data,t,this.fieldTransforms)}}]),t}(),TI=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(X)(t,[{key:"toMutation",value:function(e,t){return new ek(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yv()}}var AI=function(){"use strict";function t(n,r,i,a,o,s){e(Y)(this,t),this.settings=n,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=a,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return e(X)(t,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return HI(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(SI(this.Yc)&&_I.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),t}(),CI=function(){"use strict";function t(n,r,i){e(Y)(this,t),this.databaseId=n,this.ignoreUndefinedProperties=r,this.serializer=i||Qw(n)}return e(X)(t,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new AI({Yc:e,methodName:t,oa:n,path:ky.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),t}();function OI(e){var t=e._freezeSettings(),n=Qw(e._databaseId);return new CI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function NI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);jI("Data must be an object, but it was:",o,r);var s,u,c=FI(r,o);if(a.merge)s=new Wy(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l=[],f=!0,h=!1,d=void 0;try{for(var p,v=a.mergeFields[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value,m=BI(t,y,n);if(!o.contains(m))throw new ey(Zv.INVALID_ARGUMENT,"Field '".concat(m,"' is specified in your field mask but missing from your input data."));KI(l,m)||l.push(m)}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}s=new Wy(l),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new xI(new bm(c),s,u)}var RI=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.apply(this,arguments)}return e(X)(r,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof r}}]),r}(EI);function DI(e,t,n){return new AI({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var LI=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i){var a;return e(Y)(this,r),(a=n.call(this,t)).ca=i,e(Uf)(a)}return e(X)(r,[{key:"_toFieldTransform",value:function(e){var t=DI(this,e,!0),n=this.ca.map((function(e){return UI(e,t)})),r=new Mg(n);return new zg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),r}(EI);function PI(e,t,n,r){var i=e.ua(1,t,n);jI("Data must be an object, but it was:",i,r);var a=[],o=bm.empty();jy(r,(function(e,r){var s=zI(t,e,n);r=zr(r);var u=i.na(s);if(r instanceof RI)a.push(s);else{var c=UI(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Wy(a);return new TI(o,s,i.fieldTransforms)}function MI(e,t,n,r,i,a){var o=e.ua(1,t,n),s=[BI(t,r,n)],u=[i];if(a.length%2!=0)throw new ey(Zv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(BI(t,a[c])),u.push(a[c+1]);for(var l=[],f=bm.empty(),h=s.length-1;h>=0;--h)if(!KI(l,s[h])){var d=s[h],p=u[h];p=zr(p);var v=o.na(d);if(p instanceof RI)l.push(d);else{var y=UI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Wy(l);return new TI(f,m,o.fieldTransforms)}function UI(e,t){if(VI(e=zr(e)))return jI("Unsupported field value:",t,e),FI(e,t);if(e instanceof EI)return function(e,t){if(!SI(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n=[],r=0,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=UI(s.value,t.sa(r));null==c&&(c={nullValue:"NULL_VALUE"}),n.push(c),r++}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=zr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Og(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=py.fromDate(e);return{timestampValue:Ck(t.serializer,n)}}if(e instanceof py){var r=new py(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ck(t.serializer,r)}}if(e instanceof II)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wI)return{bytesValue:Ok(t.serializer,e._byteString)};if(e instanceof hI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Dk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(sI(e)))}(e,t)}function FI(e,t){var n={};return By(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jy(e,(function(e,r){var i=UI(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function VI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof py||e instanceof II||e instanceof wI||e instanceof hI||e instanceof EI)}function jI(e,t,n){if(!VI(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=sI(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}var i}function BI(e,t,n){if((t=zr(t))instanceof bI)return t._internalPath;if("string"==typeof t)return zI(e,t);throw HI("Field path arguments must be of type string or ",e,!1,void 0,n)}var qI=new RegExp("[~\\*/\\[\\]]");function zI(t,n,r){if(n.search(qI)>=0)throw HI("Invalid field path (".concat(n,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,r);try{return e(Mf)(bI,e(Wt)(n.split(".")))._internalPath}catch(e){throw HI("Invalid field path (".concat(n,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,r)}}function HI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new ey(Zv.INVALID_ARGUMENT,s+e+u)}function KI(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GI=function(){"use strict";function t(n,r,i,a,o){e(Y)(this,t),this._firestore=n,this._userDataWriter=r,this._key=i,this._document=a,this._converter=o}return e(X)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new hI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new WI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(QI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),t}(),WI=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.apply(this,arguments)}return e(X)(r,[{key:"data",value:function(){return e(ps)(e(ms)(r.prototype),"data",this).call(this)}}]),r}(GI);function QI(e,t){return"string"==typeof t?zI(e,t):t instanceof bI?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JI=function(){"use strict";function t(){e(Y)(this,t)}return e(X)(t,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(em(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return jy(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new II(Zy(e.latitude),Zy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=nm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$y(e);return new py(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=my.fromString(e);Xv($k(n));var r=new am(n.get(1),n.get(3)),i=new wy(n.popFirst(5));return r.isEqual(t)||Wv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var XI=function(){"use strict";function t(n,r){e(Y)(this,t),this.hasPendingWrites=n,this.fromCache=r}return e(X)(t,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),t}(),$I=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t,i,a,o,s,u){var c;return e(Y)(this,r),(c=n.call(this,t,i,a,o,u))._firestore=t,c._firestoreImpl=t,c.metadata=s,e(Uf)(c)}return e(X)(r,[{key:"exists",value:function(){return e(ps)(e(ms)(r.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ZI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(QI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),r}(GI),ZI=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(){return e(Y)(this,r),n.apply(this,arguments)}return e(X)(r,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(ps)(e(ms)(r.prototype),"data",this).call(this,t)}}]),r}($I);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e_(e){e=uI(e,hI);var t=uI(e.firestore,mI);return rI(gI(t),e._key).then((function(n){return a_(t,e,n)}))}var t_=function(t){"use strict";e(ie)(r,t);var n=e(se)(r);function r(t){var i;return e(Y)(this,r),(i=n.call(this)).firestore=t,e(Uf)(i)}return e(X)(r,[{key:"convertBytes",value:function(e){return new wI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hI(this.firestore,null,t)}}]),r}(JI);function n_(e,t,n){e=uI(e,hI);var r=uI(e.firestore,mI),i=YI(e.converter,t,n);return i_(r,[NI(OI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kg.none())])}function r_(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];e=uI(e,hI);var o=uI(e.firestore,mI),s=OI(o);return i_(o,[("string"==typeof(t=zr(t))||t instanceof bI?MI(s,"updateDoc",e._key,t,n,i):PI(s,"updateDoc",e._key,t)).toMutation(e._key,Kg.exists(!0))])}function i_(t,n){return r=gI(t),i=n,a=new ty,r.asyncQueue.enqueueAndForget(e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=yE,e.next=3,eI(r);case 3:return e.t1=e.sent,e.t2=i,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),t)})))),a.promise;var r,i,a}function a_(e,t,n){var r=n.docs.get(t._key),i=new t_(e);return new $I(e,i,t._key,r,new XI(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LI("arrayUnion",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];zv=Fi,Di(new Hr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new mI(new ay(e.getProvider("auth-internal")),new cy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ey(Zv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new am(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Bi(Bv,"3.10.0",e),Bi(Bv,"3.10.0","esm2017")}();var s_=document.querySelector(".auth-menu__signup-button"),u_=document.querySelector(".auth-menu__login-button"),c_=document.querySelector(".menu"),l_=document.querySelector(".auth-menu"),f_=document.querySelector(".auth-menu-logout"),h_=document.querySelector(".auth-menu-logout__user-name"),d_=document.querySelector(".auth-menu-open-btn"),p_=document.querySelector(".singup-backdrop"),v_=document.querySelector(".login-backdrop");function y_(){c_.classList.toggle("is-hidden")}function m_(e){e.currentTarget===e.target&&(p_.classList.add("is-hidden"),p_.removeEventListener("click",m_))}function g_(e){"Escape"===e.code&&(p_.classList.add("is-hidden"),window.removeEventListener("keydown",g_))}function k_(e){e.currentTarget===e.target&&(v_.classList.add("is-hidden"),v_.removeEventListener("click",k_))}function w_(e){"Escape"===e.code&&(v_.classList.add("is-hidden"),window.removeEventListener("keydown",w_))}d_.addEventListener("click",(function(e){e.preventDefault(),c_.classList.contains("is-hidden")?(y_(),tx?(f_.classList.toggle("menu-is-hidden"),h_.innerHTML=ex):l_.classList.toggle("menu-is-hidden")):(tx?(f_.classList.toggle("menu-is-hidden"),h_.innerHTML=ex):l_.classList.toggle("menu-is-hidden"),setTimeout(y_,300))})),s_.addEventListener("click",(function(){l_.classList.toggle("menu-is-hidden"),setTimeout(y_,300),p_.classList.remove("is-hidden"),p_.addEventListener("click",m_),window.addEventListener("keydown",g_)})),u_.addEventListener("click",(function(){l_.classList.toggle("menu-is-hidden"),setTimeout(y_,300),v_.classList.remove("is-hidden"),v_.addEventListener("click",k_),window.addEventListener("keydown",w_)}));var b_=document.querySelector(".singup-form"),E_=b_.querySelector(".email-field"),I_=document.querySelector(".email"),__=b_.querySelector(".user-name-field"),x_=document.querySelector(".user-name"),T_=b_.querySelector(".create-password"),S_=document.querySelector(".password"),A_=b_.querySelector(".confirm-password"),C_=document.querySelector(".cPassword"),O_=document.querySelector(".singup-info-error");function N_(){if(!I_.value.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/))return E_.classList.add("invalid");E_.classList.remove("invalid")}function R_(){var e=x_.value.length;if(!(4<=e&&e<=20))return __.classList.add("invalid");__.classList.remove("invalid")}function D_(){if(!S_.value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/))return T_.classList.add("invalid");T_.classList.remove("invalid")}function L_(){if(S_.value!==C_.value||""===C_.value)return A_.classList.add("invalid");A_.classList.remove("invalid")}document.querySelectorAll(".show-hide").forEach((function(e){e.addEventListener("click",(function(){var t=e.parentElement.querySelector("input");if("password"===t.type)return e.classList.replace("bx-hide","bx-show"),t.type="text";e.classList.replace("bx-show","bx-hide"),t.type="password"}))})),b_.addEventListener("submit",(function(e){e.preventDefault(),N_(),D_(),L_(),R_(),I_.addEventListener("keyup",N_),S_.addEventListener("keyup",D_),C_.addEventListener("keyup",L_),x_.addEventListener("keyup",R_),E_.classList.contains("invalid")||T_.classList.contains("invalid")||A_.classList.contains("invalid")||__.classList.contains("invalid")||p_.classList.add("is-hidden")}));var P_,M_=document.querySelector(".login-form"),U_=M_.querySelector(".email"),F_=U_.querySelector("input"),V_=M_.querySelector(".password"),j_=V_.querySelector("input"),B_=document.querySelector(".login-info-error");function q_(){try{var e=localStorage.getItem("guest");P_=JSON.parse(e)}catch(e){console.log(e)}}function z_(e){try{P_.watched.includes(e)||(P_.watched.push(e),localStorage.setItem("guest",JSON.stringify(P_)),q_())}catch(e){console.log(e)}}function H_(e){try{P_.queue.includes(e)||(P_.queue.push(e),localStorage.setItem("guest",JSON.stringify(P_)),q_())}catch(e){console.log(e)}}M_.addEventListener("submit",(function(e){function t(){if(F_.value.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/))U_.classList.remove("error"),U_.classList.add("valid");else{U_.classList.add("error"),U_.classList.remove("valid");var e=U_.querySelector(".error-txt");""!=F_.value?e.innerText="Enter a valid email address":e.innerText="Email can't be blank"}}function n(){""==j_.value?(V_.classList.add("error"),V_.classList.remove("valid")):(V_.classList.remove("error"),V_.classList.add("valid"))}e.preventDefault(),""==F_.value?U_.classList.add("shake","error"):t(),""==j_.value?V_.classList.add("shake","error"):n(),setTimeout((function(){U_.classList.remove("shake"),V_.classList.remove("shake")}),500),F_.addEventListener("keyup",t),j_.addEventListener("keyup",n),U_.classList.contains("error")||V_.classList.contains("error")||v_.classList.add("is-hidden")}));document.querySelector("#wrongSearch"),document.querySelector("[data-input]"),K_=e(l)(e(h).mark((function t(){var n,r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.themoviedb.org/3/"+"genre/movie/list?api_key=".concat("b118f38ec77100db6763b4cc83604589"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,G_(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),t)})));var K_,G_=function(e){var t=e.genres;sessionStorage.setItem("genresIds",JSON.stringify(t))};function W_(e){var t=e.title,n=e.original_title,r=e.overview,i=e.popularity,a=e.poster_path,o=e.id,s=e.vote_average,u=e.vote_count,c=e.genres;return a||(poster="https://live.staticflickr.com/65535/52673964597_7ac974f3b4_k.jpg"),'\n \n\n      <img\n        class="movie-detail__image"\n        src="https://image.tmdb.org/t/p/w500//'.concat(a,'" srcset="https://image.tmdb.org/t/p/original/').concat(a,' 2x"\n      />\n      <div class="modal__content">\n        <h2 class="modal__title">').concat(t,'</h2>\n        <ul class="modal__list">\n          <li class="modal__item">\n            <p class="modal__item--label">Vote / Votes</p>\n            <div class="modal__item--vote">\n              <p class="modal__item--value modal__item--value--vote">\n                <span class="modal__item--average">').concat(s.toFixed(1),'</span>\n                /<span class="modal__item--count">').concat(u,'</span>\n              </p>\n            </div>\n          </li>\n          <li class="modal__item">\n            <p class="modal__item--label">Popularity</p>\n            <p class="modal__item--value">').concat(i.toFixed(1),'</p>\n          </li>\n          <li class="modal__item">\n            <p class="modal__item--label">Original Title</p>\n            <p class="modal__item--value big">').concat(n,'</p>\n          </li>\n          <li class="modal__item">\n            <p class="modal__item--label">Genre</p>\n            <p class="modal__item--value">\n  ').concat(c.map((function(e){return e.name})).join(", "),'\n</p>\n          </li>\n        </ul>\n        <div class="modal__overview">\n          <h3 class="modal__overview--about">ABOUT</h3>\n          <p class="modal__overview--overview">').concat(r,'</p>\n        </div>\n        <div class="modal__buttons">\n          <button id="watched" class="modal__button modal__button--watched" data-id="').concat(o,'">\n            Add to watched\n          </button>\n          <button id="queue" class="modal__button modal__button--queue" data-id="').concat(o,'">\n            Add to queue\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}function Q_(e){return J_.apply(this,arguments)}function J_(){return(J_=e(l)(e(h).mark((function t(n){var r,i;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.themoviedb.org/3/movie/","b118f38ec77100db6763b4cc83604589",r="".concat("https://api.themoviedb.org/3/movie/")+"".concat(n)+"?api_key="+"".concat("b118f38ec77100db6763b4cc83604589"),e.next=5,Un.get(r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var Y_=document.querySelector(".movie-info-content"),X_={openModalBtn:document.querySelector(".films-cards-set"),closeModalBtn:document.querySelector(".modal__cross-btn"),modal:document.querySelector(".backdrop")};function $_(){X_.modal.classList.toggle("is-hidden")}X_.closeModalBtn.addEventListener("click",$_);X_.modal.addEventListener("click",(function(e){e.target===X_.modal&&$_()})),window.addEventListener("keydown",(function(e){"Escape"!==e.key||X_.modal.classList.add("is-hidden")}));var Z_,ex,tx,nx=document.querySelector(".auth-menu-logout__logout-button"),rx=Vi({apiKey:"AIzaSyDWPLJhw8gzRksSLpE290fp-GQpT7FpHaY",authDomain:"moviedreamteam-filmoteka.firebaseapp.com",projectId:"moviedreamteam-filmoteka",storageBucket:"moviedreamteam-filmoteka.appspot.com",messagingSenderId:"18944533513",appId:"1:18944533513:web:be1f6bf81a57a82ccc84d8",measurementId:"G-LPXTQ4NYCN"}),ix=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji(),t=Li(e=zr(e),go);t.isInitialized()?t.getImmediate():ls(e)}(rx),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji(),t=Li(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Ls(e,{popupRedirectResolver:Ef,persistence:[gl,Qc,Yc]}),r=br("authTokenSyncURL");if(r){var i=Lf(r);qc(n,i,(function(){return i(n.currentUser)})),Bc(n,(function(e){return i(e)}))}var a=gr("auth");return a&&Hu(n,"http://".concat(a)),n}(rx)),ax=function(t,n){var r="string"==typeof t?t:n||"(default)",i=Li("object"==typeof t?t:ji(),"firestore").getImmediate({identifier:r});if(!i._initialized){var a=kr("firestore");a&&fI.apply(void 0,[i].concat(e(Wt)(a)))}return i}(rx),ox=function(){var t=e(l)(e(h).mark((function t(){var n,r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=F_.value,r=j_.value,e.prev=2,e.next=5,t=n,i=r,Dc(zr(ix),pc.credential(t,i));case 5:e.sent,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),B_.style.display="block",e.t0.code==Es.INVALID_PASSWORD?B_.innerHTML='<i class="error error-icon fas fa-exclamation-circle"></i>Wrong pasword. Try again':B_.innerHTML='<i class="error error-icon fas fa-exclamation-circle"></i>'.concat(e.t0.message),console.log(e.t0);case 13:case"end":return e.stop()}var t,i}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}();M_.addEventListener("submit",(function(e){e.preventDefault(),U_.classList.contains("error")||V_.classList.contains("error")||ox()}));var sx=function(){var t=e(l)(e(h).mark((function t(){var n,r,i,a,o;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I_.value,r=S_.value,i=x_.value,e.prev=3,e.next=6,Pc(ix,n,r);case 6:return a=e.sent,e.next=9,Vc(ix.currentUser,{displayName:i});case 9:return o=vI(ax,"users","".concat(a.user.uid)),e.next=12,n_(o,{watched:[],queue:[]});case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),O_.style.display="block",O_.innerHTML='<i class="bx bx-error-circle singup-error-icon"></i>'.concat(e.t0.message),console.log(e.t0);case 19:case"end":return e.stop()}}),t,null,[[3,14]])})));return function(){return t.apply(this,arguments)}}();b_.addEventListener("submit",(function(e){e.preventDefault(),sx(),E_.classList.contains("invalid")||T_.classList.contains("invalid")||A_.classList.contains("invalid")||__.classList.contains("invalid")||sx()}));var ux=function(){var t=e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){e?(Z_=e.uid,ex=e.displayName,tx=!0,b_.reset(),M_.reset()):(tx=!1,q_(),null===P_&&localStorage.setItem("guest",JSON.stringify({watched:[],queue:[]})))},n=void 0,r=void 0,zr(ix).onAuthStateChanged(t,n,r);case 1:case"end":return e.stop()}var t,n,r}),t)})));return function(){return t.apply(this,arguments)}}();ux();var cx=function(){var t=e(l)(e(h).mark((function t(){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(ix).signOut();case 2:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();nx.addEventListener("click",(function(){cx(),f_.classList.toggle("menu-is-hidden"),setTimeout(y_,300)}));var lx=function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r_(vI(ax,"users","".concat(Z_)),{watched:o_("".concat(n))});case 2:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fx=function(){var t=e(l)(e(h).mark((function t(n){return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r_(vI(ax,"users","".concat(Z_)),{queue:o_("".concat(n))});case 2:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),hx=function(){var t=e(l)(e(h).mark((function t(){var n,r;return e(h).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e_(vI(ax,"users","".concat(Z_)));case 2:if(!(n=e.sent).exists()){e.next=8;break}return r=n.data(),e.abrupt("return",r);case 8:console.log("No such document!");case 9:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function dx(e){tx?lx(e):z_(e)}function px(e){tx?fx(e):H_(e)}function vx(){var e=Y_.querySelector("#watched"),t=Y_.querySelector("#queue");e.addEventListener("click",(function(e){dx(e.currentTarget.dataset.id)})),t.addEventListener("click",(function(e){px(e.currentTarget.dataset.id)}))}var yx,mx=document.querySelector(".films-cards-set");document.querySelector("[data-watched]").addEventListener("click",(function(){tx?hx().then((function(e){yx=e,mx.innerHTML="",jn(yx.watched).then((function(e){mx.insertAdjacentHTML("beforeend",c(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Q_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){Y_.innerHTML=W_(e),$_(),vx()})).catch((function(e){throw new Error(e)}))}))}))}))})):(q_(),mx.innerHTML="",jn(P_.watched).then((function(e){mx.insertAdjacentHTML("beforeend",c(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Q_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){Y_.innerHTML=W_(e),$_(),vx()})).catch((function(e){throw new Error(e)}))}))}))})))})),document.querySelector("[data-queue]").addEventListener("click",(function(){tx?hx().then((function(e){yx=e,mx.innerHTML="",jn(yx.queue).then((function(e){mx.insertAdjacentHTML("beforeend",c(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Q_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){Y_.innerHTML=W_(e),$_(),vx()})).catch((function(e){throw new Error(e)}))}))}))}))})):(q_(),mx.innerHTML="",jn(P_.queue).then((function(e){mx.insertAdjacentHTML("beforeend",c(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Q_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){Y_.innerHTML=W_(e),$_(),vx()})).catch((function(e){throw new Error(e)}))}))}))})))}));var gx=document.querySelector(".backdrop--flex");document.querySelector(".footer__font").addEventListener("click",(function(e){e.preventDefault(),gx.classList.remove("is-hidden")}))}();
//# sourceMappingURL=library.1a9d3473.js.map
