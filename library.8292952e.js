!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=i),i.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}})),i.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),i.register("gD1JV",(function(e,t){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return n(e,t)}})),i.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),i.register("fVNic",(function(e,t){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return n(e)}})),i.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==r.default(t)&&"function"!=typeof t?n.default(e):t};var n=a(i("ds8z5")),r=a(i("l5bVx"));function a(e){return e&&e.__esModule?e:{default:e}}})),i.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),i.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),i.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),i.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=i("8NIkP"))&&n.__esModule?n:{default:n}})),i.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}})),i.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return r.default(e)};var n,r=(n=i("8NIkP"))&&n.__esModule?n:{default:n}})),i.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),i.register("hKHmD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}})),i.register("ge8co",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){return o.apply(null,arguments)};var n,r=(n=i("gD1JV"))&&n.__esModule?n:{default:n};function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=a()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r.default(a,n.prototype),a}).apply(null,arguments)}})),i.register("cZGw3",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}})),i.register("2mz0K",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r.default(e)););return e};var n,r=(n=i("fVNic"))&&n.__esModule?n:{default:n}})),window.addEventListener("load",(function(){var e=document.querySelector(".loader");e.classList.add("loader-hidden"),e.addEventListener("transitionend",(function(){}))}));var a=document.querySelector("body"),o=document.querySelector(".fa-regular"),s=document.querySelector("#toggle__checkbox"),u=document.querySelector(".footer");s.addEventListener("click",(function(){a.classList.toggle("dark__theme"),o.classList.toggle("fa-sun"),o.classList.toggle("fa-moon"),u.classList.toggle("dark__theme")}));var c={};c=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u=void 0;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=e.trim(),!0===t?n.children:n.firstChild},i=function(e,t){var n=e.children;return 1===n.length&&n[0].tagName===t},a=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};n.visible=a,n.create=function(e,t){var n=function(e,t){var n=r('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),a=n.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return a.appendChild(e)}));var o=i(a,"IMG"),s=i(a,"VIDEO"),u=i(a,"IFRAME");return!0===o&&n.classList.add("basicLightbox--img"),!0===s&&n.classList.add("basicLightbox--video"),!0===u&&n.classList.add("basicLightbox--iframe"),n}(e=function(e){var t="string"==typeof e,n=e instanceof HTMLElement==1;if(!1===t&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(r(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),o=function(e){return!1!==t.onClose(s)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===a(e)||e.parentElement.removeChild(e),t()}),410),!0}(n,(function(){if("function"==typeof e)return e(s)}))};!0===t.closable&&n.addEventListener("click",(function(e){e.target===n&&o()}));var s={element:function(){return n},visible:function(){return a(n)},show:function(e){return!1!==t.onShow(s)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(n,(function(){if("function"==typeof e)return e(s)}))},close:o};return s}},{}]},{},[1])(1);var l=document.querySelector(".footer__font");l.addEventListener("click",(function(e){e.preventDefault();var t=c.create('\n  <iframe src="https://player.vimeo.com/video/820849980?h=af82c37f95&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;" title="filmoteka"></iframe>\n  ',{onClose:function(e){l.removeEventListener("keydown",n)}});t.show();var n=function(e){"Escape"===e.code&&t.close()};l.addEventListener("keydown",n)}));document.querySelector(".films-cards-set"),document.querySelector("#wrongSearch");var f=function(e){return e.map((function(e){var t;return t=null===e.poster_path?"https://www.more-kino.info/drama/hide-2/hide-2.jpg":"https://image.tmdb.org/t/p/w500/".concat(e.poster_path),'\n        <div class="film-card" data-id="'.concat(e.id,'">\n        <img class="film-img" src="').concat(t,'" alt="').concat(e.title,'" loading="lazy" /> \n        <div class="info">\n        <p class="info-title">').concat(e.original_title,'</p>\n        <p class="info-text">').concat(e.genres.map((function(e){return e.name})).join(" , ")," | ").concat(e.release_date.substring(0,4),' <span class="info-rating">').concat(e.vote_average,"</span></p>\n        </div>\n        </div>\n        ")})).join(" ")},h={};function d(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)}))}};var p={},v=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(C([])));b&&b!==n&&r.call(b,a)&&(k=b);var E=g.prototype=y.prototype=Object.create(k);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return m.prototype=g,u(E,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},I(_.prototype),u(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(p);try{regeneratorRuntime=v}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}var y=i("l5bVx");function m(e,t){return function(){return e.apply(t,arguments)}}var g,k=Object.prototype.toString,w=Object.getPrototypeOf,b=(g=Object.create(null),function(e){var t=k.call(e);return g[t]||(g[t]=t.slice(8,-1).toLowerCase())}),E=function(e){return e=e.toLowerCase(),function(t){return b(t)===e}},I=function(t){return function(n){return(void 0===n?"undefined":e(y)(n))===t}},_=Array.isArray,x=I("undefined");var T=E("ArrayBuffer");var S=I("string"),A=I("function"),C=I("number"),O=function(e){return null!==e&&"object"==typeof e},N=function(e){if("object"!==b(e))return!1;var t=w(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},R=E("Date"),D=E("File"),L=E("Blob"),P=E("FileList"),M=E("URLSearchParams");function U(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!=e)if("object"!=typeof e&&(e=[e]),_(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var s,u=o?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(n=0;n<c;n++)s=u[n],t.call(null,e[s],s,e)}}function F(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t,j=function(e){return!x(e)&&e!==V};var B,q,z=(B="undefined"!=typeof Uint8Array&&w(Uint8Array),function(e){return B&&e instanceof B}),H=E("HTMLFormElement"),K=(q=Object.prototype.hasOwnProperty,function(e,t){return q.call(e,t)}),G=E("RegExp"),W=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};U(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Q="abcdefghijklmnopqrstuvwxyz",J="0123456789",Y={DIGIT:J,ALPHA:Q,ALPHA_DIGIT:Q+Q.toUpperCase()+J};var X={isArray:_,isArrayBuffer:T,isBuffer:function(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&A(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||A(e.append)&&("formdata"===(t=b(e))||"object"===t&&A(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&T(e.buffer)},isString:S,isNumber:C,isBoolean:function(e){return!0===e||!1===e},isObject:O,isPlainObject:N,isUndefined:x,isDate:R,isFile:D,isBlob:L,isRegExp:G,isFunction:A,isStream:function(e){return O(e)&&A(e.pipe)},isURLSearchParams:M,isTypedArray:z,isFileList:P,forEach:U,merge:function e(){for(var t=(j(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&F(n,i)||i;N(n[a])&&N(r)?n[a]=e(n[a],r):N(r)?n[a]=e({},r):_(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&U(arguments[i],r);return n},extend:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys;return U(t,(function(t,r){n&&A(t)?e[r]=m(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&w(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:b,kindOfTest:E,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(_(e))return e;var t=e.length;if(!C(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:H,hasOwnProperty:K,hasOwnProp:K,reduceDescriptors:W,freezeMethods:function(e){W(e,(function(t,n){if(A(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];A(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return _(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:F,global:V,isContextDefined:j,ALPHABET:Y,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&A(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10),n=function(e,r){if(O(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;var i=_(e)?[]:{};return U(e,(function(e,t){var a=n(e,r+1);!x(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)}},$={};Object.defineProperty($,"__esModule",{value:!0}),$.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var Z={};function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=function(e,t,n){t&&ee(e.prototype,t);n&&ee(e,n);return e},X.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ne=te.prototype,re={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){re[e]={value:e}})),Object.defineProperties(te,re),Object.defineProperty(ne,"isAxiosError",{value:!0}),te.from=function(e,t,n,r,i,a){var o=Object.create(ne);return X.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),te.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var ie=te,ae=i("ds8z5"),oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue.default(e,t)};var se,ue=(se=i("gD1JV"))&&se.__esModule?se:{default:se};y=i("l5bVx");var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=function(e){var t=de.default();return function(){var n,r=pe.default(e);if(t){var i=pe.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ve.default(this,n)}};var le,fe,he,de=ye(i("aTHs7")),pe=ye(i("fVNic")),ve=ye(i("jmhxu"));function ye(e){return e&&e.__esModule?e:{default:e}}fe=function(e){var t,n,r=xe(e),i=r[0],a=r[1],o=new be(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),s=0,u=a>0?i-4:i;for(n=0;n<u;n+=4)t=we[e.charCodeAt(n)]<<18|we[e.charCodeAt(n+1)]<<12|we[e.charCodeAt(n+2)]<<6|we[e.charCodeAt(n+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===a&&(t=we[e.charCodeAt(n)]<<2|we[e.charCodeAt(n+1)]>>4,o[s++]=255&t);1===a&&(t=we[e.charCodeAt(n)]<<10|we[e.charCodeAt(n+1)]<<4|we[e.charCodeAt(n+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},he=function(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,s=n-r;o<s;o+=a)i.push(Te(e,o,o+a>s?s:o+a));1===r?(t=e[n-1],i.push(ke[t>>2]+ke[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(ke[t>>10]+ke[t>>4&63]+ke[t<<2&63]+"="));return i.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var me,ge,ke=[],we=[],be="undefined"!=typeof Uint8Array?Uint8Array:Array,Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ie=0,_e=Ee.length;Ie<_e;++Ie)ke[Ie]=Ee[Ie],we[Ee.charCodeAt(Ie)]=Ie;function xe(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Te(e,t,n){for(var r,i,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(ke[(i=r)>>18&63]+ke[i>>12&63]+ke[i>>6&63]+ke[63&i]);return a.join("")}we["-".charCodeAt(0)]=62,we["_".charCodeAt(0)]=63,me=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},ge=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*v};var Se="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;le=Oe;var Ae=2147483647;function Ce(e){if(e>Ae)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,Oe.prototype),t}function Oe(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return De(e)}return Ne(e,t,n)}function Ne(t,n,r){if("string"==typeof t)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Oe.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|Ue(e,t),r=Ce(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(t,n);if(ArrayBuffer.isView(t))return function(e){if(mt(e,Uint8Array)){var t=new Uint8Array(e);return Pe(t.buffer,t.byteOffset,t.byteLength)}return Le(e)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(y)(t)));if(mt(t,ArrayBuffer)||t&&mt(t.buffer,ArrayBuffer))return Pe(t,n,r);if("undefined"!=typeof SharedArrayBuffer&&(mt(t,SharedArrayBuffer)||t&&mt(t.buffer,SharedArrayBuffer)))return Pe(t,n,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return Oe.from(i,n,r);var a=function(e){if(Oe.isBuffer(e)){var t=0|Me(e.length),n=Ce(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||gt(e.length)?Ce(0):Le(e);if("Buffer"===e.type&&Array.isArray(e.data))return Le(e.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Oe.from(t[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(y)(t)))}function Re(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function De(e){return Re(e),Ce(e<0?0:0|Me(e))}function Le(e){for(var t=e.length<0?0:0|Me(e.length),n=Ce(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function Pe(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,Oe.prototype),r}function Me(e){if(e>=Ae)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ae.toString(16)+" bytes");return 0|e}function Ue(t,n){if(Oe.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||mt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===t?"undefined":e(y)(t)));var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return pt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return vt(t).length;default:if(a)return i?-1:pt(t).length;n=(""+n).toLowerCase(),a=!0}}function Fe(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return $e(this,t,n);case"utf8":case"utf-8":return Qe(this,t,n);case"ascii":return Ye(this,t,n);case"latin1":case"binary":return Xe(this,t,n);case"base64":return We(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ze(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Ve(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function je(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),gt(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Oe.from(t,r)),Oe.isBuffer(t))return 0===t.length?-1:Be(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Be(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Be(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function qe(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(gt(s))return a;e[n+a]=s}return a}function ze(e,t,n,r){return yt(pt(t,e.length-n),e,n,r)}function He(e,t,n,r){return yt(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Ke(e,t,n,r){return yt(vt(t),e,n,r)}function Ge(e,t,n,r){return yt(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function We(e,t,n){return 0===t&&n===e.length?he(e):he(e.slice(t,n))}function Qe(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(u=e[i+1]))&&(f=(31&a)<<6|63&u)>127&&(o=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){var t=e.length;if(t<=Je)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Je));return n}(r)}Oe.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Oe.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Oe.prototype,"parent",{enumerable:!0,get:function(){if(Oe.isBuffer(this))return this.buffer}}),Object.defineProperty(Oe.prototype,"offset",{enumerable:!0,get:function(){if(Oe.isBuffer(this))return this.byteOffset}}),Oe.poolSize=8192,Oe.from=function(e,t,n){return Ne(e,t,n)},Object.setPrototypeOf(Oe.prototype,Uint8Array.prototype),Object.setPrototypeOf(Oe,Uint8Array),Oe.alloc=function(e,t,n){return function(e,t,n){return Re(e),e<=0?Ce(e):void 0!==t?"string"==typeof n?Ce(e).fill(t,n):Ce(e).fill(t):Ce(e)}(e,t,n)},Oe.allocUnsafe=function(e){return De(e)},Oe.allocUnsafeSlow=function(e){return De(e)},Oe.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Oe.prototype},Oe.compare=function(e,t){if(mt(e,Uint8Array)&&(e=Oe.from(e,e.offset,e.byteLength)),mt(t,Uint8Array)&&(t=Oe.from(t,t.offset,t.byteLength)),!Oe.isBuffer(e)||!Oe.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Oe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Oe.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Oe.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Oe.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(mt(a,Uint8Array))i+a.length>r.length?(Oe.isBuffer(a)||(a=Oe.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!Oe.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},Oe.byteLength=Ue,Oe.prototype._isBuffer=!0,Oe.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ve(this,t,t+1);return this},Oe.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ve(this,t,t+3),Ve(this,t+1,t+2);return this},Oe.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ve(this,t,t+7),Ve(this,t+1,t+6),Ve(this,t+2,t+5),Ve(this,t+3,t+4);return this},Oe.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?Qe(this,0,e):Fe.apply(this,arguments)},Oe.prototype.toLocaleString=Oe.prototype.toString,Oe.prototype.equals=function(e){if(!Oe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Oe.compare(this,e)},Oe.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},Se&&(Oe.prototype[Se]=Oe.prototype.inspect),Oe.prototype.compare=function(t,n,r,i,a){if(mt(t,Uint8Array)&&(t=Oe.from(t,t.offset,t.byteLength)),!Oe.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===t?"undefined":e(y)(t)));if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),n<0||r>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&n>=r)return 0;if(i>=a)return-1;if(n>=r)return 1;if(this===t)return 0;for(var o=(a>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(o,s),c=this.slice(i,a),l=t.slice(n,r),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},Oe.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Oe.prototype.indexOf=function(e,t,n){return je(this,e,t,n,!0)},Oe.prototype.lastIndexOf=function(e,t,n){return je(this,e,t,n,!1)},Oe.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return qe(this,e,t,n);case"utf8":case"utf-8":return ze(this,e,t,n);case"ascii":case"latin1":case"binary":return He(this,e,t,n);case"base64":return Ke(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},Oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Je=4096;function Ye(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Xe(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function $e(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=kt[e[a]];return i}function Ze(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function et(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function tt(e,t,n,r,i,a){if(!Oe.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function nt(e,t,n,r,i){lt(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function rt(e,t,n,r,i){lt(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function it(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function at(e,t,n,r,i){return t=+t,n>>>=0,i||it(e,0,n,4),ge(e,t,n,r,23,4),n+4}function ot(e,t,n,r,i){return t=+t,n>>>=0,i||it(e,0,n,8),ge(e,t,n,r,52,8),n+8}Oe.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,Oe.prototype),r},Oe.prototype.readUintLE=Oe.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||et(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},Oe.prototype.readUintBE=Oe.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||et(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Oe.prototype.readUint8=Oe.prototype.readUInt8=function(e,t){return e>>>=0,t||et(e,1,this.length),this[e]},Oe.prototype.readUint16LE=Oe.prototype.readUInt16LE=function(e,t){return e>>>=0,t||et(e,2,this.length),this[e]|this[e+1]<<8},Oe.prototype.readUint16BE=Oe.prototype.readUInt16BE=function(e,t){return e>>>=0,t||et(e,2,this.length),this[e]<<8|this[e+1]},Oe.prototype.readUint32LE=Oe.prototype.readUInt32LE=function(e,t){return e>>>=0,t||et(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Oe.prototype.readUint32BE=Oe.prototype.readUInt32BE=function(e,t){return e>>>=0,t||et(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Oe.prototype.readBigUInt64LE=wt((function(e){ft(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ht(e,this.length-8);var r=t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24),i=this[++e]+256*this[++e]+65536*this[++e]+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),Oe.prototype.readBigUInt64BE=wt((function(e){ft(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ht(e,this.length-8);var r=t*Math.pow(2,24)+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),Oe.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||et(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Oe.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||et(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},Oe.prototype.readInt8=function(e,t){return e>>>=0,t||et(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Oe.prototype.readInt16LE=function(e,t){e>>>=0,t||et(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Oe.prototype.readInt16BE=function(e,t){e>>>=0,t||et(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Oe.prototype.readInt32LE=function(e,t){return e>>>=0,t||et(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Oe.prototype.readInt32BE=function(e,t){return e>>>=0,t||et(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Oe.prototype.readBigInt64LE=wt((function(e){ft(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ht(e,this.length-8);var r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24))})),Oe.prototype.readBigInt64BE=wt((function(e){ft(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ht(e,this.length-8);var r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n)})),Oe.prototype.readFloatLE=function(e,t){return e>>>=0,t||et(e,4,this.length),me(this,e,!0,23,4)},Oe.prototype.readFloatBE=function(e,t){return e>>>=0,t||et(e,4,this.length),me(this,e,!1,23,4)},Oe.prototype.readDoubleLE=function(e,t){return e>>>=0,t||et(e,8,this.length),me(this,e,!0,52,8)},Oe.prototype.readDoubleBE=function(e,t){return e>>>=0,t||et(e,8,this.length),me(this,e,!1,52,8)},Oe.prototype.writeUintLE=Oe.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||tt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},Oe.prototype.writeUintBE=Oe.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||tt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},Oe.prototype.writeUint8=Oe.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,1,255,0),this[t]=255&e,t+1},Oe.prototype.writeUint16LE=Oe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Oe.prototype.writeUint16BE=Oe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Oe.prototype.writeUint32LE=Oe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Oe.prototype.writeUint32BE=Oe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Oe.prototype.writeBigUInt64LE=wt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return nt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Oe.prototype.writeBigUInt64BE=wt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return rt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Oe.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);tt(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Oe.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);tt(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Oe.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Oe.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Oe.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Oe.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Oe.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||tt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Oe.prototype.writeBigInt64LE=wt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return nt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Oe.prototype.writeBigInt64BE=wt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return rt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Oe.prototype.writeFloatLE=function(e,t,n){return at(this,e,t,!0,n)},Oe.prototype.writeFloatBE=function(e,t,n){return at(this,e,t,!1,n)},Oe.prototype.writeDoubleLE=function(e,t,n){return ot(this,e,t,!0,n)},Oe.prototype.writeDoubleBE=function(e,t,n){return ot(this,e,t,!1,n)},Oe.prototype.copy=function(e,t,n,r){if(!Oe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},Oe.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Oe.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=Oe.isBuffer(e)?e:Oe.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var st={};function ut(t,n,r){st[t]=function(r){e(oe)(a,r);var i=e(ce)(a);function a(){var r;return e($)(this,a),r=i.call(this),Object.defineProperty(e(ae)(r),"message",{value:n.apply(e(ae)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return e(Z)(a,[{key:"code",get:function(){return t},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),a}(r)}function ct(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function lt(t,n,r,i,a,o){if(t>r||t<n){var s,u="bigint"===(void 0===n?"undefined":e(y)(n))?"n":"";throw s=o>3?0===n||n===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(o+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(o+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(u):">= ".concat(n).concat(u," and <= ").concat(r).concat(u),new st.ERR_OUT_OF_RANGE("value",s,t)}!function(e,t,n){ft(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||ht(t,e.length-(n+1))}(i,a,o)}function ft(e,t){if("number"!=typeof e)throw new st.ERR_INVALID_ARG_TYPE(t,"number",e)}function ht(e,t,n){if(Math.floor(e)!==e)throw ft(e,n),new st.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new st.ERR_BUFFER_OUT_OF_BOUNDS;throw new st.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}ut("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),ut("ERR_INVALID_ARG_TYPE",(function(t,n){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(void 0===n?"undefined":e(y)(n))}),TypeError),ut("ERR_OUT_OF_RANGE",(function(t,n,r){var i='The value of "'.concat(t,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=ct(String(r)):"bigint"===(void 0===r?"undefined":e(y)(r))&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=ct(a)),a+="n"),i+=" It must be ".concat(n,". Received ").concat(a)}),RangeError);var dt=/[^+/0-9A-Za-z-_]/g;function pt(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function vt(e){return fe(function(e){if((e=(e=e.split("=")[0]).trim().replace(dt,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function yt(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function mt(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function gt(e){return e!=e}var kt=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function wt(e){return"undefined"==typeof BigInt?bt:e}function bt(){throw new Error("BigInt not supported")}var Et=le;function It(e){return X.isPlainObject(e)||X.isArray(e)}function _t(e){return X.endsWith(e,"[]")?e.slice(0,-2):e}function xt(e,t,n){return e?e.concat(t).map((function(e,t){return e=_t(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Tt=X.toFlatObject(X,{},null,(function(e){return/^is[A-Z]/.test(e)}));var St=function(e,t,n){if(!X.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!X.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&X.isSpecCompliantForm(t);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(X.isDate(e))return e.toISOString();if(!s&&X.isBlob(e))throw new ie("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(e)||X.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Et.from(e):e}function c(e,n,i){var s=e;if(e&&!i&&"object"==typeof e)if(X.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(X.isArray(e)&&function(e){return X.isArray(e)&&!e.some(It)}(e)||(X.isFileList(e)||X.endsWith(n,"[]"))&&(s=X.toArray(e)))return n=_t(n),s.forEach((function(e,r){!X.isUndefined(e)&&null!==e&&t.append(!0===o?xt([n],r,a):null===o?n:n+"[]",u(e))})),!1;return!!It(e)||(t.append(xt(i,n,a),u(e)),!1)}var l=[],f=Object.assign(Tt,{defaultVisitor:c,convertValue:u,isVisitable:It});if(!X.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!X.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),X.forEach(n,(function(n,a){!0===(!(X.isUndefined(n)||null===n)&&i.call(t,n,X.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function At(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ct(e,t){this._pairs=[],e&&St(e,this,t)}var Ot=Ct.prototype;Ot.append=function(e,t){this._pairs.push([e,t])},Ot.toString=function(e){var t=e?function(t){return e.call(this,t,At)}:At;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Nt=Ct;function Rt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dt(e,t,n){if(!t)return e;var r,i=n&&n.encode||Rt,a=n&&n.serialize;if(r=a?a(t,n):X.isURLSearchParams(t)?t.toString():new Nt(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Lt,Pt=function(){function t(){e($)(this,t),this.handlers=[]}return e(Z)(t,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){X.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),t}(),Mt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ut={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Nt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(Lt=navigator.product)&&"NativeScript"!==Lt&&"NS"!==Lt)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Ft(e,t){return St(e,new Ut.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Ut.isNode&&X.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}var Vt=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&X.isArray(r)?r.length:a,s?(X.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&X.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&X.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(X.isFormData(e)&&X.isFunction(e.entries)){var n={};return X.forEachEntry(e,(function(e,r){t(function(e){return X.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},jt={"Content-Type":void 0};var Bt={transitional:Mt,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=X.isObject(e);if(a&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return i&&i?JSON.stringify(Vt(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ft(e,this.formSerializer).toString();if((n=X.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return St(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(X.isString(e))try{return(t||JSON.parse)(e),X.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Bt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&X.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw ie.from(e,ie.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};X.forEach(["delete","get","head"],(function(e){Bt.headers[e]={}})),X.forEach(["post","put","patch"],(function(e){Bt.headers[e]=X.merge(jt)}));var qt=Bt,zt={};Object.defineProperty(zt,"__esModule",{value:!0}),zt.default=function(e,t){return Ht.default(e)||Kt.default(e,t)||Wt.default(e,t)||Gt.default()};var Ht=Qt(i("8slrw")),Kt=Qt(i("7AJDX")),Gt=Qt(i("ifqQW")),Wt=Qt(i("auk6i"));function Qt(e){return e&&e.__esModule?e:{default:e}}var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.default=function(e){return Yt.default(e)||Xt.default(e)||Zt.default(e)||$t.default()};var Yt=en(i("kMC0W")),Xt=en(i("7AJDX")),$t=en(i("8CtQK")),Zt=en(i("auk6i"));function en(e){return e&&e.__esModule?e:{default:e}}var tn=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nn=Symbol("internals");function rn(e){return e&&String(e).trim().toLowerCase()}function an(e){return!1===e||null==e?e:X.isArray(e)?e.map(an):String(e)}function on(e,t,n,r,i){return X.isFunction(r)?r.call(this,t,n):(i&&(t=n),X.isString(t)?X.isString(r)?-1!==t.indexOf(r):X.isRegExp(r)?r.test(t):void 0:void 0)}var sn=Symbol.iterator,un=Symbol.toStringTag,cn=function(){function t(n){e($)(this,t),n&&this.set(n)}return e(Z)(t,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=rn(t);if(!i)throw new Error("header name must be a non-empty string");var a=X.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=an(e))}var a,o,s,u,c,l=function(e,t){return X.forEach(e,(function(e,n){return i(e,n,t)}))};return X.isPlainObject(e)||e instanceof this.constructor?l(e,t):X.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?l((c={},(a=e)&&a.split("\n").forEach((function(e){u=e.indexOf(":"),o=e.substring(0,u).trim().toLowerCase(),s=e.substring(u+1).trim(),!o||c[o]&&tn[o]||("set-cookie"===o?c[o]?c[o].push(s):c[o]=[s]:c[o]=c[o]?c[o]+", "+s:s)})),c),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=rn(e)){var n=X.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(X.isFunction(t))return t.call(this,r,n);if(X.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=rn(e)){var n=X.findKey(this,e);return!(!n||void 0===this[n]||t&&!on(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=rn(e)){var i=X.findKey(n,e);!i||t&&!on(0,n[i],i,t)||(delete n[i],r=!0)}}return X.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!on(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return X.forEach(this,(function(r,i){var a=X.findKey(n,i);if(a)return t[a]=an(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=an(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i;return(i=this.constructor).concat.apply(i,[this].concat(e(Jt)(n)))}},{key:"toJSON",value:function(e){var t=Object.create(null);return X.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&X.isArray(n)?n.join(", "):n)})),t}},{key:sn,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var n=e(zt)(t,2);return n[0]+": "+n[1]})).join("\n")}},{key:un,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=new this(e);return n.forEach((function(e){return i.set(e)})),i}},{key:"accessor",value:function(e){var t=(this[nn]=this[nn]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=rn(e);t[r]||(!function(e,t){var n=X.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return X.isArray(e)?e.forEach(r):r(e),this}}]),t}();cn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),X.freezeMethods(cn.prototype),X.freezeMethods(cn);var ln=cn;function fn(e,t){var n=this||qt,r=t||n,i=ln.from(r.headers),a=r.data;return X.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function hn(e){return!(!e||!e.__CANCEL__)}function dn(e,t,n){ie.call(this,null==e?"canceled":e,ie.ERR_CANCELED,t,n),this.name="CanceledError"}X.inherits(dn,ie,{__CANCEL__:!0});var pn=dn;function vn(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var yn=Ut.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),X.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),X.isString(r)&&o.push("path="+r),X.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function mn(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function gn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?mn(e,t):t}var kn=Ut.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=X.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var wn=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=i[o];n||(n=u),r[a]=s,i[a]=u;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var h=c&&u-c;return h?Math.round(1e3*f/h):void 0}}};function bn(e,t){var n=0,r=wn(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var En={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=ln.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}X.isFormData(i)&&(Ut.isStandardBrowserEnv||Ut.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=gn(e.baseURL,e.url);function h(){if(u){var r=ln.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());vn((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),Dt(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new ie("Request aborted",ie.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new ie("Network Error",ie.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Mt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ie(t,r.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,u)),u=null},Ut.isStandardBrowserEnv){var d=(e.withCredentials||kn(f))&&e.xsrfCookieName&&yn.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in u&&X.forEach(a.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),X.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",bn(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",bn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new pn(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p,v=(p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f))&&p[1]||"";v&&-1===Ut.protocols.indexOf(v)?n(new ie("Unsupported protocol "+v+":",ie.ERR_BAD_REQUEST,e)):u.send(i||null)}))}};X.forEach(En,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var In={getAdapter:function(e){for(var t,n,r=(e=X.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=X.isString(t)?En[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new ie("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(X.hasOwnProp(En,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!X.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:En};function _n(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pn(null,e)}function xn(e){return _n(e),e.headers=ln.from(e.headers),e.data=fn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),In.getAdapter(e.adapter||qt.adapter)(e).then((function(t){return _n(e),t.data=fn.call(e,e.transformResponse,t),t.headers=ln.from(t.headers),t}),(function(t){return hn(t)||(_n(e),t&&t.response&&(t.response.data=fn.call(e,e.transformResponse,t.response),t.response.headers=ln.from(t.response.headers))),Promise.reject(t)}))}var Tn=function(e){return e instanceof ln?e.toJSON():e};function Sn(e,t){t=t||{};var n={};function r(e,t,n){return X.isPlainObject(e)&&X.isPlainObject(t)?X.merge.call({caseless:n},e,t):X.isPlainObject(t)?X.merge({},t):X.isArray(t)?t.slice():t}function i(e,t,n){return X.isUndefined(t)?X.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!X.isUndefined(t))return r(void 0,t)}function o(e,t){return X.isUndefined(t)?X.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(Tn(e),Tn(t),!0)}};return X.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var a=u[r]||i,o=a(e[r],t[r],r);X.isUndefined(o)&&a!==s||(n[r]=o)})),n}y=i("l5bVx");var An="1.3.6",Cn={};["object","boolean","number","function","string","symbol"].forEach((function(t,n){Cn[t]=function(r){return(void 0===r?"undefined":e(y)(r))===t||"a"+(n<1?"n ":" ")+t}}));var On={};Cn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.3.6] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new ie(r(i," has been removed"+(t?" in "+t:"")),ie.ERR_DEPRECATED);return t&&!On[i]&&(On[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Nn={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],u=void 0===s||o(s,a,e);if(!0!==u)throw new ie("option "+a+" must be "+u,ie.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ie("Unknown option "+a,ie.ERR_BAD_OPTION)}},validators:Cn},Rn=Nn.validators,Dn=function(){function t(n){e($)(this,t),this.defaults=n,this.interceptors={request:new Pt,response:new Pt}}return e(Z)(t,[{key:"request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n,r=(t=Sn(this.defaults,t)).transitional,i=t.paramsSerializer,a=t.headers;void 0!==r&&Nn.assertOptions(r,{silentJSONParsing:Rn.transitional(Rn.boolean),forcedJSONParsing:Rn.transitional(Rn.boolean),clarifyTimeoutError:Rn.transitional(Rn.boolean)},!1),null!=i&&(X.isFunction(i)?t.paramsSerializer={serialize:i}:Nn.assertOptions(i,{encode:Rn.function,serialize:Rn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=a&&X.merge(a.common,a[t.method]))&&X.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=ln.concat(n,a);var o=[],s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var l,f=0;if(!s){var h=[xn.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,c),l=h.length,u=Promise.resolve(t);f<l;)u=u.then(h[f++],h[f++]);return u}l=o.length;var d=t;for(f=0;f<l;){var p=o[f++],v=o[f++];try{d=p(d)}catch(e){v.call(this,e);break}}try{u=xn.call(this,d)}catch(e){return Promise.reject(e)}for(f=0,l=c.length;f<l;)u=u.then(c[f++],c[f++]);return u}},{key:"getUri",value:function(e){return Dt(gn((e=Sn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),t}();X.forEach(["delete","get","head","options"],(function(e){Dn.prototype[e]=function(t,n){return this.request(Sn(n||{},{method:e,url:t,data:(n||{}).data}))}})),X.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Sn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Dn.prototype[e]=t(),Dn.prototype[e+"Form"]=t(!0)}));var Ln=Dn,Pn=function(){function t(n){if(e($)(this,t),"function"!=typeof n)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var i=this;this.promise.then((function(e){if(i._listeners){for(var t=i._listeners.length;t-- >0;)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},n((function(e,t,n){i.reason||(i.reason=new pn(e,t,n),r(i.reason))}))}return e(Z)(t,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}]),t}();var Mn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mn).forEach((function(t){var n=e(zt)(t,2),r=n[0],i=n[1];Mn[i]=r}));var Un=Mn;var Fn=function e(t){var n=new Ln(t),r=m(Ln.prototype.request,n);return X.extend(r,Ln.prototype,n,{allOwnKeys:!0}),X.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Sn(t,n))},r}(qt);Fn.Axios=Ln,Fn.CanceledError=pn,Fn.CancelToken=Pn,Fn.isCancel=hn,Fn.VERSION=An,Fn.toFormData=St,Fn.AxiosError=ie,Fn.Cancel=Fn.CanceledError,Fn.all=function(e){return Promise.all(e)},Fn.spread=function(e){return function(t){return e.apply(null,t)}},Fn.isAxiosError=function(e){return X.isObject(e)&&!0===e.isAxiosError},Fn.mergeConfig=Sn,Fn.AxiosHeaders=ln,Fn.formToJSON=function(e){return Vt(X.isHTMLForm(e)?new FormData(e):e)},Fn.HttpStatusCode=Un,Fn.default=Fn;var Vn=Fn,jn=(Vn.Axios,Vn.AxiosError,Vn.CanceledError,Vn.isCancel,Vn.CancelToken,Vn.VERSION,Vn.all,Vn.Cancel,Vn.isAxiosError,Vn.spread,Vn.toFormData,Vn.AxiosHeaders,Vn.HttpStatusCode,Vn.formToJSON,Vn.mergeConfig,"https://api.themoviedb.org/3/"),Bn="b118f38ec77100db6763b4cc83604589";function qn(e){return zn.apply(this,arguments)}function zn(){return zn=e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map(function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vn.get("".concat(jn,"/movie/").concat(n,"?api_key=").concat(Bn,"&language=en-US")).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=3,Promise.all(r);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)}))),zn.apply(this,arguments)}var Hn=i("hKHmD"),Kn=(ae=i("ds8z5"),{});Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.default=function(e){return Xn(e)};var Gn=Yn(i("ge8co")),Wn=Yn(i("cZGw3")),Qn=Yn(i("fVNic")),Jn=Yn(i("gD1JV"));function Yn(e){return e&&e.__esModule?e:{default:e}}function Xn(e){var t="function"==typeof Map?new Map:void 0;return Xn=function(e){if(null===e||!Wn.default(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Gn.default(e,arguments,Qn.default(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Jn.default(n,e)},Xn(e)}var $n,Zn,er,tr=$n={};function nr(){throw new Error("setTimeout has not been defined")}function rr(){throw new Error("clearTimeout has not been defined")}function ir(e){if(Zn===setTimeout)return setTimeout(e,0);if((Zn===nr||!Zn)&&setTimeout)return Zn=setTimeout,setTimeout(e,0);try{return Zn(e,0)}catch(t){try{return Zn.call(null,e,0)}catch(t){return Zn.call(this,e,0)}}}!function(){try{Zn="function"==typeof setTimeout?setTimeout:nr}catch(e){Zn=nr}try{er="function"==typeof clearTimeout?clearTimeout:rr}catch(e){er=rr}}();var ar,or=[],sr=!1,ur=-1;function cr(){sr&&ar&&(sr=!1,ar.length?or=ar.concat(or):ur=-1,or.length&&lr())}function lr(){if(!sr){var e=ir(cr);sr=!0;for(var t=or.length;t;){for(ar=or,or=[];++ur<t;)ar&&ar[ur].run();ur=-1,t=or.length}ar=null,sr=!1,function(e){if(er===clearTimeout)return clearTimeout(e);if((er===rr||!er)&&clearTimeout)return er=clearTimeout,clearTimeout(e);try{er(e)}catch(t){try{return er.call(null,e)}catch(t){return er.call(this,e)}}}(e)}}function fr(e,t){this.fun=e,this.array=t}function hr(){}tr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];or.push(new fr(e,t)),1!==or.length||sr||ir(lr)},fr.prototype.run=function(){this.fun.apply(null,this.array)},tr.title="browser",tr.browser=!0,tr.env={},tr.argv=[],tr.version="",tr.versions={},tr.on=hr,tr.addListener=hr,tr.once=hr,tr.off=hr,tr.removeListener=hr,tr.removeAllListeners=hr,tr.emit=hr,tr.prependListener=hr,tr.prependOnceListener=hr,tr.listeners=function(e){return[]},tr.binding=function(e){throw new Error("process.binding is not supported")},tr.cwd=function(){return"/"},tr.chdir=function(e){throw new Error("process.chdir is not supported")},tr.umask=function(){return 0};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},pr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new vr;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},vr=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){var t;return e($)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="DecodeBase64StringError",t}return r}(e(Kn)(Error)),yr=function(e){return function(e){var t=dr(e);return pr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},mr=function(e){try{return pr.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gr=function(){
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},kr=function(){try{return gr()||function(){if(void 0!==$n&&void 0!==$n.env);}()||function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&mr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},wr=function(e){var t,n;return null===(n=null===(t=kr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},br=function(e){var t=wr(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Er=function(){var e;return null===(e=kr())||void 0===e?void 0:e.config},Ir=function(e){var t;return null===(t=kr())||void 0===t?void 0:t["_".concat(e)]},_r=function(){"use strict";function t(){var n=this;e($)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return e(Z)(t,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yr(JSON.stringify({alg:"none",type:"JWT"})),yr(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Sr(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Ar(){try{return"object"==typeof indexedDB}catch(e){return!1}}function Cr(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function Or(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o;return e($)(this,r),(o=n.call(this,i)).code=t,o.customData=a,o.name="FirebaseError",Object.setPrototypeOf(e(ae)(o),r.prototype),Error.captureStackTrace&&Error.captureStackTrace(e(ae)(o),Rr.prototype.create),o}return r}(e(Kn)(Error)),Rr=function(){"use strict";function t(n,r,i){e($)(this,t),this.service=n,this.serviceName=r,this.errors=i}return e(Z)(t,[{key:"create",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0]||{},a="".concat(this.service,"/").concat(e),o=this.errors[e],s=o?Dr(o,i):"Error",u="".concat(this.serviceName,": ").concat(s," (").concat(a,")."),c=new Nr(a,u,i);return c}}]),t}();function Dr(e,t){return e.replace(Lr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Lr=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Mr(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t),i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(!r.includes(c))return!1;var l=e[c],f=t[c];if(Ur(l)&&Ur(f)){if(!Mr(l,f))return!1}else if(l!==f)return!1}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=v.value;if(!n.includes(m))return!1}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}return!0}function Ur(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fr(t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=function(t,r){var i=e(zt)(r.value,2),a=i[0],o=i[1];Array.isArray(o)?o.forEach((function(e){n.push(encodeURIComponent(a)+"="+encodeURIComponent(e))})):n.push(encodeURIComponent(a)+"="+encodeURIComponent(o))},u=Object.entries(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.length?"&"+n.join("&"):""}function Vr(t){var n={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var r=e(zt)(t.split("="),2),i=r[0],a=r[1];n[decodeURIComponent(i)]=decodeURIComponent(a)}})),n}function jr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br=function(){"use strict";function t(n,r){var i=this;e($)(this,t),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then((function(){n(i)})).catch((function(e){i.error(e)}))}return e(Z)(t,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s in e&&"function"==typeof e[s])return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=qr),void 0===r.error&&(r.error=qr),void 0===r.complete&&(r.complete=qr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),t}();function qr(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zr=144e5;function Hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(zr,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kr(e){return e&&e._delegate?e._delegate:e}var Gr=function(){"use strict";function t(n,r,i){e($)(this,t),this.name=n,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e(Z)(t,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),t}(),Wr="[DEFAULT]",Qr=function(){"use strict";function t(n,r){e($)(this,t),this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e(Z)(t,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new _r;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch(e){}var n=!0,r=!1,i=void 0;try{for(var a,o=this.instancesDeferred.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=e(zt)(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:l});c.resolve(f)}catch(e){}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.from(t.instances.values()),n.next=3,Promise.all(e(Jt)(r.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))).concat(e(Jt)(r.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return n.stop()}}),n)})))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:i,options:r}),o=!0,s=!1,u=void 0;try{for(var c,l=this.instancesDeferred.entries()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=e(zt)(c.value,2),h=f[0],d=f[1],p=this.normalizeInstanceIdentifier(h);i===p&&d.resolve(a)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;try{u(e,t)}catch(e){}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Wr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(e){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return this.component?this.component.multipleInstances?e:Wr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jr,Yr,Xr=function(){"use strict";function t(n){e($)(this,t),this.name=n,this.providers=new Map}return e(Z)(t,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Qr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}(),$r=(Hn=i("hKHmD"),[]);(Yr=Jr||(Jr={}))[Yr.DEBUG=0]="DEBUG",Yr[Yr.VERBOSE=1]="VERBOSE",Yr[Yr.INFO=2]="INFO",Yr[Yr.WARN=3]="WARN",Yr[Yr.ERROR=4]="ERROR",Yr[Yr.SILENT=5]="SILENT";var Zr,ei={debug:Jr.DEBUG,verbose:Jr.VERBOSE,info:Jr.INFO,warn:Jr.WARN,error:Jr.ERROR,silent:Jr.SILENT},ti=Jr.INFO,ni=(Zr={},e(Hn)(Zr,Jr.DEBUG,"log"),e(Hn)(Zr,Jr.VERBOSE,"log"),e(Hn)(Zr,Jr.INFO,"info"),e(Hn)(Zr,Jr.WARN,"warn"),e(Hn)(Zr,Jr.ERROR,"error"),Zr),ri=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o;if(!(n<t.logLevel)){var s=(new Date).toISOString(),u=ni[n];if(!u)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(n,")"));(o=console)[u].apply(o,["[".concat(s,"]  ").concat(t.name,":")].concat(e(Jt)(i)))}},ii=function(){"use strict";function t(n){e($)(this,t),this.name=n,this._logLevel=ti,this._logHandler=ri,this._userLogHandler=null,$r.push(this)}return e(Z)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Jr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?ei[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Jr.DEBUG].concat(e(Jt)(n))),this._logHandler.apply(this,[this,Jr.DEBUG].concat(e(Jt)(n)))}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Jr.VERBOSE].concat(e(Jt)(n))),this._logHandler.apply(this,[this,Jr.VERBOSE].concat(e(Jt)(n)))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Jr.INFO].concat(e(Jt)(n))),this._logHandler.apply(this,[this,Jr.INFO].concat(e(Jt)(n)))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Jr.WARN].concat(e(Jt)(n))),this._logHandler.apply(this,[this,Jr.WARN].concat(e(Jt)(n)))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Jr.ERROR].concat(e(Jt)(n))),this._logHandler.apply(this,[this,Jr.ERROR].concat(e(Jt)(n)))}}]),t}();var ai={};Object.defineProperty(ai,"__esModule",{value:!0}),ai.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oi.default(e,t,n[t])}))}return e};var oi=function(e){return e&&e.__esModule?e:{default:e}}(i("hKHmD"));var si,ui;var ci=new WeakMap,li=new WeakMap,fi=new WeakMap,hi=new WeakMap,di=new WeakMap;var pi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return li.get(e);if("objectStoreNames"===t)return e.objectStoreNames||fi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function vi(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ui||(ui=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(gi(this),n),mi(ci.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return mi(t.apply(gi(this),n))}:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,s=(o=t).call.apply(o,[gi(this),n].concat(e(Jt)(i)));return fi.set(s,n.sort?n.sort():[n]),mi(s)}}function yi(e){return"function"==typeof e?vi(e):(e instanceof IDBTransaction&&function(e){if(!li.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));li.set(e,t)}}(e),t=e,(si||(si=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,pi):e);var t}function mi(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(mi(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&ci.set(e,t)})).catch((function(){})),di.set(n,t),n;var t,n;if(hi.has(e))return hi.get(e);var r=yi(e);return r!==e&&(hi.set(e,r),di.set(r,e)),r}var gi=function(e){return di.get(e)};function ki(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=mi(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(mi(s.result),e.oldVersion,e.newVersion,mi(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}var wi=["get","getKey","getAll","getAllKeys","count"],bi=["put","add","delete","clear"],Ei=new Map;function Ii(t,n){if(t instanceof IDBDatabase&&!(n in t)&&"string"==typeof n){if(Ei.get(n))return Ei.get(n);var r=n.replace(/FromIndex$/,""),i=n!==r,a=bi.includes(r);if(r in(i?IDBIndex:IDBObjectStore).prototype&&(a||wi.includes(r))){var o,s=(o=e(h)(e(p).mark((function t(n){var o,s,u,c,l,f,h=arguments;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=h.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=h[u];return l=this.transaction(n,a?"readwrite":"readonly"),f=l.store,i&&(f=f.index(s.shift())),t.next=7,Promise.all([(c=f)[r].apply(c,e(Jt)(s)),a&&l.done]);case 7:return t.abrupt("return",t.sent[0]);case 8:case"end":return t.stop()}}),t,this)}))),function(e){return o.apply(this,arguments)});return Ei.set(n,s),s}}}pi=function(t){return e(ai)({},t,{get:function(e,n,r){return Ii(e,n)||t.get(e,n,r)},has:function(e,n){return!!Ii(e,n)||t.has(e,n)}})}(pi);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _i=function(){"use strict";function t(n){e($)(this,t),this.container=n}return e(Z)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),t}();var xi,Ti,Si="@firebase/app",Ai="0.9.7",Ci=new ii("@firebase/app"),Oi="[DEFAULT]",Ni=(xi={},e(Hn)(xi,Si,"fire-core"),e(Hn)(xi,"@firebase/app-compat","fire-core-compat"),e(Hn)(xi,"@firebase/analytics","fire-analytics"),e(Hn)(xi,"@firebase/analytics-compat","fire-analytics-compat"),e(Hn)(xi,"@firebase/app-check","fire-app-check"),e(Hn)(xi,"@firebase/app-check-compat","fire-app-check-compat"),e(Hn)(xi,"@firebase/auth","fire-auth"),e(Hn)(xi,"@firebase/auth-compat","fire-auth-compat"),e(Hn)(xi,"@firebase/database","fire-rtdb"),e(Hn)(xi,"@firebase/database-compat","fire-rtdb-compat"),e(Hn)(xi,"@firebase/functions","fire-fn"),e(Hn)(xi,"@firebase/functions-compat","fire-fn-compat"),e(Hn)(xi,"@firebase/installations","fire-iid"),e(Hn)(xi,"@firebase/installations-compat","fire-iid-compat"),e(Hn)(xi,"@firebase/messaging","fire-fcm"),e(Hn)(xi,"@firebase/messaging-compat","fire-fcm-compat"),e(Hn)(xi,"@firebase/performance","fire-perf"),e(Hn)(xi,"@firebase/performance-compat","fire-perf-compat"),e(Hn)(xi,"@firebase/remote-config","fire-rc"),e(Hn)(xi,"@firebase/remote-config-compat","fire-rc-compat"),e(Hn)(xi,"@firebase/storage","fire-gcs"),e(Hn)(xi,"@firebase/storage-compat","fire-gcs-compat"),e(Hn)(xi,"@firebase/firestore","fire-fst"),e(Hn)(xi,"@firebase/firestore-compat","fire-fst-compat"),e(Hn)(xi,"fire-js","fire-js"),e(Hn)(xi,"firebase","fire-js-all"),xi),Ri=new Map,Di=new Map;function Li(e,t){try{e.container.addComponent(t)}catch(n){Ci.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Pi(e){var t=e.name;if(Di.has(t))return Ci.debug("There were multiple attempts to register component ".concat(t,".")),!1;Di.set(t,e);var n=!0,r=!1,i=void 0;try{for(var a,o=Ri.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){Li(a.value,e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}function Mi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ui=(Ti={},e(Hn)(Ti,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),e(Hn)(Ti,"bad-app-name","Illegal App name: '{$appName}"),e(Hn)(Ti,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),e(Hn)(Ti,"app-deleted","Firebase App named '{$appName}' already deleted"),e(Hn)(Ti,"no-options","Need to provide options, when not being deployed to hosting via source."),e(Hn)(Ti,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),e(Hn)(Ti,"invalid-log-argument","First argument to `onLog` must be null or a function."),e(Hn)(Ti,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),e(Hn)(Ti,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),e(Hn)(Ti,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),e(Hn)(Ti,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ti),Fi=new Rr("app","Firebase",Ui),Vi=function(){"use strict";function t(n,r,i){var a=this;e($)(this,t),this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gr("app",(function(){return a}),"PUBLIC"))}return e(Z)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}]),t}(),ji="9.19.1";function Bi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!=typeof t){var r=t;t={name:r}}var i=Object.assign({name:Oi,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!=typeof a||!a)throw Fi.create("bad-app-name",{appName:String(a)});if(n||(n=Er()),!n)throw Fi.create("no-options");var o=Ri.get(a);if(o){if(Mr(n,o.options)&&Mr(i,o.config))return o;throw Fi.create("duplicate-app",{appName:a})}var s=new Xr(a),u=!0,c=!1,l=void 0;try{for(var f,h=Di.values()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;s.addComponent(d)}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}var p=new Vi(n,i,s);return Ri.set(a,p),p}function qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi,t=Ri.get(e);if(!t&&e===Oi)return Bi();if(!t)throw Fi.create("no-app",{appName:e});return t}function zi(e,t,n){var r,i=null!==(r=Ni[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ci.warn(s.join(" "))}Pi(new Gr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hi="firebase-heartbeat-store",Ki=null;function Gi(){return Ki||(Ki=ki("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Hi)}}).catch((function(e){throw Fi.create("idb-open",{originalErrorMessage:e.message})}))),Ki}function Wi(e){return Qi.apply(this,arguments)}function Qi(){return(Qi=e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gi();case 3:return r=e.sent,e.abrupt("return",r.transaction(Hi).objectStore(Hi).get(Xi(n)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Nr?Ci.warn(e.t0.message):(i=Fi.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ci.warn(i.message));case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Ji(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=e(h)(e(p).mark((function t(n,r){var i,a,o,s;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gi();case 3:return i=e.sent,a=i.transaction(Hi,"readwrite"),o=a.objectStore(Hi),e.next=8,o.put(r,Xi(n));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Nr?Ci.warn(e.t0.message):(s=Fi.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ci.warn(s.message));case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function Xi(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i=function(){"use strict";function t(n){var r=this;e($)(this,t),this.container=n,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new na(i),this._heartbeatsCachePromise=this._storage.read().then((function(e){return r._heartbeatsCache=e,e}))}return e(Z)(t,[{key:"triggerHeartbeat",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r,i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=Zi(),null!==t._heartbeatsCache){e.next=7;break}return e.next=6,t._heartbeatsCachePromise;case 6:t._heartbeatsCache=e.sent;case 7:if(t._heartbeatsCache.lastSentHeartbeatDate!==a&&!t._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=11;break}return e.abrupt("return");case 11:t._heartbeatsCache.heartbeats.push({date:a,agent:i});case 12:return t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",t._storage.overwrite(t._heartbeatsCache));case 14:case"end":return e.stop()}}),n)})))()}},{key:"getHeartbeatsHeader",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r,i,a,o,s;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t._heartbeatsCache){e.next=3;break}return e.next=3,t._heartbeatsCachePromise;case 3:if(null!==t._heartbeatsCache&&0!==t._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(r=Zi(),i=ea(t._heartbeatsCache.heartbeats),a=i.heartbeatsToSend,o=i.unsentEntries,s=yr(JSON.stringify({version:2,heartbeats:a})),t._heartbeatsCache.lastSentHeartbeatDate=r,!(o.length>0)){e.next=15;break}return t._heartbeatsCache.heartbeats=o,e.next=13,t._storage.overwrite(t._heartbeatsCache);case 13:e.next=16;break;case 15:t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),n)})))()}}]),t}();function Zi(){return(new Date).toISOString().substring(0,10)}function ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=[],r=e.slice(),i=!0,a=!1,o=void 0;try{for(var s,u=function(e,i){var a=i.value,o=n.find((function(e){return e.agent===a.agent}));if(o){if(o.dates.push(a.date),ra(n)>t)return o.dates.pop(),"break"}else if(n.push({agent:a.agent,dates:[a.date]}),ra(n)>t)return n.pop(),"break";r=r.slice(1)},c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=u(c,s);if("break"===l)break}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{heartbeatsToSend:n,unsentEntries:r}}var ta,na=function(){"use strict";function t(n){e($)(this,t),this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e(Z)(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){return e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ar()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Cr().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),t)})))()}},{key:"read",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Wi(t.app);case 9:return r=e.sent,e.abrupt("return",r||{heartbeats:[]});case 11:case"end":return e.stop()}}),n)})))()}},{key:"overwrite",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n._canUseIndexedDBPromise;case 3:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n.read();case 10:return a=e.sent,e.abrupt("return",Ji(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 12:case"end":return e.stop()}}),r)})))()}},{key:"add",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a;return e(p).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,n._canUseIndexedDBPromise;case 3:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,n.read();case 10:return a=r.sent,r.abrupt("return",Ji(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:e(Jt)(a.heartbeats).concat(e(Jt)(t.heartbeats))}));case 12:case"end":return r.stop()}}),r)})))()}}]),t}();function ra(e){return yr(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta="",Pi(new Gr("platform-logger",(function(e){return new _i(e)}),"PRIVATE")),Pi(new Gr("heartbeat",(function(e){return new $i(e)}),"PRIVATE")),zi(Si,Ai,ta),zi(Si,Ai,"esm2017"),zi("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
zi("firebase","9.19.1","app");Hn=i("hKHmD"),Hn=i("hKHmD");var ia,aa="@firebase/installations",oa="0.6.4",sa=1e4,ua="w:".concat(oa),ca="FIS_v2",la=36e5,fa=(ia={},e(Hn)(ia,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),e(Hn)(ia,"not-registered","Firebase Installation is not registered."),e(Hn)(ia,"installation-not-found","Firebase Installation not found."),e(Hn)(ia,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),e(Hn)(ia,"app-offline","Could not process request. Application offline."),e(Hn)(ia,"delete-pending-registration","Can't delete installation while there is a pending registration request."),ia),ha=new Rr("installations","Installations",fa);function da(e){return e instanceof Nr&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function va(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function ya(e,t){return ma.apply(this,arguments)}function ma(){return(ma=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.json();case 2:return i=e.sent,a=i.error,e.abrupt("return",ha.create("request-failed",{requestName:n,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ga(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ka(e,t){var n=t.refreshToken,r=ga(e);return r.append("Authorization",function(e){return"".concat(ca," ").concat(e)}(n)),r}function wa(e){return ba.apply(this,arguments)}function ba(){return(ba=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!((r=e.sent).status>=500&&r.status<600)){e.next=5;break}return e.abrupt("return",n());case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ea(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,v,y;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.appConfig,a=n.heartbeatServiceProvider,o=r.fid,s=pa(i),u=ga(i),!(c=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,c.getHeartbeatsHeader();case 7:(l=e.sent)&&u.append("x-firebase-client",l);case 9:return f={fid:o,authVersion:ca,appId:i.appId,sdkVersion:ua},h={method:"POST",headers:u,body:JSON.stringify(f)},e.next=13,wa((function(){return fetch(s,h)}));case 13:if(!(d=e.sent).ok){e.next=22;break}return e.next=17,d.json();case 17:return v=e.sent,y={fid:v.fid||o,registrationStatus:2,refreshToken:v.refreshToken,authToken:va(v.authToken)},e.abrupt("return",y);case 22:return e.next=24,ya("Create Installation",d);case 24:throw e.sent;case 25:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xa=/^[cdef][\w-]{21}$/;function Ta(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var n=function(t){return(n=t,btoa((r=String).fromCharCode.apply(r,e(Jt)(n))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var n,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return xa.test(n)?n:""}catch(e){return""}}function Sa(e){return"".concat(e.appName,"!").concat(e.appId)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aa=new Map;function Ca(e,t){var n=Sa(e);Oa(n,t),function(e,t){var n=Ra();n&&n.postMessage({key:e,fid:t});Da()}(n,t)}function Oa(e,t){var n=Aa.get(e);if(n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}var Na=null;function Ra(){return!Na&&"BroadcastChannel"in self&&((Na=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Oa(e.data.key,e.data.fid)}),Na}function Da(){0===Aa.size&&Na&&(Na.close(),Na=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var La="firebase-installations-store",Pa=null;function Ma(){return Pa||(Pa=ki("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(La)}})),Pa}function Ua(e,t){return Fa.apply(this,arguments)}function Fa(){return(Fa=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sa(n),e.next=3,Ma();case 3:return a=e.sent,o=a.transaction(La,"readwrite"),s=o.objectStore(La),e.next=8,s.get(i);case 8:return u=e.sent,e.next=11,s.put(r,i);case 11:return e.next=13,o.done;case 13:return u&&u.fid===r.fid||Ca(n,r.fid),e.abrupt("return",r);case 15:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Va(e){return ja.apply(this,arguments)}function ja(){return(ja=e(h)(e(p).mark((function t(n){var r,i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sa(n),e.next=3,Ma();case 3:return i=e.sent,a=i.transaction(La,"readwrite"),e.next=7,a.objectStore(La).delete(r);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ba(e,t){return qa.apply(this,arguments)}function qa(){return(qa=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sa(n),e.next=3,Ma();case 3:return a=e.sent,o=a.transaction(La,"readwrite"),s=o.objectStore(La),e.next=8,s.get(i);case 8:if(u=e.sent,void 0!==(c=r(u))){e.next=15;break}return e.next=13,s.delete(i);case 13:e.next=17;break;case 15:return e.next=17,s.put(c,i);case 17:return e.next=19,o.done;case 19:return!c||u&&u.fid===c.fid||Ca(n,c.fid),e.abrupt("return",c);case 21:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function za(e){return Ha.apply(this,arguments)}function Ha(){return(Ha=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Ba(n.appConfig,(function(e){var t=Ka(e),i=Ga(n,t);return r=i.registrationPromise,i.installationEntry}));case 3:if(""!==(i=e.sent).fid){e.next=9;break}return e.next=7,r;case 7:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 9:return e.abrupt("return",{installationEntry:i,registrationPromise:r});case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ka(e){return Xa(e||{fid:Ta(),registrationStatus:0})}function Ga(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(ha.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return Wa.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qa(e)}:{installationEntry:t}}function Wa(){return(Wa=e(h)(e(p).mark((function t(n,r){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ea(n,r);case 3:return i=e.sent,e.abrupt("return",Ua(n.appConfig,i));case 7:if(e.prev=7,e.t0=e.catch(0),!da(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Va(n.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Ua(n.appConfig,{fid:r.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Qa(e){return Ja.apply(this,arguments)}function Ja(){return(Ja=e(h)(e(p).mark((function t(n){var r,i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(n.appConfig);case 2:r=e.sent;case 3:if(1!==r.registrationStatus){e.next=11;break}return e.next=6,_a(100);case 6:return e.next=8,Ya(n.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==r.registrationStatus){e.next=22;break}return e.next=14,za(n);case 14:if(i=e.sent,a=i.installationEntry,!(o=i.registrationPromise)){e.next=21;break}return e.abrupt("return",o);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ya(e){return Ba(e,(function(e){if(!e)throw ha.create("installation-not-found");return Xa(e)}))}function Xa(e){return 1===(t=e).registrationStatus&&t.registrationTime+sa<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function $a(e,t){return Za.apply(this,arguments)}function Za(){return(Za=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,v;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.appConfig,a=n.heartbeatServiceProvider,o=eo(i,r),s=ka(i,r),!(u=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(c=e.sent)&&s.append("x-firebase-client",c);case 9:return l={installation:{sdkVersion:ua,appId:i.appId}},f={method:"POST",headers:s,body:JSON.stringify(l)},e.next=13,wa((function(){return fetch(o,f)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return d=e.sent,v=va(d),e.abrupt("return",v);case 22:return e.next=24,ya("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function eo(e,t){var n=t.fid;return"".concat(pa(e),"/").concat(n,"/authTokens:generate")}function to(e){return no.apply(this,arguments)}function no(){return no=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){var r,i,a,o,s=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],e.next=4,Ba(n.appConfig,(function(e){if(!uo(e))throw ha.create("not-registered");var t=e.authToken;if(!r&&co(t))return e;if(1===t.requestStatus)return i=ro(n,r),e;if(!navigator.onLine)throw ha.create("app-offline");var a=lo(e);return i=oo(n,a),a}));case 4:if(a=e.sent,!i){e.next=11;break}return e.next=8,i;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=a.authToken;case 12:return o=e.t0,e.abrupt("return",o);case 14:case"end":return e.stop()}}),t)}))),no.apply(this,arguments)}function ro(e,t){return io.apply(this,arguments)}function io(){return(io=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ao(n.appConfig);case 2:i=e.sent;case 3:if(1!==i.authToken.requestStatus){e.next=11;break}return e.next=6,_a(100);case 6:return e.next=8,ao(n.appConfig);case 8:i=e.sent,e.next=3;break;case 11:if(0!==(a=i.authToken).requestStatus){e.next=16;break}return e.abrupt("return",to(n,r));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ao(e){return Ba(e,(function(e){if(!uo(e))throw ha.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+sa<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function oo(e,t){return so.apply(this,arguments)}function so(){return(so=e(h)(e(p).mark((function t(n,r){var i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$a(n,r);case 3:return i=e.sent,a=Object.assign(Object.assign({},r),{authToken:i}),e.next=7,Ua(n.appConfig,a);case 7:return e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(0),!da(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Va(n.appConfig);case 15:e.next=20;break;case 17:return o=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}),e.next=20,Ua(n.appConfig,o);case 20:throw e.t0;case 21:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function uo(e){return void 0!==e&&2===e.registrationStatus}function co(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+la}(e)}function lo(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function fo(){return(fo=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){var r,i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,e.next=3,za(r);case 3:return i=e.sent,a=i.installationEntry,(o=i.registrationPromise)?o.catch(console.error):to(r).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ho(){return ho=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){var r,i,a,o=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],i=n,e.next=4,po(i);case 4:return e.next=6,to(i,r);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),t)}))),ho.apply(this,arguments)}function po(e){return vo.apply(this,arguments)}function vo(){return(vo=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(n);case 2:if(!(r=e.sent.registrationPromise)){e.next=6;break}return e.next=6,r;case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function yo(e){return ha.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mo="installations",go=function(e){var t=Mi(e.getProvider("app").getImmediate(),mo).getImmediate(),n={getId:function(){return function(e){return fo.apply(this,arguments)}(t)},getToken:function(e){return function(e){return ho.apply(this,arguments)}(t,e)}};return n};Pi(new Gr(mo,(function(e){var t=e.getProvider("app").getImmediate(),n=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){if(!e||!e.options)throw yo("App Configuration");if(!e.name)throw yo("App Name");var t=!0,n=!1,r=void 0;try{for(var i,a=["projectId","apiKey","appId"][Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!e.options[o])throw yo(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Mi(t,"heartbeat"),_delete:function(){return Promise.resolve()}}}),"PUBLIC")),Pi(new Gr("installations-internal",go,"PRIVATE")),zi(aa,oa),zi(aa,oa,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ko,wo="analytics",bo=6e4,Eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Io="https://www.googletagmanager.com/gtag/js",_o=new ii("@firebase/analytics"),xo=(ko={},e(Hn)(ko,"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),e(Hn)(ko,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),e(Hn)(ko,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),e(Hn)(ko,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),e(Hn)(ko,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),e(Hn)(ko,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),e(Hn)(ko,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),e(Hn)(ko,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),e(Hn)(ko,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),e(Hn)(ko,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),e(Hn)(ko,"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}."),ko),To=new Rr("analytics","Analytics",xo);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function So(e){if(!e.startsWith(Io)){var t=To.create("invalid-gtag-resource",{gtagURL:e});return _o.warn(t.message),""}return e}function Ao(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Co(e,t){var n=function(e,t){var n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:So}),r=document.createElement("script"),i="".concat(Io,"?l=").concat(e,"&id=").concat(t);r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Oo(e,t,n,r,i,a){return No.apply(this,arguments)}function No(){return(No=e(h)(e(p).mark((function t(n,r,i,a,o,s){var u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=a[o],e.prev=1,!u){e.next=7;break}return e.next=5,r[u];case 5:e.next=14;break;case 7:return e.next=9,Ao(i);case 9:if(c=e.sent,!(l=c.find((function(e){return e.measurementId===o})))){e.next=14;break}return e.next=14,r[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),_o.error(e.t0);case 19:n("config",o,s);case 20:case"end":return e.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function Ro(e,t,n,r,i){return Do.apply(this,arguments)}function Do(){return(Do=e(h)(e(p).mark((function t(n,r,i,a,o){var s,u,c,l,f,h,d,v,y,m,g;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=[],!o||!o.send_to){e.next=38;break}return u=o.send_to,Array.isArray(u)||(u=[u]),e.next=7,Ao(i);case 7:c=e.sent,l=!0,f=!1,h=void 0,e.prev=9,d=u[Symbol.iterator]();case 11:if(l=(v=d.next()).done){e.next=24;break}if(y=v.value,m=c.find((function(e){return e.measurementId===y})),!(g=m&&r[m.appId])){e.next=19;break}s.push(g),e.next=21;break;case 19:return s=[],e.abrupt("break",24);case 21:l=!0,e.next=11;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(9),f=!0,h=e.t0;case 30:e.prev=30,e.prev=31,l||null==d.return||d.return();case 33:if(e.prev=33,!f){e.next=36;break}throw h;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return 0===s.length&&(s=Object.values(r)),e.next=41,Promise.all(s);case 41:n("event",a,o||{}),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(0),_o.error(e.t1);case 47:case"end":return e.stop()}}),t,null,[[0,44],[9,26,30,38],[31,,33,37]])})))).apply(this,arguments)}function Lo(t,n,r,i,a){var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[i].push(arguments)};return window[a]&&"function"==typeof window[a]&&(o=window[a]),window[a]=function(t,n,r,i){function a(){return(a=e(h)(e(p).mark((function a(o,s,u){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"event"!==o){e.next=6;break}return e.next=4,Ro(t,n,r,s,u);case 4:e.next=12;break;case 6:if("config"!==o){e.next=11;break}return e.next=9,Oo(t,n,r,i,s,u);case 9:e.next=12;break;case 11:"consent"===o?t("consent","update",u):t("set",s);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_o.error(e.t0);case 17:case"end":return e.stop()}}),a,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return a.apply(this,arguments)}}(o,t,n,r),{gtagCore:o,wrappedGtag:window[a]}}function Po(e){var t=window.document.getElementsByTagName("script"),n=!0,r=!1,i=void 0;try{for(var a,o=Object.values(t)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.src&&s.src.includes(Io)&&s.src.includes(e))return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mo=function(){"use strict";function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e($)(this,t),this.throttleMetadata=n,this.intervalMillis=r}return e(Z)(t,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),t}(),Uo=new Mo;function Fo(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Vo(e){return jo.apply(this,arguments)}function jo(){return(jo=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.appId,a=n.apiKey,o={method:"GET",headers:Fo(a)},s=Eo.replace("{app-id}",i),e.next=6,fetch(s,o);case 6:if(200===(u=e.sent).status||304===u.status){e.next=19;break}return c="",e.prev=9,e.next=12,u.json();case 12:l=e.sent,(null===(r=l.error)||void 0===r?void 0:r.message)&&(c=l.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw To.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 19:return e.abrupt("return",u.json());case 20:case"end":return e.stop()}}),t,null,[[9,16]])})))).apply(this,arguments)}function Bo(e){return qo.apply(this,arguments)}function qo(){return qo=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u,c,l,f=arguments;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:Uo,i=f.length>2?f[2]:void 0,a=n.options,o=a.appId,s=a.apiKey,u=a.measurementId,o){t.next=4;break}throw To.create("no-app-id");case 4:if(s){t.next=8;break}if(!u){t.next=7;break}return t.abrupt("return",{measurementId:u,appId:o});case 7:throw To.create("no-api-key");case 8:return c=r.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Jo,setTimeout(e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}}),t)}))),void 0!==i?i:bo),t.abrupt("return",zo({appId:o,apiKey:s,measurementId:u},c,l,r));case 12:case"end":return t.stop()}}),t)}))),qo.apply(this,arguments)}function zo(e,t,n){return Ho.apply(this,arguments)}function Ho(){return Ho=e(h)(e(p).mark((function t(n,r,i){var a,o,s,u,c,l,f,h,d,v,y=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.throttleEndTimeMillis,o=r.backoffCount,s=y.length>3&&void 0!==y[3]?y[3]:Uo,c=n.appId,l=n.measurementId,e.prev=3,e.next=6,Ko(i,a);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!l){e.next=13;break}return _o.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,Vo(n);case 17:return f=e.sent,s.deleteThrottleMetadata(c),e.abrupt("return",f);case 22:if(e.prev=22,e.t1=e.catch(14),Go(h=e.t1)){e.next=33;break}if(s.deleteThrottleMetadata(c),!l){e.next=32;break}return _o.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==h?void 0:h.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null==h?void 0:h.customData)||void 0===u?void 0:u.httpStatus)?Hr(o,s.intervalMillis,30):Hr(o,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+d,backoffCount:o+1},s.setThrottleMetadata(c,v),_o.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",zo(n,v,i,s));case 38:case"end":return e.stop()}}),t,null,[[3,8],[14,22]])}))),Ho.apply(this,arguments)}function Ko(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(To.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Go(e){if(!(e instanceof Nr&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Wo,Qo,Jo=function(){"use strict";function t(){e($)(this,t),this.listeners=[]}return e(Z)(t,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(){return(Yo=e(h)(e(p).mark((function t(n,r,i,a,o){var s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.global){e.next=5;break}return n("event",i,a),e.abrupt("return");case 5:return e.next=7,r;case 7:s=e.sent,u=Object.assign(Object.assign({},a),{send_to:s}),n("event",i,u);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Xo(e){Qo=e}function $o(e){Wo=e}function Zo(){return es.apply(this,arguments)}function es(){return(es=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ar()){e.next=5;break}return _o.warn(To.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,Cr();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),_o.warn(To.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),t,null,[[5,10]])})))).apply(this,arguments)}function ts(){return(ts=e(h)(e(p).mark((function t(n,r,i,a,o,s,u){var c,l,f,h,d,v,y;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(l=Bo(n)).then((function(e){i[e.measurementId]=e.appId,n.options.measurementId&&e.measurementId!==n.options.measurementId&&_o.warn("The measurement ID in the local Firebase config (".concat(n.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return _o.error(e)})),r.push(l),f=Zo().then((function(e){return e?a.getId():void 0})),t.t0=e(zt),t.next=8,Promise.all([l,f]);case 8:return t.t1=t.sent,h=(0,t.t0)(t.t1,2),d=h[0],v=h[1],Po(s)||Co(s,d.measurementId),Qo&&(o("consent","default",Qo),Xo(void 0)),o("js",new Date),(y=null!==(c=null==u?void 0:u.config)&&void 0!==c?c:{}).origin="firebase",y.update=!0,null!=v&&(y.firebase_id=v),o("config",d.measurementId,y),Wo&&(o("set",Wo),$o(void 0)),t.abrupt("return",d.measurementId);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns,rs,is=function(){"use strict";function t(n){e($)(this,t),this.app=n}return e(Z)(t,[{key:"_delete",value:function(){return delete as[this.app.options.appId],Promise.resolve()}}]),t}(),as={},os=[],ss={},us="dataLayer",cs="gtag",ls=!1;function fs(e,t,n){!function(){var e=[];if(Sr()&&e.push("This is a browser extension environment."),Or()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=To.create("invalid-analytics-context",{errorInfo:t});_o.warn(n.message)}}();var r,i,a=e.options.appId;if(!a)throw To.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw To.create("no-api-key");_o.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=as[a])throw To.create("already-exists",{id:a});if(!ls){r=us,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i;var o=Lo(as,os,ss,us,cs),s=o.wrappedGtag,u=o.gtagCore;rs=s,ns=u,ls=!0}return as[a]=function(e,t,n,r,i,a,o){return ts.apply(this,arguments)}(e,os,ss,t,ns,us,n),new is(e)}function hs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Mi(e,wo);if(n.isInitialized()){var r=n.getImmediate();if(Mr(t,n.getOptions()))return r;throw To.create("already-initialized")}var i=n.initialize({options:t});return i}function ds(e,t,n,r){e=Kr(e),function(e,t,n,r,i){return Yo.apply(this,arguments)}(rs,as[e.app.options.appId],t,n,r).catch((function(e){return _o.error(e)}))}var ps="@firebase/analytics",vs="0.9.5";Pi(new Gr(wo,(function(e,t){var n=t.options;return fs(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Pi(new Gr("analytics-internal",(function(e){try{var t=e.getProvider(wo).getImmediate();return{logEvent:function(e,n,r){return ds(t,e,n,r)}}}catch(e){throw To.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),zi(ps,vs),zi(ps,vs,"esm2017");ae=i("ds8z5"),Hn=i("hKHmD");var ys={};Object.defineProperty(ys,"__esModule",{value:!0}),ys.default=function(e,t,n){return gs(e,t,n)};var ms=function(e){return e&&e.__esModule?e:{default:e}}(i("2mz0K"));function gs(e,t,n){return(gs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=ms.default(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}})(e,t,n)}var ks=i("fVNic");function ws(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;function bs(){return e(Hn)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Es=bs,Is=new Rr("auth","Firebase",bs()),_s={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"},xs=new ii("@firebase/auth");function Ts(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;xs.logLevel<=Jr.ERROR&&(a=xs).error.apply(a,["Auth (".concat(ji,"): ").concat(t)].concat(e(Jt)(r)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw Os.apply(void 0,[t].concat(e(Jt)(r)))}function As(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Os.apply(void 0,[t].concat(e(Jt)(r)))}function Cs(t,n,r){var i=Object.assign(Object.assign({},Es()),e(Hn)({},n,r));return new Rr("auth","Firebase",i).create(n,{appName:t.name})}function Os(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;if("string"!=typeof t){var o,s=r[0],u=e(Jt)(r.slice(1));return u[0]&&(u[0].appName=t.name),(o=t._errorFactory).create.apply(o,[s].concat(e(Jt)(u)))}return(a=Is).create.apply(a,[t].concat(e(Jt)(r)))}function Ns(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(!t)throw Os.apply(void 0,[n].concat(e(Jt)(i)))}function Rs(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ts(t),new Error(t)}function Ds(e,t){e||Rs(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ls=new Map;function Ps(e){Ds(e instanceof Function,"Expected a class definition");var t=Ls.get(e);return t?(Ds(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ls.set(e,t),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(e,t){var n=Mi(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Mr(n.getOptions(),null!=t?t:{}))return r;Ss(r,"already-initialized")}return n.initialize({options:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Us(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fs(){return"http:"===Vs()||"https:"===Vs()}function Vs(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var js=function(){"use strict";function t(n,r){e($)(this,t),this.shortDelay=n,this.longDelay=r,Ds(r>n,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())||"object"==typeof navigator&&"ReactNative"===navigator.product}return e(Z)(t,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fs()||Sr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e,t){Ds(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs,zs=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),t}(),Hs=(qs={},e(Hn)(qs,"CREDENTIAL_MISMATCH","custom-token-mismatch"),e(Hn)(qs,"MISSING_CUSTOM_TOKEN","internal-error"),e(Hn)(qs,"INVALID_IDENTIFIER","invalid-email"),e(Hn)(qs,"MISSING_CONTINUE_URI","internal-error"),e(Hn)(qs,"INVALID_PASSWORD","wrong-password"),e(Hn)(qs,"MISSING_PASSWORD","missing-password"),e(Hn)(qs,"EMAIL_EXISTS","email-already-in-use"),e(Hn)(qs,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),e(Hn)(qs,"INVALID_IDP_RESPONSE","invalid-credential"),e(Hn)(qs,"INVALID_PENDING_TOKEN","invalid-credential"),e(Hn)(qs,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),e(Hn)(qs,"MISSING_REQ_TYPE","internal-error"),e(Hn)(qs,"EMAIL_NOT_FOUND","user-not-found"),e(Hn)(qs,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),e(Hn)(qs,"EXPIRED_OOB_CODE","expired-action-code"),e(Hn)(qs,"INVALID_OOB_CODE","invalid-action-code"),e(Hn)(qs,"MISSING_OOB_CODE","internal-error"),e(Hn)(qs,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),e(Hn)(qs,"INVALID_ID_TOKEN","invalid-user-token"),e(Hn)(qs,"TOKEN_EXPIRED","user-token-expired"),e(Hn)(qs,"USER_NOT_FOUND","user-token-expired"),e(Hn)(qs,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),e(Hn)(qs,"INVALID_CODE","invalid-verification-code"),e(Hn)(qs,"INVALID_SESSION_INFO","invalid-verification-id"),e(Hn)(qs,"INVALID_TEMPORARY_PROOF","invalid-credential"),e(Hn)(qs,"MISSING_SESSION_INFO","missing-verification-id"),e(Hn)(qs,"SESSION_EXPIRED","code-expired"),e(Hn)(qs,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),e(Hn)(qs,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),e(Hn)(qs,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),e(Hn)(qs,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),e(Hn)(qs,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),e(Hn)(qs,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),e(Hn)(qs,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),e(Hn)(qs,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),e(Hn)(qs,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),e(Hn)(qs,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),e(Hn)(qs,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),qs),Ks=new js(3e4,6e4);function Gs(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ws(e,t,n,r){return Qs.apply(this,arguments)}function Qs(){return Qs=e(h)(e(p).mark((function t(n,r,i,a){var o,s=arguments;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},t.abrupt("return",Js(n,o,e(h)(e(p).mark((function t(){var o,s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},s={},a&&("GET"===r?s=a:o={body:JSON.stringify(a)}),u=Fr(Object.assign({key:n.config.apiKey},s)).slice(1),e.next=6,n._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),e.abrupt("return",zs.fetch()(Zs(n,n.config.apiHost,i,u),Object.assign({method:r,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),t)})))));case 2:case"end":return t.stop()}}),t)}))),Qs.apply(this,arguments)}function Js(e,t,n){return Ys.apply(this,arguments)}function Ys(){return(Ys=e(h)(e(p).mark((function t(n,r,i){var a,o,s,u,c,l,f,h,d;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n._canInitEmulator=!1,a=Object.assign(Object.assign({},Hs),r),t.prev=2,o=new eu(n),t.next=6,Promise.race([i(),o.promise]);case 6:return s=t.sent,o.clearNetworkTimeout(),t.next=10,s.json();case 10:if(!("needConfirmation"in(u=t.sent))){t.next=13;break}throw tu(n,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){t.next=17;break}return t.abrupt("return",u);case 17:if(c=s.ok?u.errorMessage:u.error.message,l=e(zt)(c.split(" : "),2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){t.next=23;break}throw tu(n,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){t.next=27;break}throw tu(n,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){t.next=29;break}throw tu(n,"user-disabled",u);case 29:if(d=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){t.next=34;break}throw Cs(n,d,h);case 34:Ss(n,d);case 35:t.next=42;break;case 37:if(t.prev=37,t.t0=t.catch(2),!(t.t0 instanceof Nr)){t.next=41;break}throw t.t0;case 41:Ss(n,"network-request-failed",{message:String(t.t0)});case 42:case"end":return t.stop()}}),t,null,[[2,37]])})))).apply(this,arguments)}function Xs(e,t,n,r){return $s.apply(this,arguments)}function $s(){return $s=e(h)(e(p).mark((function t(n,r,i,a){var o,s,u=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ws(n,r,i,a,o);case 3:return"mfaPendingCredential"in(s=e.sent)&&Ss(n,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),t)}))),$s.apply(this,arguments)}function Zs(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Bs(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var eu=function(){"use strict";function t(n){var r=this;e($)(this,t),this.auth=n,this.timer=null,this.promise=new Promise((function(e,t){var n=r;r.timer=setTimeout((function(){return t(As(n.auth,"network-request-failed"))}),Ks.get())}))}return e(Z)(t,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),t}();function tu(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=As(e,t,r);return i.customData._tokenResponse=n,i}function nu(e,t){return ru.apply(this,arguments)}function ru(){return(ru=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(n,"POST","/v1/accounts:delete",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function iu(e,t){return au.apply(this,arguments)}function au(){return(au=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(n,"POST","/v1/accounts:lookup",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(){return su=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u,c=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],i=Kr(n),e.next=4,i.getIdToken(r);case 4:return a=e.sent,Ns((o=cu(a))&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error"),s="object"==typeof o.firebase?o.firebase:void 0,u=null==s?void 0:s.sign_in_provider,e.abrupt("return",{claims:o,token:a,authTime:ou(uu(o.auth_time)),issuedAtTime:ou(uu(o.iat)),expirationTime:ou(uu(o.exp)),signInProvider:u||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),t)}))),su.apply(this,arguments)}function uu(e){return 1e3*Number(e)}function cu(t){var n=e(zt)(t.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Ts("JWT malformed, contained fewer than 3 sections"),null;try{var o=mr(i);return o?JSON.parse(o):(Ts("Failed to decode base64 JWT payload"),null)}catch(e){return Ts("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function lu(e,t){return fu.apply(this,arguments)}function fu(){return fu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>2&&void 0!==i[2]&&i[2])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Nr&&hu(e.t0))){e.next=15;break}if(n.auth.currentUser!==n){e.next=15;break}return e.next=15,n.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),t,null,[[3,9]])}))),fu.apply(this,arguments)}function hu(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du=function(){"use strict";function t(n){e($)(this,t),this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return e(Z)(t,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t),r=this;this.timerId=setTimeout(e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.iteration();case 2:case"end":return e.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&t.schedule(!0),e.abrupt("return");case 9:t.schedule();case 10:case"end":return e.stop()}}),n,null,[[0,5]])})))()}}]),t}(),pu=function(){"use strict";function t(n,r){e($)(this,t),this.createdAt=n,this.lastLoginAt=r,this._initializeTime()}return e(Z)(t,[{key:"_initializeTime",value:function(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e){return yu.apply(this,arguments)}function yu(){return(yu=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){var r,i,a,o,s,u,c,l,f,h,d;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.auth,e.next=4,n.getIdToken();case 4:return a=e.sent,e.next=7,lu(n,iu(i,{idToken:a}));case 7:Ns(null==(o=e.sent)?void 0:o.users.length,i,"internal-error"),s=o.users[0],n._notifyReloadListener(s),u=(null===(r=s.providerUserInfo)||void 0===r?void 0:r.length)?ku(s.providerUserInfo):[],c=gu(n.providerData,u),l=n.isAnonymous,f=!(n.email&&s.passwordHash||(null==c?void 0:c.length)),h=!!l&&f,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new pu(s.createdAt,s.lastLoginAt),isAnonymous:h},Object.assign(n,d);case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function mu(){return(mu=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kr(n),e.next=3,vu(r);case 3:return e.next=5,r.auth._persistUserIfCurrent(r);case 5:r.auth._notifyListenersIfCurrent(r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function gu(t,n){var r=t.filter((function(e){return!n.some((function(t){return t.providerId===e.providerId}))}));return e(Jt)(r).concat(e(Jt)(n))}function ku(e){return e.map((function(e){var t=e.providerId,n=ws(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function wu(e,t){return bu.apply(this,arguments)}function bu(){return(bu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Js(n,{},e(h)(e(p).mark((function t(){var i,a,o,s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fr({grant_type:"refresh_token",refresh_token:r}).slice(1),a=n.config,o=a.tokenApiHost,s=a.apiKey,u=Zs(n,o,"/v1/token","key=".concat(s)),e.next=5,n._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",zs.fetch()(u,{method:"POST",headers:c,body:i}));case 8:case"end":return e.stop()}}),t)}))));case 2:return i=t.sent,t.abrupt("return",{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eu=function(){"use strict";function t(){e($)(this,t),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return e(Z)(t,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ns(e.idToken,"internal-error"),Ns(void 0!==e.idToken,"internal-error"),Ns(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,Ns(n=cu(t),"internal-error"),Ns(void 0!==n.exp,"internal-error"),Ns(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ns(!r.accessToken||r.refreshToken,t,"user-token-expired"),n||!r.accessToken||r.isExpired){e.next=3;break}return e.abrupt("return",r.accessToken);case 3:if(!r.refreshToken){e.next=7;break}return e.next=6,r.refresh(t,r.refreshToken);case 6:return e.abrupt("return",r.accessToken);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),i)})))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){var a,o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wu(t,n);case 2:a=e.sent,o=a.accessToken,s=a.refreshToken,u=a.expiresIn,r.updateTokensAndExpiration(o,s,Number(u));case 7:case"end":return e.stop()}}),i)})))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new t,this.toJSON())}},{key:"_performRefresh",value:function(){return Rs("not implemented")}}],[{key:"fromJSON",value:function(e,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new t;return r&&(Ns("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(Ns("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),a&&(Ns("number"==typeof a,"internal-error",{appName:e}),o.expirationTime=a),o}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(e,t){Ns("string"==typeof e||void 0===e,"internal-error",{appName:t})}var _u=function(){"use strict";function t(n){e($)(this,t);var r=n.uid,i=n.auth,a=n.stsTokenManager,o=ws(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new du(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?e(Jt)(o.providerData):[],this.metadata=new pu(o.createdAt||void 0,o.lastLoginAt||void 0)}return e(Z)(t,[{key:"getIdToken",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(n,n.stsTokenManager.getToken(n.auth,t));case 2:if(Ns(i=e.sent,n.auth,"internal-error"),n.accessToken===i){e.next=9;break}return n.accessToken=i,e.next=8,n.auth._persistUserIfCurrent(n);case 8:n.auth._notifyListenersIfCurrent(n);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),r)})))()}},{key:"getIdTokenResult",value:function(e){return function(e){return su.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return mu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ns(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(e){var n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Ns(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(h)(e(p).mark((function i(){var a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,t.idToken&&t.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(t),a=!0),!n){e.next=5;break}return e.next=5,vu(r);case 5:return e.next=7,r.auth._persistUserIfCurrent(r);case 7:a&&r.auth._notifyListenersIfCurrent(r);case 8:case"end":return e.stop()}}),i)})))()}},{key:"delete",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdToken();case 2:return r=e.sent,e.next=5,lu(t,nu(t.auth,{idToken:r}));case 5:return t.stsTokenManager.clearRefreshToken(),e.abrupt("return",t.auth.signOut());case 7:case"end":return e.stop()}}),n)})))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(e,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,E=n.providerData,I=n.stsTokenManager;Ns(k&&I,e,"internal-error");var _=Eu.fromJSON(this.name,I);Ns("string"==typeof k,e,"internal-error"),Iu(f,e.name),Iu(h,e.name),Ns("boolean"==typeof w,e,"internal-error"),Ns("boolean"==typeof b,e,"internal-error"),Iu(d,e.name),Iu(p,e.name),Iu(v,e.name),Iu(y,e.name),Iu(m,e.name),Iu(g,e.name);var x=new t({uid:k,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return E&&Array.isArray(E)&&(x.providerData=E.map((function(e){return Object.assign({},e)}))),y&&(x._redirectEventId=y),x}},{key:"_fromIdTokenResponse",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(h)(e(p).mark((function a(){var o,s;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new Eu).updateFromServerResponse(r),s=new t({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),e.next=5,vu(s);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),a)})))()}}]),t}(),xu=function(){"use strict";function t(){e($)(this,t),this.type="NONE",this.storage={}}return e(Z)(t,[{key:"_isAvailable",value:function(){return e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),t)})))()}},{key:"_set",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.storage[t]=n;case 1:case"end":return e.stop()}}),i)})))()}},{key:"_get",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.storage[t],e.abrupt("return",void 0===i?null:i);case 2:case"end":return e.stop()}}),r)})))()}},{key:"_remove",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete n.storage[t];case 1:case"end":return e.stop()}}),r)})))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xu.type="NONE";var Tu=xu;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Au=function(){"use strict";function t(n,r,i){e($)(this,t),this.persistence=n,this.auth=r,this.userKey=i;var a=this.auth,o=a.config,s=a.name;this.fullUserKey=Su(this.userKey,o.apiKey,s),this.fullPersistenceKey=Su("persistence",o.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return e(Z)(t,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.persistence._get(t.fullUserKey);case 2:return r=e.sent,e.abrupt("return",r?_u._fromJSON(t.auth,r):null);case 4:case"end":return e.stop()}}),n)})))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.getCurrentUser();case 4:return i=e.sent,e.next=7,n.removeCurrentUser();case 7:if(n.persistence=t,!i){e.next=10;break}return e.abrupt("return",n.setCurrentUser(i));case 10:case"end":return e.stop()}}),r)})))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return e(h)(e(p).mark((function a(){var o,s,u,c,l,f,d,v,y,m,g,k,w;return e(p).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.length){a.next=2;break}return a.abrupt("return",new t(Ps(Tu),n,i));case 2:return a.next=4,Promise.all(r.map(function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",n);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:o=a.sent.filter((function(e){return e})),s=o[0]||Ps(Tu),u=Su(i,n.config.apiKey,n.name),c=null,l=!0,f=!1,d=void 0,a.prev=9,v=r[Symbol.iterator]();case 11:if(l=(y=v.next()).done){a.next=29;break}return m=y.value,a.prev=13,a.next=16,m._get(u);case 16:if(!(g=a.sent)){a.next=22;break}return k=_u._fromJSON(n,g),m!==s&&(c=k),s=m,a.abrupt("break",29);case 22:a.next=26;break;case 24:a.prev=24,a.t0=a.catch(13);case 26:l=!0,a.next=11;break;case 29:a.next=35;break;case 31:a.prev=31,a.t1=a.catch(9),f=!0,d=a.t1;case 35:a.prev=35,a.prev=36,l||null==v.return||v.return();case 38:if(a.prev=38,!f){a.next=41;break}throw d;case 41:return a.finish(38);case 42:return a.finish(35);case 43:if(w=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&w.length){a.next=46;break}return a.abrupt("return",new t(s,n,i));case 46:if(s=w[0],!c){a.next=50;break}return a.next=50,s._set(u,c.toJSON());case 50:return a.next=52,Promise.all(r.map(function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===s){e.next=8;break}return e.prev=1,e.next=4,n._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()));case 52:return a.abrupt("return",new t(s,n,i));case 53:case"end":return a.stop()}}),a,null,[[9,31,35,43],[13,24],[36,,38,42]])})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Du(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ou(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Pu(t))return"Blackberry";if(Mu(t))return"Webos";if(Nu(t))return"Safari";if((t.includes("chrome/")||Ru(t))&&!t.includes("edge/"))return"Chrome";if(Lu(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/firefox\//i.test(e)}function Nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/crios\//i.test(e)}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/iemobile/i.test(e)}function Lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/android/i.test(e)}function Pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/blackberry/i.test(e)}function Mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/webos/i.test(e)}function Uu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return Uu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Vu(){return((e=Tr()).indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0)&&10===document.documentMode;var e}function ju(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr();return Uu(e)||Lu(e)||Mu(e)||Pu(e)||/windows phone/i.test(e)||Du(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Cu(Tr());break;case"Worker":t="".concat(Cu(Tr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ji,"/").concat(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qu=function(){"use strict";function t(n){e($)(this,t),this.auth=n,this.queue=[]}return e(Z)(t,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(e){r(e)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a,o,s,u,c,l,f,h,d,v,y,m;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:i=[],e.prev=3,a=!0,o=!1,s=void 0,e.prev=5,u=n.queue[Symbol.iterator]();case 7:if(a=(c=u.next()).done){e.next=15;break}return l=c.value,e.next=11,l(t);case 11:l.onAbort&&i.push(l.onAbort);case 12:a=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),o=!0,s=e.t0;case 21:e.prev=21,e.prev=22,a||null==u.return||u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=52;break;case 31:for(e.prev=31,e.t1=e.catch(3),i.reverse(),f=!0,h=!1,d=void 0,e.prev=35,v=i[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){m=y.value;try{m()}catch(e){}}e.next=43;break;case 39:e.prev=39,e.t2=e.catch(35),h=!0,d=e.t2;case 43:e.prev=43,e.prev=44,f||null==v.return||v.return();case 46:if(e.prev=46,!h){e.next=49;break}throw d;case 49:return e.finish(46);case 50:return e.finish(43);case 51:throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 52:case"end":return e.stop()}}),r,null,[[3,31],[5,17,21,29],[22,,24,28],[35,39,43,51],[44,,46,50]])})))()}}]),t}(),zu=function(){"use strict";function t(n,r,i){e($)(this,t),this.app=n,this.heartbeatServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ku(this),this.idTokenSubscription=new Ku(this),this.beforeStateQueue=new qu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Is,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=i.sdkClientVersion}return e(Z)(t,[{key:"_initializeWithPersistence",value:function(t,n){n&&(this._popupRedirectResolver=Ps(n));var r=this;return this._initializationPromise=this.queue(e(h)(e(p).mark((function i(){var a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r._deleted){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Au.create(r,t);case 5:if(r.persistenceManager=e.sent,!r._deleted){e.next=8;break}return e.abrupt("return");case 8:if(!(null===(a=r._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){e.next=16;break}return e.prev=9,e.next=12,r._popupRedirectResolver._initialize(r);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return e.next=18,r.initializeCurrentUser(n);case 18:if(r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted){e.next=21;break}return e.abrupt("return");case 21:r._isInitialized=!0;case 22:case"end":return e.stop()}}),i,null,[[9,14]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.assertedPersistence.getCurrentUser();case 4:if(r=e.sent,t.currentUser||r){e.next=7;break}return e.abrupt("return");case 7:if(!t.currentUser||!r||t.currentUser.uid!==r.uid){e.next=12;break}return t._currentUser._assign(r),e.next=11,t.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,t._updateCurrentUser(r,!0);case 14:case"end":return e.stop()}}),n)})))()}},{key:"initializeCurrentUser",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a,o,s,u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.assertedPersistence.getCurrentUser();case 3:if(a=e.sent,o=a,s=!1,!t||!n.config.authDomain){e.next=15;break}return e.next=9,n.getOrInitRedirectPersistenceManager();case 9:return u=null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId,c=null==o?void 0:o._redirectEventId,e.next=13,n.tryRedirectSignIn(t);case 13:l=e.sent,u&&u!==c||!(null==l?void 0:l.user)||(o=l.user,s=!0);case 15:if(o){e.next=17;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 17:if(o._redirectEventId){e.next=33;break}if(!s){e.next=28;break}return e.prev=19,e.next=22,n.beforeStateQueue.runMiddleware(o);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(19),o=a,n._popupRedirectResolver._overrideRedirectResult(n,(function(){return Promise.reject(e.t0)}));case 28:if(!o){e.next=32;break}return e.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 32:return e.abrupt("return",n.directlySetCurrentUser(null));case 33:return Ns(n._popupRedirectResolver,n,"argument-error"),e.next=36,n.getOrInitRedirectPersistenceManager();case 36:if(!n.redirectUser||n.redirectUser._redirectEventId!==o._redirectEventId){e.next=38;break}return e.abrupt("return",n.directlySetCurrentUser(o));case 38:return e.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 39:case"end":return e.stop()}}),r,null,[[19,24]])})))()}},{key:"tryRedirectSignIn",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,n._popupRedirectResolver._completeRedirectFn(n,t,!0);case 4:i=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,n._setRedirectUser(null);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),r,null,[[1,7]])})))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vu(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=9;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 9:return e.abrupt("return",n.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),r,null,[[0,5]])})))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._deleted=!0;case 1:case"end":return e.stop()}}),n)})))()}},{key:"updateCurrentUser",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=t?Kr(t):null)&&Ns(i.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),e.abrupt("return",n._updateCurrentUser(i&&i._clone(n)));case 3:case"end":return e.stop()}}),r)})))()}},{key:"_updateCurrentUser",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r._deleted){i.next=2;break}return i.abrupt("return");case 2:if(t&&Ns(r.tenantId===t.tenantId,r,"tenant-id-mismatch"),n){i.next=6;break}return i.next=6,r.beforeStateQueue.runMiddleware(t);case 6:return i.abrupt("return",r.queue(e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),n)})))));case 7:case"end":return i.stop()}}),i)})))()}},{key:"signOut",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.beforeStateQueue.runMiddleware(null);case 2:if(!t.redirectPersistenceManager&&!t._popupRedirectResolver){e.next=5;break}return e.next=5,t._setRedirectUser(null);case 5:return e.abrupt("return",t._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),n)})))()}},{key:"setPersistence",value:function(t){var n=this;return this.queue(e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.assertedPersistence.setPersistence(Ps(t));case 2:case"end":return e.stop()}}),r)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Rr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){var a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getOrInitRedirectPersistenceManager(n);case 2:return a=e.sent,e.abrupt("return",null===t?a.removeCurrentUser():a.setCurrentUser(t));case 4:case"end":return e.stop()}}),i)})))()}},{key:"getOrInitRedirectPersistenceManager",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.redirectPersistenceManager){e.next=9;break}return Ns(i=t&&Ps(t)||n._popupRedirectResolver,n,"argument-error"),e.next=5,Au.create(n,[Ps(i._redirectPersistence)],"redirectUser");case 5:return n.redirectPersistenceManager=e.sent,e.next=8,n.redirectPersistenceManager.getCurrentUser();case 8:n.redirectUser=e.sent;case 9:return e.abrupt("return",n.redirectPersistenceManager);case 10:case"end":return e.stop()}}),r)})))()}},{key:"_redirectUserForId",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a;return e(p).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._isInitialized){r.next=4;break}return r.next=4,n.queue(e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)}))));case 4:if((null===(i=n._currentUser)||void 0===i?void 0:i._redirectEventId)!==t){r.next=6;break}return r.abrupt("return",n._currentUser);case 6:if((null===(a=n.redirectUser)||void 0===a?void 0:a._redirectEventId)!==t){r.next=8;break}return r.abrupt("return",n.redirectUser);case 8:return r.abrupt("return",null);case 9:case"end":return r.stop()}}),r)})))()}},{key:"_persistUserIfCurrent",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t!==n.currentUser){r.next=2;break}return r.abrupt("return",n.queue(e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),r)})))));case 2:case"end":return r.stop()}}),r)})))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ns(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.currentUser&&n.currentUser!==t&&n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh(),n.currentUser=t,!t){e.next=8;break}return e.next=6,n.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,n.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),r)})))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ns(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bu(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r,i,a;return e(p).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e(Hn)({},"X-Client-Version",t.clientVersion),t.app.options.appId&&(i["X-Firebase-gmpid"]=t.app.options.appId),n.next=5,null===(r=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===r?void 0:r.getHeartbeatsHeader();case 5:return(a=n.sent)&&(i["X-Firebase-Client"]=a),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(e){return Kr(e)}var Ku=function(){"use strict";function t(n){var r,i,a=this;e($)(this,t),this.auth=n,this.observer=null,this.addObserver=(i=new Br((function(e){return a.observer=e}),r)).subscribe.bind(i)}return e(Z)(t,[{key:"next",get:function(){return Ns(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),t}();function Gu(t,n,r){var i=Hu(t);Ns(i._canInitEmulator,i,"emulator-config-failed"),Ns(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var a=!!(null==r?void 0:r.disableWarnings),o=Wu(n),s=function(t){var n=Wu(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:Qu(i.substr(o.length+1))}}var s=e(zt)(i.split(":"),2);return{host:s[0],port:Qu(s[1])}}(n),u=s.host,c=s.port,l=null===c?"":":".concat(c);i.config.emulator={url:"".concat(o,"//").concat(u).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Wu(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qu(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ju=function(){"use strict";function t(n,r){e($)(this,t),this.providerId=n,this.signInMethod=r}return e(Z)(t,[{key:"toJSON",value:function(){return Rs("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Rs("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Rs("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Rs("not implemented")}}]),t}();function Yu(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $u(e,t){return Zu.apply(this,arguments)}function Zu(){return(Zu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(n,"POST","/v1/accounts:signInWithPassword",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return(tc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nc(e,t){return rc.apply(this,arguments)}function rc(){return(rc=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ic=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e($)(this,r),(o=n.call(this,"password",a))._email=t,o._password=i,o._tenantId=s,o}return e(Z)(r,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$u(t,{returnSecureToken:!0,email:n._email,password:n._password}));case 4:return e.abrupt("return",ec(t,{email:n._email,oobCode:n._password}));case 5:Ss(t,"internal-error");case 6:case"end":return e.stop()}}),r)})))()}},{key:"_linkToIdToken",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Yu(t,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password}));case 4:return e.abrupt("return",nc(t,{idToken:n,email:r._email,oobCode:r._password}));case 5:Ss(t,"internal-error");case 6:case"end":return e.stop()}}),i)})))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new r(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new r(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),r}(Ju);function ac(e,t){return oc.apply(this,arguments)}function oc(){return(oc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(n,"POST","/v1/accounts:signInWithIdp",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){var t;return e($)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).pendingToken=null,t}return e(Z)(r,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ac(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ac(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ac(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ss("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.providerId,i=t.signInMethod,a=ws(t,["providerId","signInMethod"]);if(!n||!i)return null;var o=new r(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),r}(Ju);function uc(e,t){return cc.apply(this,arguments)}function cc(){return(cc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(n,"POST","/v1/accounts:sendVerificationCode",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function lc(){return(lc=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(n,"POST","/v1/accounts:signInWithPhoneNumber",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function fc(){return(fc=e(h)(e(p).mark((function t(n,r){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xs(n,"POST","/v1/accounts:signInWithPhoneNumber",Gs(n,r));case 2:if(!(i=e.sent).temporaryProof){e.next=5;break}throw tu(n,"account-exists-with-different-credential",i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var hc=e(Hn)({},"USER_NOT_FOUND","user-not-found");function dc(){return(dc=e(h)(e(p).mark((function t(n,r){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.assign(Object.assign({},r),{operation:"REAUTH"}),e.abrupt("return",Xs(n,"POST","/v1/accounts:signInWithPhoneNumber",Gs(n,i),hc));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this,"phone","phone")).params=t,i}return e(Z)(r,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return lc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return fc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return dc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new r({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new r({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e.verificationId,n=e.verificationCode,i=e.phoneNumber,a=e.temporaryProof;return n||t||i||a?new r({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:a}):null}}]),r}(Ju);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vc=function(){"use strict";function t(n){var r,i,a,o,s,u;e($)(this,t);var c=Vr(jr(n)),l=null!==(r=c.apiKey)&&void 0!==r?r:null,f=null!==(i=c.oobCode)&&void 0!==i?i:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=c.mode)&&void 0!==a?a:null);Ns(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return e(Z)(t,null,[{key:"parseLink",value:function(e){var n=function(e){var t=Vr(jr(e)).link,n=t?Vr(jr(t)).deep_link_id:null,r=Vr(jr(e)).deep_link_id;return(r?Vr(jr(r)).link:null)||r||n||t||e}(e);try{return new t(n)}catch(e){return null}}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yc=function(){"use strict";function t(){e($)(this,t),this.providerId=t.PROVIDER_ID}return e(Z)(t,null,[{key:"credential",value:function(e,t){return ic._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=vc.parseLink(t);return Ns(n,"argument-error"),ic._fromEmailAndCode(e,n.code,n.tenantId)}}]),t}();yc.PROVIDER_ID="password",yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mc=function(){"use strict";function t(n){e($)(this,t),this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}return e(Z)(t,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),t}(),gc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){var t;return e($)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).scopes=[],t}return e(Z)(r,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return e(Jt)(this.scopes)}}]),r}(mc),kc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.call(this,"facebook.com")}return e(Z)(r,null,[{key:"credential",value:function(e){return sc._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(gc);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kc.FACEBOOK_SIGN_IN_METHOD="facebook.com",kc.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){var t;return e($)(this,r),(t=n.call(this,"google.com")).addScope("profile"),t}return e(Z)(r,null,[{key:"credential",value:function(e,t){return sc._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthIdToken,i=t.oauthAccessToken;if(!n&&!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(gc);wc.GOOGLE_SIGN_IN_METHOD="google.com",wc.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.call(this,"github.com")}return e(Z)(r,null,[{key:"credential",value:function(e){return sc._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(gc);bc.GITHUB_SIGN_IN_METHOD="github.com",bc.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ec=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.call(this,"twitter.com")}return e(Z)(r,null,[{key:"credential",value:function(e,t){return sc._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthAccessToken,i=t.oauthTokenSecret;if(!n||!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(gc);function Ic(e,t){return _c.apply(this,arguments)}function _c(){return(_c=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(n,"POST","/v1/accounts:signUp",Gs(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ec.TWITTER_SIGN_IN_METHOD="twitter.com",Ec.PROVIDER_ID="twitter.com";var xc=function(){"use strict";function t(n){e($)(this,t),this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}return e(Z)(t,null,[{key:"_fromIdTokenResponse",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(h)(e(p).mark((function o(){var s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u._fromIdTokenResponse(n,i,a);case 2:return s=e.sent,u=Tc(i),c=new t({user:s,providerId:u,_tokenResponse:i,operationType:r}),e.abrupt("return",c);case 6:case"end":return e.stop()}}),o)})))()}},{key:"_forOperation",value:function(n,r,i){return e(h)(e(p).mark((function a(){var o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=Tc(i),e.abrupt("return",new t({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return e.stop()}}),a)})))()}}]),t}();function Tc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o){var s,u;return e($)(this,r),(s=n.call(this,i.code,i.message)).operationType=a,s.user=o,Object.setPrototypeOf(e(ae)(s),r.prototype),s.customData={appName:t.name,tenantId:null!==(u=t.tenantId)&&void 0!==u?u:void 0,_serverResponse:i.customData._serverResponse,operationType:a},s}return e(Z)(r,null,[{key:"_fromErrorAndOperation",value:function(e,t,n,i){return new r(e,t,n,i)}}]),r}(Nr);function Ac(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw Sc._fromErrorAndOperation(e,n,t,r);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(e,t){return Oc.apply(this,arguments)}function Oc(){return Oc=e(h)(e(p).mark((function t(n,r){var i,a,o=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]&&o[2],e.t0=lu,e.t1=n,e.t2=r,e.t3=n.auth,e.next=7,n.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=i,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",xc._forOperation(n,"link",a));case 14:case"end":return e.stop()}}),t)}))),Oc.apply(this,arguments)}function Nc(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c,l=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]&&l[2],a=n.auth,o="reauthenticate",e.prev=3,e.next=6,lu(n,Ac(a,o,r,n),i);case 6:return Ns((s=e.sent).idToken,a,"internal-error"),Ns(u=cu(s.idToken),a,"internal-error"),c=u.sub,Ns(n.uid===c,a,"user-mismatch"),e.abrupt("return",xc._forOperation(n,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),"auth/user-not-found"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&Ss(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),t,null,[[3,15]])}))),Rc.apply(this,arguments)}function Dc(e,t){return Lc.apply(this,arguments)}function Lc(){return Lc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i,a,o,s,u=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],a="signIn",e.next=4,Ac(n,a,r);case 4:return o=e.sent,e.next=7,xc._fromIdTokenResponse(n,a,o);case 7:if(s=e.sent,i){e.next=11;break}return e.next=11,n._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),t)}))),Lc.apply(this,arguments)}function Pc(e,t){return Mc.apply(this,arguments)}function Mc(){return(Mc=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(Hu(n),r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Uc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return(Fc=e(h)(e(p).mark((function t(n,r,i){var a,o,s;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Hu(n),e.next=3,Ic(a,{returnSecureToken:!0,email:r,password:i});case 3:return o=e.sent,e.next=6,xc._fromIdTokenResponse(a,"signIn",o);case 6:return s=e.sent,e.next=9,a._updateCurrentUser(s.user);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Vc(e,t){return jc.apply(this,arguments)}function jc(){return(jc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Bc(e,t){return qc.apply(this,arguments)}function qc(){return(qc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.displayName,a=r.photoURL,void 0!==i||void 0!==a){e.next=3;break}return e.abrupt("return");case 3:return o=Kr(n),e.next=6,o.getIdToken();case 6:return s=e.sent,u={idToken:s,displayName:i,photoUrl:a,returnSecureToken:!0},e.next=10,lu(o,Vc(o.auth,u));case 10:return c=e.sent,o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null,(l=o.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=o.displayName,l.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function zc(e,t,n,r){return Kr(e).onIdTokenChanged(t,n,r)}function Hc(e,t,n){return Kr(e).beforeAuthStateChanged(t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kc(e,t){return Ws(e,"POST","/v2/accounts/mfaEnrollment:start",Gs(e,t))}function Gc(e,t){return Ws(e,"POST","/v2/accounts/mfaEnrollment:finalize",Gs(e,t))}new WeakMap;var Wc="__sak",Qc=function(){"use strict";function t(n,r){e($)(this,t),this.storageRetriever=n,this.type=r}return e(Z)(t,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Wc,"1"),this.storage.removeItem(Wc),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){var t,i;return e($)(this,r),(t=n.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(e,n){return t.onStorageEvent(e,n)},t.listeners={},t.localCache={},t.pollTimer=null,t.safariLocalStorageNotSynced=(Nu(i=Tr())||Uu(i))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),t.fallbackToPolling=ju(),t._shouldAllowMigration=!0,t}return e(Z)(r,[{key:"forAllChangedKeys",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(this.listeners)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.storage.getItem(o),u=this.localCache[o];s!==u&&e(o,u,s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"onStorageEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(e.key){var r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}var a=function(){var e=n.storage.getItem(r);(t||n.localCache[r]!==e)&&n.notifyListeners(r,e)},o=this.storage.getItem(r);Vu()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else{var s=this;this.forAllChangedKeys((function(e,t,n){s.notifyListeners(e,n)}))}}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,s=Array.from(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t?JSON.parse(t):t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){var t=e;e.forAllChangedKeys((function(e,n,r){t.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(t,n){var i=this,a=this;return e(h)(e(p).mark((function o(){return e(p).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e(ys)(e(ks)(r.prototype),"_set",i).call(a,t,n);case 2:a.localCache[t]=JSON.stringify(n);case 3:case"end":return o.stop()}}),o)})))()}},{key:"_get",value:function(t){var n=this,i=this;return e(h)(e(p).mark((function a(){var o;return e(p).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(ys)(e(ks)(r.prototype),"_get",n).call(i,t);case 2:return o=a.sent,i.localCache[t]=JSON.stringify(o),a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()}},{key:"_remove",value:function(t){var n=this,i=this;return e(h)(e(p).mark((function a(){return e(p).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(ys)(e(ks)(r.prototype),"_remove",n).call(i,t);case 2:delete i.localCache[t];case 3:case"end":return a.stop()}}),a)})))()}}]),r}(Qc);Jc.type="LOCAL";var Yc=Jc,Xc=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.call(this,(function(){return window.sessionStorage}),"SESSION")}return e(Z)(r,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),r}(Qc);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xc.type="SESSION";var $c=Xc;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){return Promise.all(t.map((n=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:return r=e.sent,e.abrupt("return",{fulfilled:!0,value:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),t,null,[[0,7]])}))),function(e){return n.apply(this,arguments)})));var n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var el=function(){"use strict";function t(n){e($)(this,t),this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return e(Z)(t,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a,o,s,u,c,l,f;return e(p).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(i=t).data,o=a.eventId,s=a.eventType,u=a.data,null==(c=n.handlersMap[s])?void 0:c.size){r.next=5;break}return r.abrupt("return");case 5:return i.ports[0].postMessage({status:"ack",eventId:o,eventType:s}),l=Array.from(c).map(function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(i.origin,u));case 1:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.next=9,Zc(l);case 9:f=r.sent,i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:f});case 11:case"end":return r.stop()}}),r)})))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(e){var n=this.receivers.find((function(t){return t.isListeningto(e)}));if(n)return n;var r=new t(e);return this.receivers.push(r),r}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */el.receivers=[];var nl=function(){"use strict";function t(n){e($)(this,t),this.target=n,this.handlers=new Set}return e(Z)(t,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=this;return e(h)(e(p).mark((function a(){var o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=3;break}throw new Error("connection_unavailable");case 3:return e.abrupt("return",new Promise((function(e,a){var c=tl("",20);o.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);u={messageChannel:o,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),s=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),e(n.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},i.handlers.add(u),o.port1.addEventListener("message",u.onMessage),i.target.postMessage({eventType:t,eventId:c,data:n},[o.port2])})).finally((function(){u&&i.removeMessageHandler(u)})));case 6:case"end":return e.stop()}}),a)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function il(){return void 0!==rl().WorkerGlobalScope&&"function"==typeof rl().importScripts}function al(){return ol.apply(this,arguments)}function ol(){return(ol=e(h)(e(p).mark((function t(){var n;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return n=e.sent,e.abrupt("return",n.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sl="firebaseLocalStorageDb",ul="firebaseLocalStorage",cl="fbase_key",ll=function(){"use strict";function t(n){e($)(this,t),this.request=n}return e(Z)(t,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){var r=e;e.request.addEventListener("success",(function(){t(r.request.result)})),e.request.addEventListener("error",(function(){n(r.request.error)}))}))}}]),t}();function fl(e,t){return e.transaction([ul],t?"readwrite":"readonly").objectStore(ul)}function hl(){var e=indexedDB.deleteDatabase(sl);return new ll(e).toPromise()}function dl(){var t=indexedDB.open(sl,1);return new Promise((function(n,r){t.addEventListener("error",(function(){r(t.error)})),t.addEventListener("upgradeneeded",(function(){var e=t.result;try{e.createObjectStore(ul,{keyPath:cl})}catch(e){r(e)}})),t.addEventListener("success",e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=t.result).objectStoreNames.contains(ul)){e.next=12;break}return i.close(),e.next=5,hl();case 5:return e.t0=n,e.next=8,dl();case 8:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 12:n(i);case 13:case"end":return e.stop()}}),r)}))))}))}function pl(e,t,n){return vl.apply(this,arguments)}function vl(){return(vl=e(h)(e(p).mark((function t(n,r,i){var a,o;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=fl(n,!0).put((a={},e(Hn)(a,cl,r),e(Hn)(a,"value",i),a)),t.abrupt("return",new ll(o).toPromise());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yl(e,t){return ml.apply(this,arguments)}function ml(){return(ml=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fl(n,!1).get(r),e.next=3,new ll(i).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function gl(e,t){var n=fl(e,!0).delete(t);return new ll(n).toPromise()}var kl=function(){"use strict";function t(){e($)(this,t),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return e(Z)(t,[{key:"_openDb",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.db){e.next=2;break}return e.abrupt("return",t.db);case 2:return e.next=4,dl();case 4:return t.db=e.sent,e.abrupt("return",t.db);case 6:case"end":return e.stop()}}),n)})))()}},{key:"_withRetries",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:return e.prev=2,e.next=5,n._openDb();case 5:return a=e.sent,e.next=8,t(a);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(i++>3)){e.next=15;break}throw e.t0;case 15:n.db&&(n.db.close(),n.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),r,null,[[2,11]])})))()}},{key:"initializeServiceWorkerMessaging",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",il()?t.initializeReceiver():t.initializeSender());case 1:case"end":return e.stop()}}),n)})))()}},{key:"initializeReceiver",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.receiver=el._getInstance(il()?self:null),t.receiver._subscribe("keyChanged",function(){var n=e(h)(e(p).mark((function n(r,i){var a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(i.key)});case 4:case"end":return e.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}},{key:"initializeSender",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r,i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,al();case 3:if(t.activeServiceWorker=e.sent,t.activeServiceWorker){e.next=6;break}return e.abrupt("return");case 6:return t.sender=new nl(t.activeServiceWorker),e.next=9,t.sender._send("ping",{},800);case 9:if(a=e.sent){e.next=12;break}return e.abrupt("return");case 12:(null===(r=a[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=a[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0);case 13:case"end":return e.stop()}}),n)})))()}},{key:"notifyServiceWorker",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.sender&&n.activeServiceWorker&&(r=void 0,((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)===n.activeServiceWorker)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,n.sender._send("keyChanged",{key:t},n.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}var r}),r,null,[[2,7]])})))()}},{key:"_isAvailable",value:function(){return e(h)(e(p).mark((function t(){var n;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,dl();case 5:return n=e.sent,e.next=8,pl(n,Wc,"1");case 8:return e.next=10,gl(n,Wc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))()}},{key:"_withPendingWrite",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,n.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),r,null,[[1,,4,7]])})))()}},{key:"_set",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r._withPendingWrite(e(h)(e(p).mark((function i(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return pl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),i)})))));case 1:case"end":return i.stop()}}),i)})))()}},{key:"_get",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return yl(e,t)}));case 2:return i=e.sent,n.localCache[t]=i,e.abrupt("return",i);case 5:case"end":return e.stop()}}),r)})))()}},{key:"_remove",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite(e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return gl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),r)})))));case 1:case"end":return r.stop()}}),r)})))()}},{key:"_poll",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r,i,a,o,s,u,c,l,f,h,d,v,y,m,g,k,w;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._withRetries((function(e){var t=fl(e,!1).getAll();return new ll(t).toPromise()}));case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===t.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:for(i=[],a=new Set,o=!0,s=!1,u=void 0,e.prev=10,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)f=l.value,h=f.fbase_key,d=f.value,a.add(h),JSON.stringify(t.localCache[h])!==JSON.stringify(d)&&(t.notifyListeners(h,d),i.push(h));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,u=e.t0;case 18:e.prev=18,e.prev=19,o||null==c.return||c.return();case 21:if(e.prev=21,!s){e.next=24;break}throw u;case 24:return e.finish(21);case 25:return e.finish(18);case 26:for(v=!0,y=!1,m=void 0,e.prev=27,g=Object.keys(t.localCache)[Symbol.iterator]();!(v=(k=g.next()).done);v=!0)w=k.value,t.localCache[w]&&!a.has(w)&&(t.notifyListeners(w,null),i.push(w));e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),y=!0,m=e.t1;case 35:e.prev=35,e.prev=36,v||null==g.return||g.return();case 38:if(e.prev=38,!y){e.next=41;break}throw m;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",i);case 44:case"end":return e.stop()}}),n,null,[[10,14,18,26],[19,,21,25],[27,31,35,43],[36,,38,42]])})))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,s=Array.from(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){this.stopPolling();var t=this;this.pollTimer=setInterval(e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._poll());case 1:case"end":return e.stop()}}),n)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),t}();kl.type="LOCAL";var wl=kl;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(e,t){return Ws(e,"POST","/v2/accounts/mfaSignIn:start",Gs(e,t))}function El(e,t){return Ws(e,"POST","/v2/accounts/mfaSignIn:finalize",Gs(e,t))}function Il(e){return new Promise((function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=As("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)}))}function _l(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
_l("rcb"),new js(3e4,6e4);var xl="recaptcha";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(e,t,n){return Sl.apply(this,arguments)}function Sl(){return(Sl=e(h)(e(p).mark((function t(n,r,i){var a,o,s,u,c,l,f,h;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,i.verify();case 3:if(o=e.sent,e.prev=4,Ns("string"==typeof o,n,"argument-error"),Ns(i.type===xl,n,"argument-error"),!("session"in(s="string"==typeof r?{phoneNumber:r}:r))){e.next=28;break}if(u=s.session,!("phoneNumber"in s)){e.next=19;break}return Ns("enroll"===u.type,n,"internal-error"),e.next=15,Kc(n,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:o}});case 15:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 19:return Ns("signin"===u.type,n,"internal-error"),Ns(l=(null===(a=s.multiFactorHint)||void 0===a?void 0:a.uid)||s.multiFactorUid,n,"missing-multi-factor-info"),e.next=24,bl(n,{mfaPendingCredential:u.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:o}});case 24:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 26:e.next=32;break;case 28:return e.next=30,uc(n,{phoneNumber:s.phoneNumber,recaptchaToken:o});case 30:return h=e.sent.sessionInfo,e.abrupt("return",h);case 32:return e.prev=32,i._reset(),e.finish(32);case 35:case"end":return e.stop()}}),t,null,[[4,,32,35]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Al=function(){"use strict";function t(n){e($)(this,t),this.providerId=t.PROVIDER_ID,this.auth=Hu(n)}return e(Z)(t,[{key:"verifyPhoneNumber",value:function(e,t){return Tl(this.auth,e,Kr(t))}}],[{key:"credential",value:function(e,t){return pc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(e){var n=e;return t.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?pc._fromTokenResponse(n,r):null}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Cl(e,t){return t?Ps(t):(Ns(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al.PROVIDER_ID="phone",Al.PHONE_SIGN_IN_METHOD="phone";var Ol=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this,"custom","custom")).params=t,i}return e(Z)(r,[{key:"_getIdTokenResponse",value:function(e){return ac(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ac(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ac(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),r}(Ju);function Nl(e){return Dc(e.auth,new Ol(e),e.bypassAuthState)}function Rl(e){var t=e.auth,n=e.user;return Ns(n,t,"internal-error"),Nc(n,new Ol(e),e.bypassAuthState)}function Dl(e){return Ll.apply(this,arguments)}function Ll(){return(Ll=e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.auth,Ns(i=n.user,r,"internal-error"),e.abrupt("return",Cc(i,new Ol(n),n.bypassAuthState));case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pl=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e($)(this,t),this.auth=n,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}return e(Z)(t,[{key:"execute",value:function(){var t,n=this;return new Promise((t=e(h)(e(p).mark((function t(r,i){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingPromise={resolve:r,reject:i},e.prev=1,e.next=4,n.resolver._initialize(n.auth);case 4:return n.eventManager=e.sent,e.next=7,n.onExecution();case 7:n.eventManager.registerConsumer(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.reject(e.t0);case 13:case"end":return e.stop()}}),t,null,[[1,10]])}))),function(e,n){return t.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a,o,s,u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.urlResponse,a=t.sessionId,o=t.postBody,s=t.tenantId,u=t.error,c=t.type,!u){e.next=4;break}return n.reject(u),e.abrupt("return");case 4:return l={auth:n.auth,requestUri:i,sessionId:a,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState},e.prev=5,e.t0=n,e.next=9,n.getIdpTask(c)(l);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),n.reject(e.t2);case 16:case"end":return e.stop()}}),r,null,[[5,13]])})))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nl;case"linkViaPopup":case"linkViaRedirect":return Dl;case"reauthViaPopup":case"reauthViaRedirect":return Rl;default:Ss(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),t}(),Ml=new js(2e3,1e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ul=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o,s){var u;return e($)(this,r),(u=n.call(this,t,i,o,s)).provider=a,u.authWindow=null,u.pollId=null,r.currentPopupAction&&r.currentPopupAction.cancel(),r.currentPopupAction=e(ae)(u),u}return e(Z)(r,[{key:"executeNotNull",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.execute();case 2:return Ns(r=e.sent,t.auth,"internal-error"),e.abrupt("return",r);case 5:case"end":return e.stop()}}),n)})))()}},{key:"onExecution",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ds(1===t.filter.length,"Popup operations only handle one event"),r=tl(),e.next=4,t.resolver._openPopup(t.auth,t.provider,t.filter[0],r);case 4:t.authWindow=e.sent,t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch((function(e){t.reject(e)})),t.resolver._isIframeWebStorageSupported(t.auth,(function(e){e||t.reject(As(t.auth,"web-storage-unsupported"))})),t.pollUserCancellation();case 9:case"end":return e.stop()}}),n)})))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(As(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this,t=function(){var n,r;if(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed){var i=e;e.pollId=window.setTimeout((function(){i.pollId=null,i.reject(As(i.auth,"popup-closed-by-user"))}),2e3)}else e.pollId=window.setTimeout(t,Ml.get())};t()}}]),r}(Pl);Ul.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fl=new Map,Vl=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e($)(this,r),(a=n.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,o)).eventId=null,a}return e(Z)(r,[{key:"execute",value:function(){var t=this,n=this;return e(h)(e(p).mark((function i(){var a,o;return e(p).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=Fl.get(n.auth._key())){i.next=21;break}return i.prev=2,i.next=5,jl(n.resolver,n.auth);case 5:if(!i.sent){i.next=12;break}return i.next=9,e(ys)(e(ks)(r.prototype),"execute",t).call(n);case 9:i.t0=i.sent,i.next=13;break;case 12:i.t0=null;case 13:o=i.t0,a=function(){return Promise.resolve(o)},i.next=20;break;case 17:i.prev=17,i.t1=i.catch(2),a=function(){return Promise.reject(i.t1)};case 20:Fl.set(n.auth._key(),a);case 21:return n.bypassAuthState||Fl.set(n.auth._key(),(function(){return Promise.resolve(null)})),i.abrupt("return",a());case 23:case"end":return i.stop()}}),i,null,[[2,17]])})))()}},{key:"onAuthEvent",value:function(t){var n=this,i=this,a=function(){return e(ys)(e(ks)(r.prototype),"onAuthEvent",n)};return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",a().call(i,t));case 4:if("unknown"!==t.type){e.next=7;break}return i.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,i.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return i.user=r,e.abrupt("return",a().call(i,t));case 16:i.resolve(null);case 17:case"end":return e.stop()}}),n)})))()}},{key:"onExecution",value:function(){return e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})))()}},{key:"cleanUp",value:function(){}}]),r}(Pl);function jl(e,t){return Bl.apply(this,arguments)}function Bl(){return(Bl=e(h)(e(p).mark((function t(n,r){var i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hl(r),a=zl(n),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(i);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,a._remove(i);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ql(e,t){Fl.set(e._key(),t)}function zl(e){return Ps(e._redirectPersistence)}function Hl(e){return Su("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e,t){return Gl.apply(this,arguments)}function Gl(){return Gl=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]&&c[2],a=Hu(n),o=Cl(a,r),s=new Vl(a,o,i),e.next=6,s.execute();case 6:if(!(u=e.sent)||i){e.next=13;break}return delete u.user._redirectEventId,e.next=11,a._persistUserIfCurrent(u.user);case 11:return e.next=13,a._setRedirectUser(null,r);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),t)}))),Gl.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wl=function(){"use strict";function t(n){e($)(this,t),this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return e(Z)(t,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Jl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(As(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ql(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ql(e)),this.lastProcessedEventTime=Date.now()}}]),t}();function Ql(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Jl(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Yl(e){return Xl.apply(this,arguments)}function Xl(){return Xl=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){var r,i=arguments;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",Ws(n,"GET","/v1/projects",r));case 2:case"end":return e.stop()}}),t)}))),Xl.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $l=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zl=/^https?/;function ef(){return(ef=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Yl(n);case 4:r=e.sent.authorizedDomains,i=!0,a=!1,o=void 0,e.prev=6,s=r[Symbol.iterator]();case 8:if(i=(u=s.next()).done){e.next=20;break}if(c=u.value,e.prev=10,!tf(c)){e.next=13;break}return e.abrupt("return");case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:i=!0,e.next=8;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(6),a=!0,o=e.t1;case 26:e.prev=26,e.prev=27,i||null==s.return||s.return();case 29:if(e.prev=29,!a){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:Ss(n,"unauthorized-domain");case 35:case"end":return e.stop()}}),t,null,[[6,22,26,34],[10,15],[27,,29,33]])})))).apply(this,arguments)}function tf(e){var t=Us(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Zl.test(r))return!1;if($l.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nf=new js(3e4,6e4);function rf(){var t=rl().___jsl,n=!0,r=!1,i=void 0;if(null==t?void 0:t.H)try{for(var a,o=Object.keys(t.H)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(t.H[s].r=t.H[s].r||[],t.H[s].L=t.H[s].L||[],t.H[s].r=e(Jt)(t.H[s].L),t.CP)for(var u=0;u<t.CP.length;u++)t.CP[u]=null}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}var af=null;function of(e){return af=af||function(e){return new Promise((function(t,n){var r,i,a;function o(){rf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){rf(),n(As(e,"network-request-failed"))},timeout:nf.get()})}if(null===(i=null===(r=rl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=rl().gapi)||void 0===a?void 0:a.load)){var s=_l("iframefcb");return rl()[s]=function(){gapi.load?o():n(As(e,"network-request-failed"))},Il("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw af=null,e}))}(e),af}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sf=new js(5e3,15e3),uf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lf(e){var t=e.config;Ns(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Bs(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ji},i=cf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Fr(r).slice(1))}function ff(e){return hf.apply(this,arguments)}function hf(){return hf=e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,of(n);case 2:return r=t.sent,Ns(i=rl().gapi,n,"internal-error"),t.abrupt("return",r.open({where:document.body,url:lf(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uf,dontclear:!0},(function(t){return new Promise((r=e(h)(e(p).mark((function r(i,a){var o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){rl().clearTimeout(s),i(t)},e.next=3,t.restyle({setHideOnLeave:!1});case 3:o=As(n,"network-request-failed"),s=rl().setTimeout((function(){a(o)}),sf.get()),t.ping(u).then(u,(function(){a(o)}));case 7:case"end":return e.stop()}}),r)}))),function(e,t){return r.apply(this,arguments)}));var r})));case 6:case"end":return t.stop()}}),t)}))),hf.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var df={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pf="_blank",vf="http://localhost",yf=function(){"use strict";function t(n){e($)(this,t),this.window=n,this.associatedEvent=null}return e(Z)(t,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),t}();function mf(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),u="",c=Object.assign(Object.assign({},df),{width:i.toString(),height:a.toString(),top:o,left:s}),l=Tr().toLowerCase();r&&(u=Ru(l)?pf:r),Ou(l)&&(n=n||vf,c.scrollbars="yes");var f=Object.entries(c).reduce((function(t,n){var r=e(zt)(n,2),i=r[0],a=r[1];return"".concat(t).concat(i,"=").concat(a,",")}),"");if(Fu(l)&&"_self"!==u)return gf(n||"",u),new yf(null);var h=window.open(n||"",u,f);Ns(h,t,"popup-blocked");try{h.focus()}catch(e){}return new yf(h)}function gf(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kf="__/auth/handler",wf="emulator/auth/handler";function bf(t,n,r,i,a,o){Ns(t.config.authDomain,t,"auth-domain-config-required"),Ns(t.config.apiKey,t,"invalid-api-key");var s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:ji,eventId:a};if(n instanceof mc){n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Pr(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters()));var u=!0,c=!1,l=void 0;try{for(var f,h=Object.entries(o||{})[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=e(zt)(f.value,2),p=d[0],v=d[1];s[p]=v}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}if(n instanceof gc){var y=n.getScopes().filter((function(e){return""!==e}));y.length>0&&(s.scopes=y.join(","))}t.tenantId&&(s.tid=t.tenantId);var m,g,k=s,w=!0,b=!1,E=void 0;try{for(var I,_=Object.keys(k)[Symbol.iterator]();!(w=(I=_.next()).done);w=!0){var x=I.value;void 0===k[x]&&delete k[x]}}catch(e){b=!0,E=e}finally{try{w||null==_.return||_.return()}finally{if(b)throw E}}return"".concat((m=t,g=m.config,g.emulator?Bs(g,wf):"https://".concat(g.authDomain,"/").concat(kf)),"?").concat(Fr(k).slice(1))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ef="webStorageSupport",If=function(){"use strict";function t(){e($)(this,t),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$c,this._completeRedirectFn=Kl,this._overrideRedirectResult=ql}return e(Z)(t,[{key:"_openPopup",value:function(t,n,r,i){var a=this;return e(h)(e(p).mark((function o(){var s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ds(null===(s=a.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),u=bf(t,n,r,Us(),i),e.abrupt("return",mf(t,u,tl()));case 4:case"end":return e.stop()}}),o)})))()}},{key:"_openRedirect",value:function(t,n,r,i){var a=this;return e(h)(e(p).mark((function o(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._originValidation(t);case 2:return o=bf(t,n,r,Us(),i),rl().location.href=o,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var o}),o)})))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ds(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ff(t);case 2:return i=e.sent,a=new Wl(t),i.register("authEvent",(function(e){return Ns(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:a.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:a},n.iframes[t._key()]=i,e.abrupt("return",a);case 8:case"end":return e.stop()}}),r)})))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ef,{type:Ef},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ss(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ef.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ju()||Nu()||Uu()}}]),t}(),_f=If,xf=function(){"use strict";function t(n){e($)(this,t),this.factorId=n}return e(Z)(t,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Rs("unexpected MultiFactorSessionType")}}}]),t}(),Tf=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this,"phone")).credential=t,i}return e(Z)(r,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ws(e,"POST","/v2/accounts/mfaEnrollment:finalize",Gs(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ws(e,"POST","/v2/accounts/mfaSignIn:finalize",Gs(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new r(e)}}]),r}(xf);(function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,null,[{key:"assertion",value:function(e){return Tf._fromCredential(e)}}]),t}()).FACTOR_ID="phone",(function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,null,[{key:"assertionForEnrollment",value:function(e,t){return Sf._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Sf._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(t){return e(h)(e(p).mark((function n(){var r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns(void 0!==(r=t).auth,"internal-error"),e.next=4,n=r.auth,a={idToken:r.credential,totpEnrollmentInfo:{}},Ws(n,"POST","/v2/accounts/mfaEnrollment:start",Gs(n,a));case 4:return i=e.sent,e.abrupt("return",Af._fromStartTotpMfaEnrollmentResponse(i,r.auth));case 6:case"end":return e.stop()}var n,a}),n)})))()}}]),t}()).FACTOR_ID="totp";var Sf=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o;return e($)(this,r),(o=n.call(this,"totp")).otp=t,o.enrollmentId=i,o.secret=a,o}return e(Z)(r,[{key:"_finalizeEnroll",value:function(t,n,r){var i=this;return e(h)(e(p).mark((function a(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns(void 0!==i.secret,t,"argument-error"),e.abrupt("return",Gc(t,{idToken:n,displayName:r,totpVerificationInfo:i.secret._makeTotpVerificationInfo(i.otp)}));case 2:case"end":return e.stop()}}),a)})))()}},{key:"_finalizeSignIn",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){var a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns(void 0!==r.enrollmentId&&void 0!==r.otp,t,"argument-error"),a={verificationCode:r.otp},e.abrupt("return",El(t,{mfaPendingCredential:n,mfaEnrollmentId:r.enrollmentId,totpVerificationInfo:a}));case 3:case"end":return e.stop()}}),i)})))()}}],[{key:"_fromSecret",value:function(e,t){return new r(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new r(t,e)}}]),r}(xf),Af=function(){"use strict";function t(n,r,i,a,o,s,u){e($)(this,t),this.sessionInfo=s,this.auth=u,this.secretKey=n,this.hashingAlgorithm=r,this.codeLength=i,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=o}return e(Z)(t,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Cf(e)||Cf(t))&&(r=!0),r&&(Cf(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Cf(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(e,n){return new t(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}}]),t}();function Cf(e){return void 0===e||0===(null==e?void 0:e.length)}var Of="@firebase/auth",Nf="0.22.0",Rf=function(){"use strict";function t(n){e($)(this,t),this.auth=n,this.internalListeners=new Map}return e(Z)(t,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(t){var n=this;return e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.assertAuthConfigured(),e.next=3,n.auth._initializationPromise;case 3:if(n.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,n.auth.currentUser.getIdToken(t);case 7:return i=e.sent,e.abrupt("return",{accessToken:i});case 9:case"end":return e.stop()}}),r)})))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ns(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Df,Lf=Ir("authIdTokenMaxAge")||300,Pf=null,Mf=function(t){return n=e(h)(e(p).mark((function n(r){var i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=5;break}return e.next=4,r.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(i=e.t0,!((a=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3)&&a>Lf)){e.next=9;break}return e.abrupt("return");case 9:if(o=null==i?void 0:i.token,Pf!==o){e.next=12;break}return e.abrupt("return");case 12:return Pf=o,e.next=15,fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 15:case"end":return e.stop()}}),n)}))),function(e){return n.apply(this,arguments)};var n};Df="Browser",Pi(new Gr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Ns(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Ns(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Df,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bu(Df)},i=new zu(e,t,r);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ps);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Pi(new Gr("auth-internal",(function(e){var t=Hu(e.getProvider("auth").getImmediate());return new Rf(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),zi(Of,Nf,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Df)),zi(Of,Nf,"esm2017");var Uf,Ff=i("ge8co"),Vf=(ks=i("fVNic"),i("jmhxu")),jf=(y=i("l5bVx"),ks=i("fVNic"),y=i("l5bVx"),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}),Bf={},qf=qf||{},zf=jf||self;function Hf(){}function Kf(t){var n=void 0===t?"undefined":e(y)(t);return"array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length}function Gf(t){var n=void 0===t?"undefined":e(y)(t);return"object"==n&&null!=t||"function"==n}var Wf="closure_uid_"+(1e9*Math.random()>>>0),Qf=0;function Jf(e,t,n){return e.call.apply(e.bind,arguments)}function Yf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xf(e,t,n){return(Xf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jf:Yf).apply(null,arguments)}function $f(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Zf(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function eh(){this.s=this.s,this.o=this.o}eh.prototype.s=!1,eh.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Wf)&&e[Wf]||(e[Wf]=++Qf))},eh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var th=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function nh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function rh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Kf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ih(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ih.prototype.h=function(){this.defaultPrevented=!0};var ah=function(){if(!zf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{zf.addEventListener("test",Hf,t),zf.removeEventListener("test",Hf,t)}catch(e){}return e}();function oh(e){return/^[\s\xa0]*$/.test(e)}var sh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function uh(e,t){return e<t?-1:e>t?1:0}function ch(){var e=zf.navigator;return e&&(e=e.userAgent)?e:""}function lh(e){return-1!=ch().indexOf(e)}function fh(e){return fh[" "](e),e}fh[" "]=Hf;var hh,dh,ph=lh("Opera"),vh=lh("Trident")||lh("MSIE"),yh=lh("Edge"),mh=yh||vh,gh=lh("Gecko")&&!(-1!=ch().toLowerCase().indexOf("webkit")&&!lh("Edge"))&&!(lh("Trident")||lh("MSIE"))&&!lh("Edge"),kh=-1!=ch().toLowerCase().indexOf("webkit")&&!lh("Edge");function wh(){var e=zf.document;return e?e.documentMode:void 0}e:{var bh="",Eh=(dh=ch(),gh?/rv:([^\);]+)(\)|;)/.exec(dh):yh?/Edge\/([\d\.]+)/.exec(dh):vh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dh):kh?/WebKit\/(\S+)/.exec(dh):ph?/(?:Version)[ \/]?(\S+)/.exec(dh):void 0);if(Eh&&(bh=Eh?Eh[1]:""),vh){var Ih=wh();if(null!=Ih&&Ih>parseFloat(bh)){hh=String(Ih);break e}}hh=bh}var _h,xh={};function Th(){return function(e){var t=xh;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=sh(String(hh)).split("."),n=sh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=uh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||uh(0==a[2].length,0==o[2].length)||uh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(zf.document&&vh){var Sh=wh();_h=Sh||(parseInt(hh,10)||void 0)}else _h=void 0;var Ah=_h;function Ch(e,t){if(ih.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gh){e:{try{fh(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Oh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ch.X.h.call(this)}}Zf(Ch,ih);var Oh={2:"touch",3:"pen",4:"mouse"};Ch.prototype.h=function(){Ch.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Nh="closure_listenable_"+(1e6*Math.random()|0),Rh=0;function Dh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Rh,this.ba=this.ea=!1}function Lh(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Ph(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Mh(e){var t={};for(var n in e)t[n]=e[n];return t}var Uh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Uh.length;a++)n=Uh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vh(e){this.src=e,this.g={},this.h=0}function jh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=th(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Lh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Vh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Bh(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Dh(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var qh="closure_lm_"+(1e6*Math.random()|0),zh={};function Hh(e,t,n,r,i){if(r&&r.once)return Gh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Hh(e,t[a],n,r,i);return null}return n=Zh(n),e&&e[Nh]?e.N(t,n,Gf(r)?!!r.capture:!!r,i):Kh(e,t,n,!1,r,i)}function Kh(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gf(i)?!!i.capture:!!i,s=Xh(e);if(s||(e[qh]=s=new Vh(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Yh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ah||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gh(e,t[a],n,r,i);return null}return n=Zh(n),e&&e[Nh]?e.O(t,n,Gf(r)?!!r.capture:!!r,i):Kh(e,t,n,!0,r,i)}function Wh(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Wh(e,t[a],n,r,i);else r=Gf(r)?!!r.capture:!!r,n=Zh(n),e&&e[Nh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bh(a=e.g[t],n,r,i))&&(Lh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Xh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bh(t,n,r,i)),(n=-1<e?t[e]:null)&&Qh(n))}function Qh(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Nh])jh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Xh(t))?(jh(n,e),0==n.h&&(n.src=null,t[qh]=null)):Lh(e)}}}function Jh(e){return e in zh?zh[e]:zh[e]="on"+e}function Yh(e,t){if(e.ba)e=!0;else{t=new Ch(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Qh(e),e=n.call(r,t)}return e}function Xh(e){return(e=e[qh])instanceof Vh?e:null}var $h="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zh(e){return"function"==typeof e?e:(e[$h]||(e[$h]=function(t){return e.handleEvent(t)}),e[$h])}function ed(){eh.call(this),this.i=new Vh(this),this.P=this,this.I=null}function td(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ih(t,e);else if(t instanceof ih)t.target=t.target||e;else{var i=t;Fh(t=new ih(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=nd(o,r,!0,t)&&i}if(i=nd(o=t.g=e,r,!0,t)&&i,i=nd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=nd(o=t.g=n[a],r,!1,t)&&i}function nd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&jh(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Zf(ed,eh),ed.prototype[Nh]=!0,ed.prototype.removeEventListener=function(e,t,n,r){Wh(this,e,t,n,r)},ed.prototype.M=function(){if(ed.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Lh(n[r]);delete t.g[e],t.h--}}this.I=null},ed.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ed.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var rd=zf.JSON.stringify;function id(){var e=hd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ad,od=function(){"use strict";function t(){e($)(this,t),this.h=this.g=null}return e(Z)(t,[{key:"add",value:function(e,t){var n=sd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),sd=new(function(){"use strict";function t(n,r){e($)(this,t),this.i=n,this.j=r,this.h=0,this.g=null}return e(Z)(t,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),t}())((function(){return new ud}),(function(e){return e.reset()})),ud=function(){"use strict";function t(){e($)(this,t),this.next=this.g=this.h=null}return e(Z)(t,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function cd(e){zf.setTimeout((function(){throw e}),0)}function ld(e,t){ad||function(){var e=zf.Promise.resolve(void 0);ad=function(){e.then(dd)}}(),fd||(ad(),fd=!0),hd.add(e,t)}var fd=!1,hd=new od;function dd(){for(var e;e=id();){try{e.h.call(e.g)}catch(e){cd(e)}var t=sd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}fd=!1}function pd(e,t){ed.call(this),this.h=e||1,this.g=t||zf,this.j=Xf(this.lb,this),this.l=Date.now()}function vd(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function yd(e,t,n){if("function"==typeof e)n&&(e=Xf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xf(e.handleEvent,e)}return 2147483647<Number(t)?-1:zf.setTimeout(e,t||0)}function md(e){e.g=yd((function(){e.g=null,e.i&&(e.i=!1,md(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Zf(pd,ed),(Uf=pd.prototype).ca=!1,Uf.R=null,Uf.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),td(this,"tick"),this.ca&&(vd(this),this.start()))}},Uf.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Uf.M=function(){pd.X.M.call(this),vd(this),delete this.g};var gd=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this)).m=t,a.j=i,a.h=null,a.i=!1,a.g=null,a}return e(Z)(r,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:md(this)}},{key:"M",value:function(){e(ys)(e(ks)(r.prototype),"M",this).call(this),this.g&&(zf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),r}(eh);function kd(e){eh.call(this),this.h=e,this.g={}}Zf(kd,eh);var wd=[];function bd(e,t,n,r){Array.isArray(n)||(n&&(wd[0]=n.toString()),n=wd);for(var i=0;i<n.length;i++){var a=Hh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ed(e){Ph(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Qh(e)}),e),e.g={}}function Id(){this.g=!0}function _d(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return rd(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}kd.prototype.M=function(){kd.X.M.call(this),Ed(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Id.prototype.Aa=function(){this.g=!1},Id.prototype.info=function(){};var xd={},Td=null;function Sd(){return Td=Td||new ed}function Ad(e){ih.call(this,xd.Pa,e)}function Cd(e){var t=Sd();td(t,new Ad(t))}function Od(e,t){ih.call(this,xd.STAT_EVENT,e),this.stat=t}function Nd(e){var t=Sd();td(t,new Od(t,e))}function Rd(e,t){ih.call(this,xd.Qa,e),this.size=t}function Dd(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return zf.setTimeout((function(){e()}),t)}xd.Pa="serverreachability",Zf(Ad,ih),xd.STAT_EVENT="statevent",Zf(Od,ih),xd.Qa="timingevent",Zf(Rd,ih);var Ld={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Pd={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Md(){}function Ud(e){return e.h||(e.h=e.i())}function Fd(){}Md.prototype.h=null;var Vd,jd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Bd(){ih.call(this,"d")}function qd(){ih.call(this,"c")}function zd(){}function Hd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new kd(this),this.O=Gd,e=mh?125:void 0,this.T=new pd(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Kd}function Kd(){this.i=null,this.g="",this.h=!1}Zf(Bd,ih),Zf(qd,ih),Zf(zd,Md),zd.prototype.g=function(){return new XMLHttpRequest},zd.prototype.i=function(){return{}},Vd=new zd;var Gd=45e3,Wd={},Qd={};function Jd(e,t,n){e.K=1,e.v=pp(cp(t)),e.s=n,e.P=!0,Yd(e,null)}function Yd(e,t){e.F=Date.now(),ep(e),e.A=cp(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Sp(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Kd,e.g=Sv(e.l,n?t:null,!e.s),0<e.N&&(e.L=new gd(Xf(e.La,e,e.g),e.N)),bd(e.S,e.g,"readystatechange",e.ib),t=e.H?Mh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Cd(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Xd(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function $d(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Zd(e,n))==Qd){4==t&&(e.o=4,Nd(14),i=!1),_d(e.j,e.m,null,"[Incomplete Response]");break}if(r==Wd){e.o=4,Nd(15),_d(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_d(e.j,e.m,r,null),ap(e,r)}Xd(e)&&r!=Qd&&r!=Wd&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Nd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),kv(t),t.K=!0,Nd(11))):(_d(e.j,e.m,n,"[Invalid Chunked Response]"),ip(e),rp(e))}function Zd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qd:(n=Number(t.substring(n,r)),isNaN(n)?Wd:(r+=1)+n>t.length?Qd:(t=t.substr(r,n),e.C=r+n,t))}function ep(e){e.V=Date.now()+e.O,tp(e,e.O)}function tp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Dd(Xf(e.gb,e),t)}function np(e){e.B&&(zf.clearTimeout(e.B),e.B=null)}function rp(e){0==e.l.G||e.I||Ev(e.l,e)}function ip(e){np(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,vd(e.T),Ed(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ap(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Lp(n.h,e)))if(!e.J&&Lp(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bv(n),fv(n)}gv(n),Nd(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Dd(Xf(n.cb,n),6e3));if(1>=Dp(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else _v(n,11)}else if((e.J||n.g==e)&&bv(n),!oh(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Pp(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,dp(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Tv(r,r.H?r.ka:null,r.V),d.J){Mp(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(np(p),ep(p)),r.g=d}else mv(r);0<n.i.length&&dv(n)}else"stop"!=a[0]&&"close"!=a[0]||_v(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?_v(n,7):lv(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Cd()}catch(a){}}function op(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kf(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Kf(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Kf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Uf=Hd.prototype).setTimeout=function(e){this.O=e},Uf.ib=function(e){e=e.target;var t=this.L;t&&3==iv(e)?t.l():this.La(e)},Uf.La=function(e){try{if(e==this.g)e:{var t=iv(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||mh||this.g&&(this.h.h||this.g.fa()||av(this.g)))){this.I||4!=t||7==n||Cd(),np(this);var r=this.g.aa();this.Y=r;t:if(Xd(this)){var i=av(this.g);e="";var a=i.length,o=4==iv(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ip(this),rp(this);var s="";break t}this.h.i=new zf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oh(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Nd(12),ip(this),rp(this);break e}_d(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ap(this,r)}this.P?($d(this,t,s),mh&&this.i&&3==t&&(bd(this.S,this.T,"tick",this.hb),this.T.start())):(_d(this.j,this.m,s,null),ap(this,s)),4==t&&ip(this),this.i&&!this.I&&(4==t?Ev(this.l,this):(this.i=!1,ep(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Nd(12)):(this.o=0,Nd(13)),ip(this),rp(this)}}}catch(t){}},Uf.hb=function(){if(this.g){var e=iv(this.g),t=this.g.fa();this.C<t.length&&(np(this),$d(this,e,t),this.i&&4!=e&&ep(this))}},Uf.cancel=function(){this.I=!0,ip(this)},Uf.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cd(),Nd(17)),ip(this),this.o=2,rp(this)):tp(this,this.V-e)};var sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function up(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof up){this.h=void 0!==t?t:e.h,lp(this,e.j),this.s=e.s,this.g=e.g,fp(this,e.m),this.l=e.l,t=e.i;var n=new Ip;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),hp(this,n),this.o=e.o}else e&&(n=String(e).match(sp))?(this.h=!!t,lp(this,n[1]||"",!0),this.s=vp(n[2]||""),this.g=vp(n[3]||"",!0),fp(this,n[4]),this.l=vp(n[5]||"",!0),hp(this,n[6]||"",!0),this.o=vp(n[7]||"")):(this.h=!!t,this.i=new Ip(null,this.h))}function cp(e){return new up(e)}function lp(e,t,n){e.j=n?vp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function hp(e,t,n){t instanceof Ip?(e.i=t,function(e,t){t&&!e.j&&(_p(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xp(this,t),Sp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=yp(t,bp)),e.i=new Ip(t,e.h))}function dp(e,t,n){e.i.set(t,n)}function pp(e){return dp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function yp(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,mp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}up.prototype.toString=function(){var e=[],t=this.j;t&&e.push(yp(t,gp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(yp(t,gp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(yp(n,"/"==n.charAt(0)?wp:kp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",yp(n,Ep)),e.join("")};var gp=/[#\/\?@]/g,kp=/[#\?:]/g,wp=/[#\?]/g,bp=/[#\?@]/g,Ep=/#/g;function Ip(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _p(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xp(e,t){_p(e),t=Ap(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tp(e,t){return _p(e),t=Ap(e,t),e.g.has(t)}function Sp(e,t,n){xp(e,t),0<n.length&&(e.i=null,e.g.set(Ap(e,t),nh(n)),e.h+=n.length)}function Ap(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Uf=Ip.prototype).add=function(e,t){_p(this),this.i=null,e=Ap(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Uf.forEach=function(e,t){_p(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Uf.oa=function(){_p(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Uf.W=function(e){_p(this);var t=[];if("string"==typeof e)Tp(this,e)&&(t=t.concat(this.g.get(Ap(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Uf.set=function(e,t){return _p(this),this.i=null,Tp(this,e=Ap(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Uf.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Uf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Cp=function t(n,r){"use strict";e($)(this,t),this.h=n,this.g=r};function Op(e){this.l=e||Np,zf.PerformanceNavigationTiming?e=0<(e=zf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(zf.g&&zf.g.Ga&&zf.g.Ga()&&zf.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Np=10;function Rp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Dp(e){return e.h?1:e.g?e.g.size:0}function Lp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Pp(e,t){e.g?e.g.add(t):e.h=t}function Mp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Up(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t=e.i,n=!0,r=!1,i=void 0;try{for(var a,o=e.g.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t.concat(s.D)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}return nh(e.i)}function Fp(){}function Vp(){this.g=new Fp}function jp(e,t,n){var r=n||"";try{op(e,(function(e,n){var i=e;Gf(e)&&(i=rd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Bp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function qp(e){this.l=e.ac||null,this.j=e.jb||!1}function zp(e,t){ed.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Hp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Op.prototype.cancel=function(){if(this.i=Up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e=!0,t=!1,n=void 0;try{for(var r,i=this.g.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cancel()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.g.clear()}},Fp.prototype.stringify=function(e){return zf.JSON.stringify(e,void 0)},Fp.prototype.parse=function(e){return zf.JSON.parse(e,void 0)},Zf(qp,Md),qp.prototype.g=function(){return new zp(this.l,this.j)},qp.prototype.i=function(e){return function(){return e}}({}),Zf(zp,ed);var Hp=0;function Kp(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Gp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wp(e)}function Wp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Uf=zp.prototype).open=function(e,t){if(this.readyState!=Hp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wp(this)},Uf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||zf).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Uf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gp(this)),this.readyState=Hp},Uf.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wp(this)),this.g&&(this.readyState=3,Wp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==zf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kp(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Uf.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gp(this):Wp(this),3==this.readyState&&Kp(this)}},Uf.Va=function(e){this.g&&(this.response=this.responseText=e,Gp(this))},Uf.Ua=function(e){this.g&&(this.response=e,Gp(this))},Uf.ga=function(){this.g&&Gp(this)},Uf.setRequestHeader=function(e,t){this.v.append(e,t)},Uf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Uf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qp=zf.JSON.parse;function Jp(e){ed.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yp,this.K=this.L=!1}Zf(Jp,ed);var Yp="",Xp=/^https?$/i,$p=["POST","PUT"];function Zp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ev(e),nv(e)}function ev(e){e.D||(e.D=!0,td(e,"complete"),td(e,"error"))}function tv(e){if(e.h&&void 0!==qf&&(!e.C[1]||4!=iv(e)||2!=e.aa()))if(e.v&&4==iv(e))yd(e.Ha,0,e);else if(td(e,"readystatechange"),4==iv(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(sp)[1]||null;if(!a&&zf.self&&zf.self.location){var o=zf.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xp.test(a?a.toLowerCase():"")}t=i}if(t)td(e,"complete"),td(e,"success");else{e.m=6;try{var s=2<iv(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.aa()+"]",ev(e)}}finally{nv(e)}}}function nv(e,t){if(e.g){rv(e);var n=e.g,r=e.C[0]?Hf:null;e.g=null,e.C=null,t||td(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function rv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(zf.clearTimeout(e.A),e.A=null)}function iv(e){return e.g?e.g.readyState:0}function av(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Yp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ov(e){var t="";return Ph(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function sv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ov(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):dp(e,t,n))}function uv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cv(e){this.Ca=0,this.i=[],this.j=new Id,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=uv("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=uv("baseRetryDelayMs",5e3,e),this.bb=uv("retryDelaySeedMs",1e4,e),this.$a=uv("forwardChannelMaxRetries",2,e),this.ta=uv("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Op(e&&e.concurrentRequestLimit),this.Fa=new Vp,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function lv(e){if(hv(e),3==e.G){var t=e.U++,n=cp(e.F);dp(n,"SID",e.I),dp(n,"RID",t),dp(n,"TYPE","terminate"),vv(e,n),(t=new Hd(e,e.j,t,void 0)).K=2,t.v=pp(cp(n)),n=!1,zf.navigator&&zf.navigator.sendBeacon&&(n=zf.navigator.sendBeacon(t.v.toString(),"")),!n&&zf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sv(t.l,null),t.g.da(t.v)),t.F=Date.now(),ep(t)}xv(e)}function fv(e){e.g&&(kv(e),e.g.cancel(),e.g=null)}function hv(e){fv(e),e.u&&(zf.clearTimeout(e.u),e.u=null),bv(e),e.h.cancel(),e.m&&("number"==typeof e.m&&zf.clearTimeout(e.m),e.m=null)}function dv(e){Rp(e.h)||e.m||(e.m=!0,ld(e.Ja,e),e.C=0)}function pv(e,t){var n;n=t?t.m:e.U++;var r=cp(e.F);dp(r,"SID",e.I),dp(r,"RID",n),dp(r,"AID",e.T),vv(e,r),e.o&&e.s&&sv(r,e.o,e.s),n=new Hd(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=yv(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Pp(e.h,n),Jd(n,r,t)}function vv(e,t){e.ia&&Ph(e.ia,(function(e,n){dp(t,n,e)})),e.l&&op({},(function(e,n){dp(t,n,e)}))}function yv(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Xf(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{jp(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function mv(e){e.g||e.u||(e.Z=1,ld(e.Ia,e),e.A=0)}function gv(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Dd(Xf(e.Ia,e),Iv(e,e.A)),e.A++,!0)}function kv(e){null!=e.B&&(zf.clearTimeout(e.B),e.B=null)}function wv(e){e.g=new Hd(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=cp(e.sa);dp(t,"RID","rpc"),dp(t,"SID",e.I),dp(t,"CI",e.L?"0":"1"),dp(t,"AID",e.T),dp(t,"TYPE","xmlhttp"),vv(e,t),e.o&&e.s&&sv(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=pp(cp(t)),n.s=null,n.P=!0,Yd(n,e)}function bv(e){null!=e.v&&(zf.clearTimeout(e.v),e.v=null)}function Ev(e,t){var n=null;if(e.g==t){bv(e),kv(e),e.g=null;var r=2}else{if(!Lp(e.h,t))return;n=t.D,Mp(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;td(r=Sd(),new Rd(r,n)),dv(e)}else mv(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Dp(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=Dd(Xf(e.Ja,e,t),Iv(e,e.C)),e.C++,0)))}(e,t)||2==r&&gv(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:_v(e,5);break;case 4:_v(e,10);break;case 3:_v(e,6);break;default:_v(e,2)}}function Iv(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function _v(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Xf(e.kb,e);n||(n=new up("//www.google.com/images/cleardot.gif"),zf.location&&"http"==zf.location.protocol||lp(n,"https"),pp(n)),function(e,t){var n=new Id;if(zf.Image){var r=new Image;r.onload=$f(Bp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=$f(Bp,n,r,"TestLoadImage: error",!1,t),r.onabort=$f(Bp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=$f(Bp,n,r,"TestLoadImage: timeout",!1,t),zf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Nd(2);e.G=0,e.l&&e.l.va(t),xv(e),hv(e)}function xv(e){if(e.G=0,e.la=[],e.l){var t=Up(e.h);0==t.length&&0==e.i.length||(rh(e.la,t),rh(e.la,e.i),e.h.i.length=0,nh(e.i),e.i.length=0),e.l.ua()}}function Tv(e,t,n){var r=n instanceof up?cp(n):new up(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),fp(r,r.m);else{var i=zf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new up(null,void 0);r&&lp(a,r),t&&(a.g=t),i&&fp(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&dp(r,n,t),dp(r,"VER",e.ma),vv(e,r),r}function Sv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Jp(new qp({jb:!0})):new Jp(e.ra)).Ka(e.H),t}function Av(){}function Cv(){if(vh&&!(10<=Number(Ah)))throw Error("Environmental error: no available transport.")}function Ov(e,t){ed.call(this),this.g=new cv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!oh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!oh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dv(this)}function Nv(e){Bd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Rv(){qd.call(this),this.status=1}function Dv(e){this.g=e}(Uf=Jp.prototype).Ka=function(e){this.L=e},Uf.da=function(t,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);n=n?n.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vd.g(),this.C=this.u?Ud(this.u):Ud(Vd),this.g.onreadystatechange=Xf(this.Ha,this);try{this.F=!0,this.g.open(n,String(t),!0),this.F=!1}catch(e){return void Zp(this,e)}if(t=r||"",r=new Map(this.headers),i){var a=!0,o=!1,s=void 0;if(Object.getPrototypeOf(i)===Object.prototype)for(var u in i)r.set(u,i[u]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));try{for(var c,l=i.keys()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;r.set(f,i.get(f))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}}i=Array.from(r.keys()).find((function(e){return"content-type"==e.toLowerCase()})),u=zf.FormData&&t instanceof zf.FormData,!(0<=th($p,n))||i||u||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=e(zt)(v.value,2),g=m[0],k=m[1];this.g.setRequestHeader(g,k)}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rv(this),0<this.B&&((this.K=function(e){return vh&&Th()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xf(this.qa,this)):this.A=yd(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(e){Zp(this,e)}},Uf.qa=function(){void 0!==qf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,td(this,"timeout"),this.abort(8))},Uf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,td(this,"complete"),td(this,"abort"),nv(this))},Uf.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nv(this,!0)),Jp.X.M.call(this)},Uf.Ha=function(){this.s||(this.F||this.v||this.l?tv(this):this.fb())},Uf.fb=function(){tv(this)},Uf.aa=function(){try{return 2<iv(this)?this.g.status:-1}catch(e){return-1}},Uf.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Uf.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qp(t)}},Uf.Ea=function(){return this.m},Uf.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Uf=cv.prototype).ma=8,Uf.G=1,Uf.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Hd(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Fh(n=Mh(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=yv(this,t,r),dp(i=cp(this.F),"RID",e),dp(i,"CVER",22),this.D&&dp(i,"X-HTTP-Session-Id",this.D),vv(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(ov(n)))+"&"+r:this.o&&sv(i,this.o,n)),Pp(this.h,t),this.Ya&&dp(i,"TYPE","init"),this.O?(dp(i,"$req",r),dp(i,"SID","null"),t.Z=!0,Jd(t,i,null)):Jd(t,i,r),this.G=2}}else 3==this.G&&(e?pv(this,e):0==this.i.length||Rp(this.h)||pv(this))},Uf.Ia=function(){if(this.u=null,wv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Dd(Xf(this.eb,this),e)}},Uf.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Nd(10),fv(this),wv(this))},Uf.cb=function(){null!=this.v&&(this.v=null,fv(this),gv(this),Nd(19))},Uf.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Nd(2)):(this.j.info("Failed to ping google.com"),Nd(1))},(Uf=Av.prototype).xa=function(){},Uf.wa=function(){},Uf.va=function(){},Uf.ua=function(){},Uf.Ra=function(){},Cv.prototype.g=function(e,t){return new Ov(e,t)},Zf(Ov,ed),Ov.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Nd(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Tv(e,null,e.V),dv(e)},Ov.prototype.close=function(){lv(this.g)},Ov.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=rd(e),e=n);t.i.push(new Cp(t.ab++,e)),3==t.G&&dv(t)},Ov.prototype.M=function(){this.g.l=null,delete this.j,lv(this.g),delete this.g,Ov.X.M.call(this)},Zf(Nv,Bd),Zf(Rv,qd),Zf(Dv,Av),Dv.prototype.xa=function(){td(this.g,"a")},Dv.prototype.wa=function(e){td(this.g,new Nv(e))},Dv.prototype.va=function(e){td(this.g,new Rv)},Dv.prototype.ua=function(){td(this.g,"b")},Cv.prototype.createWebChannel=Cv.prototype.g,Ov.prototype.send=Ov.prototype.u,Ov.prototype.open=Ov.prototype.m,Ov.prototype.close=Ov.prototype.close,Ld.NO_ERROR=0,Ld.TIMEOUT=8,Ld.HTTP_ERROR=6,Pd.COMPLETE="complete",Fd.EventType=jd,jd.OPEN="a",jd.CLOSE="b",jd.ERROR="c",jd.MESSAGE="d",ed.prototype.listen=ed.prototype.N,Jp.prototype.listenOnce=Jp.prototype.O,Jp.prototype.getLastError=Jp.prototype.Oa,Jp.prototype.getLastErrorCode=Jp.prototype.Ea,Jp.prototype.getStatus=Jp.prototype.aa,Jp.prototype.getResponseJson=Jp.prototype.Sa,Jp.prototype.getResponseText=Jp.prototype.fa,Jp.prototype.send=Jp.prototype.da,Jp.prototype.setWithCredentials=Jp.prototype.Ka;var Lv=Bf.createWebChannelTransport=function(){return new Cv},Pv=Bf.getStatEventTarget=function(){return Sd()},Mv=Bf.ErrorCode=Ld,Uv=Bf.EventType=Pd,Fv=Bf.Event=xd,Vv=Bf.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},jv=Bf.FetchXmlHttpFactory=qp,Bv=Bf.WebChannel=Fd,qv=Bf.XhrIo=Jp,zv="@firebase/firestore",Hv=function(){"use strict";function t(n){e($)(this,t),this.uid=n}return e(Z)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),t}();Hv.UNAUTHENTICATED=new Hv(null),Hv.GOOGLE_CREDENTIALS=new Hv("google-credentials-uid"),Hv.FIRST_PARTY=new Hv("first-party-uid"),Hv.MOCK_USER=new Hv("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Kv="9.19.0",Gv=new ii("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(){return Gv.logLevel}function Qv(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Gv.logLevel<=Jr.DEBUG){var a,o=r.map(Xv);(a=Gv).debug.apply(a,["Firestore (".concat(Kv,"): ").concat(t)].concat(e(Jt)(o)))}}function Jv(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Gv.logLevel<=Jr.ERROR){var a,o=r.map(Xv);(a=Gv).error.apply(a,["Firestore (".concat(Kv,"): ").concat(t)].concat(e(Jt)(o)))}}function Yv(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Gv.logLevel<=Jr.WARN){var a,o=r.map(Xv);(a=Gv).warn.apply(a,["Firestore (".concat(Kv,"): ").concat(t)].concat(e(Jt)(o)))}}function Xv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Kv,") INTERNAL ASSERTION FAILED: ")+e;throw Jv(t),new Error(t)}function Zv(e,t){e||$v()}function ey(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ty={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ny=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this,t,i)).code=t,a.message=i,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},e(Vf)(a)}return r}(Nr),ry=function t(){"use strict";var n=this;e($)(this,t),this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))},iy=function t(n,r){"use strict";e($)(this,t),this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(n))},ay=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Hv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),oy=function(){"use strict";function t(n){e($)(this,t),this.token=n,this.changeListener=null}return e(Z)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),sy=function(){"use strict";function t(n){e($)(this,t),this.t=n,this.currentUser=Hv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return e(Z)(t,[{key:"start",value:function(t,n){var r=this,i=this.i,a=function(e){return r.i!==i?(i=r.i,n(e)):Promise.resolve()},o=new ry;this.o=function(){var e=r;r.i++,r.currentUser=r.u(),o.resolve(),o=new ry,t.enqueueRetryable((function(){return a(e.currentUser)}))};var s=function(){var n=o,i=r;t.enqueueRetryable(e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.promise;case 2:return e.next=4,a(i.currentUser);case 4:case"end":return e.stop()}}),t)}))))},u=function(e){Qv("FirebaseAuthCredentialsProvider","Auth detected"),r.auth=e,r.auth.addAuthTokenListener(r.o),s()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!r.auth){var e=r.t.getImmediate({optional:!0});e?u(e):(Qv("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ry)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Qv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Zv("string"==typeof n.accessToken),new iy(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Zv(null===e||"string"==typeof e),new Hv(e)}}]),t}(),uy=function(){"use strict";function t(n,r,i){e($)(this,t),this.h=n,this.l=r,this.m=i,this.type="FirstParty",this.user=Hv.FIRST_PARTY,this.g=new Map}return e(Z)(t,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),t}(),cy=function(){"use strict";function t(n,r,i){e($)(this,t),this.h=n,this.l=r,this.m=i}return e(Z)(t,[{key:"getToken",value:function(){return Promise.resolve(new uy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Hv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),ly=function t(n){"use strict";e($)(this,t),this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)},fy=function(){"use strict";function t(n){e($)(this,t),this.I=n,this.forceRefresh=!1,this.appCheck=null,this.T=null}return e(Z)(t,[{key:"start",value:function(e,t){var n=this;this.o=function(r){e.enqueueRetryable((function(){return function(e){null!=e.error&&Qv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Qv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()}(r)}))};var r=function(e){Qv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?r(e):Qv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Zv("string"==typeof t.token),e.T=t.token,new ly(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dy=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=hy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),t}();function py(e,t){return e<t?-1:e>t?1:0}function vy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yy=function(){"use strict";function t(n,r){if(e($)(this,t),this.seconds=n,this.nanoseconds=r,r<0)throw new ny(ty.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ny(ty.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new ny(ty.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new ny(ty.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return e(Z)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?py(this.nanoseconds,e.nanoseconds):py(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),my=function(){"use strict";function t(n){e($)(this,t),this.timestamp=n}return e(Z)(t,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new yy(0,0))}},{key:"max",value:function(){return new t(new yy(253402300799,999999999))}}]),t}(),gy=function(){"use strict";function t(n,r,i){e($)(this,t),void 0===r?r=0:r>n.length&&$v(),void 0===i?i=n.length-r:i>n.length-r&&$v(),this.segments=n,this.offset=r,this.len=i}return e(Z)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(e){n.push(e)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),t}(),ky=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.apply(this,arguments)}return e(Z)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=[],o=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f,h=c.value;if(h.indexOf("//")>=0)throw new ny(ty.INVALID_ARGUMENT,"Invalid segment (".concat(h,"). Paths must not contain // in them."));(f=a).push.apply(f,e(Jt)(h.split("/").filter((function(e){return e.length>0}))))}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return new r(a)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(gy),wy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,by=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.apply(this,arguments)}return e(Z)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return wy.test(e)}},{key:"keyField",value:function(){return new r(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],n="",i=0,a=function(){if(0===n.length)throw new ny(ty.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new ny(ty.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ny(ty.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(n+=s,i++):(a(),i++)}if(a(),o)throw new ny(ty.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(t)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(gy),Ey=function(){"use strict";function t(n){e($)(this,t),this.path=n}return e(Z)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ky.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(ky.fromString(e))}},{key:"fromName",value:function(e){return new t(ky.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(ky.emptyPath())}},{key:"comparator",value:function(e,t){return ky.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(e){return new t(new ky(e.slice()))}}]),t}(),Iy=function t(n,r,i,a){"use strict";e($)(this,t),this.indexId=n,this.collectionGroup=r,this.fields=i,this.indexState=a};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Iy.UNKNOWN_ID=-1;function _y(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=my.fromTimestamp(1e9===r?new yy(n+1,0):new yy(n,r));return new Ty(i,Ey.empty(),t)}function xy(e){return new Ty(e.readTime,e.key,-1)}var Ty=function(){"use strict";function t(n,r,i){e($)(this,t),this.readTime=n,this.documentKey=r,this.largestBatchId=i}return e(Z)(t,null,[{key:"min",value:function(){return new t(my.min(),Ey.empty(),-1)}},{key:"max",value:function(){return new t(my.max(),Ey.empty(),-1)}}]),t}();function Sy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ey.comparator(e.documentKey,t.documentKey))?n:py(e.largestBatchId,t.largestBatchId)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ay="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cy=function(){"use strict";function t(){e($)(this,t),this.onCommittedListeners=[]}return e(Z)(t,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),t}();function Oy(e){return Ny.apply(this,arguments)}function Ny(){return(Ny=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code===ty.FAILED_PRECONDITION&&n.message===Ay){e.next=2;break}throw n;case 2:Qv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ry=function(){"use strict";function t(n){var r=this;e($)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n((function(e){r.isDone=!0,r.result=e,r.nextCallback&&r.nextCallback(e)}),(function(e){r.isDone=!0,r.error=e,r.catchCallback&&r.catchCallback(e)}))}return e(Z)(t,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(e,n){var r=this;return this.callbackAttached&&$v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){var a=r;r.nextCallback=function(n){a.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){a.wrapFailure(n,e).next(t,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var r=0,i=0,a=!1;e.forEach((function(e){++r,e.next((function(){++i,a&&i===r&&t()}),(function(e){return n(e)}))})),a=!0,i===r&&t()}))}},{key:"or",value:function(e){var n=t.resolve(!1),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,r){var i=r.value;n=n.next((function(e){return e?t.resolve(e):i()}))},u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(e,n){return new t((function(t,r){for(var i=function(i){var u=i;n(e[u]).next((function(e){o[u]=e,++s===a&&t(o)}),(function(e){return r(e)}))},a=e.length,o=new Array(a),s=0,u=0;u<a;u++)i(u)}))}},{key:"doWhile",value:function(e,n){return new t((function(t,r){var i=function(){!0===e()?n().next((function(){i()}),r):t()};i()}))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(e){return"IndexedDbTransactionError"===e.name}var Ly=function(){"use strict";function t(n,r){var i=this;e($)(this,t),this.previousValue=n,r&&(r.sequenceNumberHandler=function(e){return i.ot(e)},this.ut=function(e){return r.writeSequenceNumber(e)})}return e(Z)(t,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),t}();function Py(e){return null==e}function My(e){return 0===e&&1/e==-1/0}function Uy(e){return"number"==typeof e&&Number.isInteger(e)&&!My(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ly.ct=-1;var Fy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vy=(e(Jt)(Fy).concat(["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),jy=Vy;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e(Jt)(jy).concat(["indexConfiguration","indexState","indexEntries"]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function By(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hy=function(){"use strict";function t(n,r){e($)(this,t),this.comparator=n,this.root=r||Gy.EMPTY}return e(Z)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gy.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ky(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ky(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ky(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ky(this.root,e,this.comparator,!0)}}]),t}(),Ky=function(){"use strict";function t(n,r,i,a){e($)(this,t),this.isReverse=a,this.nodeStack=[];for(var o=1;!n.isEmpty();)if(o=r?i(n.key,r):1,r&&a&&(o*=-1),o<0)n=this.isReverse?n.left:n.right;else{if(0===o){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}return e(Z)(t,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),t}(),Gy=function(){"use strict";function t(n,r,i,a,o){e($)(this,t),this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=a?a:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return e(Z)(t,[{key:"copy",value:function(e,n,r,i,a){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw $v();if(this.right.isRed())throw $v();var e=this.left.check();if(e!==this.right.check())throw $v();return e+(this.isRed()?0:1)}}]),t}();Gy.EMPTY=null,Gy.RED=!0,Gy.BLACK=!1,Gy.EMPTY=new(function(){"use strict";function t(){e($)(this,t),this.size=0}return e(Z)(t,[{key:"key",get:function(){throw $v()}},{key:"value",get:function(){throw $v()}},{key:"color",get:function(){throw $v()}},{key:"left",get:function(){throw $v()}},{key:"right",get:function(){throw $v()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wy=function(){"use strict";function t(n){e($)(this,t),this.comparator=n,this.data=new Hy(this.comparator)}return e(Z)(t,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Qy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Qy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),Qy=function(){"use strict";function t(n){e($)(this,t),this.iter=n}return e(Z)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jy=function(){"use strict";function t(n){e($)(this,t),this.fields=n,n.sort(by.comparator)}return e(Z)(t,[{key:"unionWith",value:function(e){var n=new Wy(by.comparator),r=!0,i=!1,a=void 0;try{for(var o,s=this.fields[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n=n.add(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=!0,l=!1,f=void 0;try{for(var h,d=e[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;n=n.add(p)}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return new t(n.toArray())}},{key:"covers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.fields[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.isPrefixOf(e))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"isEqual",value:function(e){return vy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new t([])}}]),t}(),Yy=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){var t;return e($)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="Base64DecodeError",e(Vf)(t)}return r}(e(Kn)(Error));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xy=Symbol.iterator,$y=function(){"use strict";function t(n){e($)(this,t),this.binaryString=n}return e(Z)(t,[{key:Xy,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){var e;return e=this.binaryString,btoa(e)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return py(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Yy("Invalid base64 string: "+e):e}}(e))}},{key:"fromUint8Array",value:function(e){return new t(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$y.EMPTY_BYTE_STRING=new $y("");var Zy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function em(e){if(Zv(!!e),"string"==typeof e){var t=0,n=Zy.exec(e);if(Zv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:tm(e.seconds),nanos:tm(e.nanos)}}function tm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nm(e){return"string"==typeof e?$y.fromBase64String(e):$y.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function im(e){var t=e.mapValue.fields.__previous_value__;return rm(t)?im(t):t}function am(e){var t=em(e.mapValue.fields.__local_write_time__.timestampValue);return new yy(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var om=function t(n,r,i,a,o,s,u,c){"use strict";e($)(this,t),this.databaseId=n,this.appId=r,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.useFetchStreams=c},sm=function(){"use strict";function t(n,r){e($)(this,t),this.projectId=n,this.database=r||"(default)"}return e(Z)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}(),um={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rm(e)?4:Em(e)?9007199254740991:10:$v()}function lm(e,t){if(e===t)return!0;var n,r=cm(e);if(r!==cm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return am(e).isEqual(am(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=em(e.timestampValue),r=em(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,nm(e.bytesValue).isEqual(nm(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tm(e.geoPointValue.latitude)===tm(t.geoPointValue.latitude)&&tm(e.geoPointValue.longitude)===tm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tm(e.integerValue)===tm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=tm(e.doubleValue),r=tm(t.doubleValue);return n===r?My(n)===My(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vy(e.arrayValue.values||[],t.arrayValue.values||[],lm);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(By(n)!==By(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!lm(n[i],r[i])))return!1;return!0}(e,t);default:return $v()}}function fm(e,t){return void 0!==(e.values||[]).find((function(e){return lm(e,t)}))}function hm(e,t){if(e===t)return 0;var n,r,i,a,o=cm(e),s=cm(t);if(o!==s)return py(o,s);switch(o){case 0:case 9007199254740991:return 0;case 1:return py(e.booleanValue,t.booleanValue);case 2:return r=t,i=tm((n=e).integerValue||n.doubleValue),a=tm(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return dm(e.timestampValue,t.timestampValue);case 4:return dm(am(e),am(t));case 5:return py(e.stringValue,t.stringValue);case 6:return function(e,t){var n=nm(e),r=nm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=py(n[i],r[i]);if(0!==a)return a}return py(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=py(tm(e.latitude),tm(t.latitude));return 0!==n?n:py(tm(e.longitude),tm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=hm(n[i],r[i]);if(a)return a}return py(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===um.mapValue&&t===um.mapValue)return 0;if(e===um.mapValue)return 1;if(t===um.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=py(r[o],a[o]);if(0!==s)return s;var u=hm(n[r[o]],i[a[o]]);if(0!==u)return u}return py(r.length,a.length)}(e.mapValue,t.mapValue);default:throw $v()}}function dm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return py(e,t);var n=em(e),r=em(t),i=py(n.seconds,r.seconds);return 0!==i?i:py(n.nanos,r.nanos)}function pm(e){return vm(e)}function vm(e){var t,n,r,i;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=e.timestampValue,i=em(r),"time(".concat(i.seconds,",").concat(i.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?nm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ey.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t="[",n=!0,r=!0,i=!1,a=void 0;try{for(var o,s=(e.values||[])[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n?n=!1:t+=",",t+=vm(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t+"]"}(e.arrayValue):"mapValue"in e?function(e){var t=Object.keys(e.fields||{}).sort(),n="{",r=!0,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r?r=!1:n+=",",n+="".concat(c,":").concat(vm(e.fields[c]))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n+"}"}(e.mapValue):$v()}function ym(e){return!!e&&"integerValue"in e}function mm(e){return!!e&&"arrayValue"in e}function gm(e){return!!e&&"nullValue"in e}function km(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wm(e){return!!e&&"mapValue"in e}function bm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return qy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bm(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bm(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Em(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Im=function(){"use strict";function t(n){e($)(this,t),this.value=n}return e(Z)(t,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!wm(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bm(t)}},{key:"setAll",value:function(e){var t=this,n=by.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bm(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return lm(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];wm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){qy(t,(function(t,n){return e[t]=n}));var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;delete e[u]}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"clone",value:function(){return new t(bm(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function _m(e){var t=[];return qy(e.fields,(function(e,n){var r=new by([e]);if(wm(n)){var i=_m(n.mapValue).fields,a=!0,o=!1,s=void 0;if(0===i.length)t.push(r);else try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t.push(r.child(l))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}else t.push(r)})),new Jy(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var xm=function(){"use strict";function t(n,r,i,a,o,s,u){e($)(this,t),this.key=n,this.documentType=r,this.version=i,this.readTime=a,this.createTime=o,this.data=s,this.documentState=u}return e(Z)(t,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(my.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Im.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Im.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=my.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,my.min(),my.min(),my.min(),Im.empty(),0)}},{key:"newFoundDocument",value:function(e,n,r,i){return new t(e,1,n,my.min(),r,i,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,my.min(),my.min(),Im.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,my.min(),my.min(),Im.empty(),2)}}]),t}(),Tm=function t(n,r){"use strict";e($)(this,t),this.position=n,this.inclusive=r};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ey.comparator(Ey.fromName(o.referenceValue),n.key):hm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Am(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!lm(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cm=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";e($)(this,t),this.field=n,this.dir=r};function Om(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nm=function t(){"use strict";e($)(this,t)},Rm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o;return e($)(this,r),(o=n.call(this)).field=t,o.op=i,o.value=a,e(Vf)(o)}return e(Z)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(hm(t,this.value)):null!==t&&cm(this.value)===cm(t)&&this.matchesComparison(hm(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $v()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new jm(e,t,n):"array-contains"===t?new Hm(e,n):"in"===t?new Km(e,n):"not-in"===t?new Gm(e,n):"array-contains-any"===t?new Wm(e,n):new r(e,t,n)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Bm(e,n):new qm(e,n)}}]),r}(Nm),Dm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this)).filters=t,a.op=i,a.ht=null,e(Vf)(a)}return e(Z)(r,[{key:"matches",value:function(e){return Lm(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getFlattenedFilters()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e(o))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}],[{key:"create",value:function(e,t){return new r(e,t)}}]),r}(Nm);function Lm(e){return"and"===e.op}function Pm(e){return Mm(e)&&Lm(e)}function Mm(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value instanceof Dm)return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}function Um(e){if(e instanceof Rm)return e.field.canonicalString()+e.op.toString()+pm(e.value);if(Pm(e))return e.filters.map((function(e){return Um(e)})).join(",");var t=e.filters.map((function(e){return Um(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Fm(e,t){return e instanceof Rm?(n=e,(r=t)instanceof Rm&&n.op===r.op&&n.field.isEqual(r.field)&&lm(n.value,r.value)):e instanceof Dm?function(e,t){return t instanceof Dm&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Fm(n,t.filters[r])}),!0)}(e,t):void $v();var n,r}function Vm(e){return e instanceof Rm?"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(pm(t.value)):e instanceof Dm?function(e){return e.op.toString()+" {"+e.getFilters().map(Vm).join(" ,")+"}"}(e):"Filter";var t}var jm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o;return e($)(this,r),(o=n.call(this,t,i,a)).key=Ey.fromName(a.referenceValue),e(Vf)(o)}return e(Z)(r,[{key:"matches",value:function(e){var t=Ey.comparator(e.key,this.key);return this.matchesComparison(t)}}]),r}(Rm),Bm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this,t,"in",i)).keys=zm("in",i),e(Vf)(a)}return e(Z)(r,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(Rm),qm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this,t,"not-in",i)).keys=zm("not-in",i),e(Vf)(a)}return e(Z)(r,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(Rm);function zm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ey.fromName(e.referenceValue)}))}var Hm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){return e($)(this,r),n.call(this,t,"array-contains",i)}return e(Z)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mm(t)&&fm(t.arrayValue,this.value)}}]),r}(Rm),Km=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){return e($)(this,r),n.call(this,t,"in",i)}return e(Z)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&fm(this.value.arrayValue,t)}}]),r}(Rm),Gm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){return e($)(this,r),n.call(this,t,"not-in",i)}return e(Z)(r,[{key:"matches",value:function(e){if(fm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!fm(this.value.arrayValue,t)}}]),r}(Rm),Wm=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){return e($)(this,r),n.call(this,t,"array-contains-any",i)}return e(Z)(r,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return fm(t.value.arrayValue,e)}))}}]),r}(Rm),Qm=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;e($)(this,t),this.path=n,this.collectionGroup=r,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=s,this.endAt=u,this.ft=null};function Jm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Qm(e,t,n,r,i,a,o)}function Ym(e){var t=ey(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Um(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),Py(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return pm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return pm(e)})).join(",")),t.ft=n}return t.ft}function Xm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Om(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Fm(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Am(e.startAt,t.startAt)&&Am(e.endAt,t.endAt)}function $m(e){return Ey.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zm=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e($)(this,t),this.path=n,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.dt=null,this.wt=null,this.startAt,this.endAt};function eg(e,t,n,r,i,a,o,s){return new Zm(e,t,n,r,i,a,o,s)}function tg(e){return new Zm(e)}function ng(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function rg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ig(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value.getFirstInequalityField();if(null!==o)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}function ag(e){return null!==e.collectionGroup}function og(e){var t=ey(e);if(null===t.dt){t.dt=[];var n=ig(t),r=rg(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Cm(n)),t.dt.push(new Cm(by.keyField(),"asc"));else{var i=!1,a=!0,o=!1,s=void 0;try{for(var u,c=t.explicitOrderBy[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t.dt.push(l),l.field.isKeyField()&&(i=!0)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(!i){var f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Cm(by.keyField(),f))}}}return t.dt}function sg(e){var t=ey(e);if(!t.wt)if("F"===t.limitType)t.wt=Jm(t.path,t.collectionGroup,og(t),t.filters,t.limit,t.startAt,t.endAt);else{var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=og(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c="desc"===u.dir?"asc":"desc";n.push(new Cm(u.field,c))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var l=t.endAt?new Tm(t.endAt.position,t.endAt.inclusive):null,f=t.startAt?new Tm(t.startAt.position,t.startAt.inclusive):null;t.wt=Jm(t.path,t.collectionGroup,n,t.filters,t.limit,l,f)}return t.wt}function ug(e,t,n){return new Zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function cg(e,t){return Xm(sg(e),sg(t))&&e.limitType===t.limitType}function lg(e){return"".concat(Ym(sg(e)),"|lt:").concat(e.limitType)}function fg(e){return"Query(target=".concat((t=sg(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: [".concat(t.filters.map((function(e){return Vm(e)})).join(", "),"]")),Py(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: [".concat(t.orderBy.map((function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t})).join(", "),"]")),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return pm(e)})).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return pm(e)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(e.limitType,")");var t,n}function hg(e,t){return t.isFoundDocument()&&(i=e,o=(a=t).key.path,null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ey.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o))&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=og(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!s.field.isKeyField()&&null===t.data.field(s.field))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.filters[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(!a.value.matches(t))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){var r=Sm(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,og(n),r)||n.endAt&&!function(e,t,n){var r=Sm(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,og(n),r)));var n,r,i,a,o}function dg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function pg(e){return function(t,n){var r=!1,i=!0,a=!1,o=void 0;try{for(var s,u=og(e)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=vg(c,t,n);if(0!==l)return l;r=r||c.field.isKeyField()}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return 0}}function vg(e,t,n){var r,i,a,o,s=e.field.isKeyField()?Ey.comparator(t.key,n.key):(r=e.field,i=n,a=t.data.field(r),o=i.data.field(r),null!==a&&null!==o?hm(a,o):$v());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return $v()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yg=function(){"use strict";function t(n,r){e($)(this,t),this.mapKeyFn=n,this.equalsFn=r,this.inner={},this.innerSize=0}return e(Z)(t,[{key:"get",value:function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=e(zt)(s.value,2),l=c[0],f=c[1];if(this.equalsFn(l,t))return f}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(t){qy(this.inner,(function(n,r){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=e(zt)(s.value,2),l=c[0],f=c[1];t(l,f)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}))}},{key:"isEmpty",value:function(){return zy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),mg=new Hy(Ey.comparator);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(){return mg}var kg=new Hy(Ey.comparator);function wg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=kg,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.insert(c.key,c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function bg(e){var t=kg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Eg(){return _g()}function Ig(){return _g()}function _g(){return new yg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var xg=new Hy(Ey.comparator),Tg=new Wy(Ey.comparator);function Sg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Tg,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.add(c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}var Ag=new Wy(py);function Cg(){return Ag}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:My(t)?"-0":t}}function Ng(e){return{integerValue:""+e}}function Rg(e,t){return Uy(t)?Ng(t):Og(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dg=function t(){"use strict";e($)(this,t),this._=void 0};function Lg(e,t,n){return e instanceof Ug?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof Fg?Vg(e,t):e instanceof jg?Bg(e,t):function(e,t){var n=Mg(e,t),r=zg(n)+zg(e._t);return ym(n)&&ym(e._t)?Ng(r):Og(e.serializer,r)}(e,t);var r,i,a}function Pg(e,t,n){return e instanceof Fg?Vg(e,t):e instanceof jg?Bg(e,t):n}function Mg(e,t){var n,r;return e instanceof qg?ym(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null}var Ug=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.apply(this,arguments)}return r}(Dg),Fg=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this)).elements=t,e(Vf)(i)}return r}(Dg);function Vg(e,t){var n=Hg(t),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,t){var r=t.value;n.some((function(e){return lm(e,r)}))||n.push(r)},u=e.elements[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var jg=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this)).elements=t,e(Vf)(i)}return r}(Dg);function Bg(e,t){var n=Hg(t),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,t){var r=t.value;n=n.filter((function(e){return!lm(e,r)}))},u=e.elements[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var qg=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this)).serializer=t,a._t=i,e(Vf)(a)}return r}(Dg);function zg(e){return tm(e.integerValue||e.doubleValue)}function Hg(e){return mm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kg=function t(n,r){"use strict";e($)(this,t),this.field=n,this.transform=r};var Gg=function t(n,r){"use strict";e($)(this,t),this.version=n,this.transformResults=r},Wg=function(){"use strict";function t(n,r){e($)(this,t),this.updateTime=n,this.exists=r}return e(Z)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function Qg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Jg=function t(){"use strict";e($)(this,t)};function Yg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new uk(e.key,Wg.none()):new tk(e.key,e.data,Wg.none());var n=e.data,r=Im.empty(),i=new Wy(by.comparator),a=!0,o=!1,s=void 0;try{for(var u,c=t.fields[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(!i.has(l)){var f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?r.delete(l):r.set(l,f),i=i.add(l)}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return new nk(e.key,r,new Jy(i.toArray()),Wg.none())}function Xg(e,t,n){var r,i,a,o,s;e instanceof tk?(i=t,a=n,o=(r=e).value.clone(),s=ik(r.fieldTransforms,i,a.transformResults),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()):e instanceof nk?function(e,t,n){if(Qg(e.precondition,t)){var r=ik(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(rk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $g(e,t,n,r){return e instanceof tk?function(e,t,n,r){if(!Qg(e.precondition,t))return n;var i=e.value.clone(),a=ak(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof nk?function(e,t,n,r){if(!Qg(e.precondition,t))return n;var i=ak(e.fieldTransforms,r,t),a=t.data;return a.setAll(rk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):(i=t,a=n,Qg(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a);var i,a}function Zg(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var o,s=e.fieldTransforms[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=t.data.field(u.field),l=Mg(u.transform,c||null);null!=l&&(null===n&&(n=Im.empty()),n.set(u.field,l))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n||null}function ek(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&vy(n,r,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Fg&&r instanceof Fg||n instanceof jg&&r instanceof jg?vy(n.elements,r.elements,lm):n instanceof qg&&r instanceof qg?lm(n._t,r._t):n instanceof Ug&&r instanceof Ug);var n,r}(e,t)}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}var tk=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e($)(this,r),(o=n.call(this)).key=t,o.value=i,o.precondition=a,o.fieldTransforms=s,o.type=0,e(Vf)(o)}return e(Z)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(Jg),nk=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return e($)(this,r),(s=n.call(this)).key=t,s.data=i,s.fieldMask=a,s.precondition=o,s.fieldTransforms=u,s.type=1,e(Vf)(s)}return e(Z)(r,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),r}(Jg);function rk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ik(e,t,n){var r=new Map;Zv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Pg(o,s,n[i]))}return r}function ak(e,t,n){var r=new Map,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.transform,f=n.data.field(c.field);r.set(c.field,Lg(l,f,t))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}var ok,sk,uk=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this)).key=t,a.precondition=i,a.type=2,a.fieldTransforms=[],e(Vf)(a)}return e(Z)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(Jg),ck=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this)).key=t,a.precondition=i,a.type=3,a.fieldTransforms=[],e(Vf)(a)}return e(Z)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(Jg),lk=function(){"use strict";function t(n,r,i,a){e($)(this,t),this.batchId=n,this.localWriteTime=r,this.baseMutations=i,this.mutations=a}return e(Z)(t,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Xg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.baseMutations[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.key.isEqual(e.key)&&(t=$g(s,e,t,this.localWriteTime))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=this.mutations[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;d.key.isEqual(e.key)&&(t=$g(d,e,t,this.localWriteTime))}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ig();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Yg(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(my.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Sg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&vy(this.mutations,e.mutations,(function(e,t){return ek(e,t)}))&&vy(this.baseMutations,e.baseMutations,(function(e,t){return ek(e,t)}))}}]),t}(),fk=function(){"use strict";function t(n,r,i,a){e($)(this,t),this.batch=n,this.commitVersion=r,this.mutationResults=i,this.docVersions=a}return e(Z)(t,null,[{key:"from",value:function(e,n,r){Zv(e.mutations.length===r.length);for(var i=xg,a=e.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new t(e,n,r,i)}}]),t}(),hk=function(){"use strict";function t(n,r){e($)(this,t),this.largestBatchId=n,this.mutation=r}return e(Z)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),dk=function t(n){"use strict";e($)(this,t),this.count=n};function pk(e){switch(e){default:return $v();case ty.CANCELLED:case ty.UNKNOWN:case ty.DEADLINE_EXCEEDED:case ty.RESOURCE_EXHAUSTED:case ty.INTERNAL:case ty.UNAVAILABLE:case ty.UNAUTHENTICATED:return!1;case ty.INVALID_ARGUMENT:case ty.NOT_FOUND:case ty.ALREADY_EXISTS:case ty.PERMISSION_DENIED:case ty.FAILED_PRECONDITION:case ty.ABORTED:case ty.OUT_OF_RANGE:case ty.UNIMPLEMENTED:case ty.DATA_LOSS:return!0}}function vk(e){if(void 0===e)return Jv("GRPC error has no .code"),ty.UNKNOWN;switch(e){case ok.OK:return ty.OK;case ok.CANCELLED:return ty.CANCELLED;case ok.UNKNOWN:return ty.UNKNOWN;case ok.DEADLINE_EXCEEDED:return ty.DEADLINE_EXCEEDED;case ok.RESOURCE_EXHAUSTED:return ty.RESOURCE_EXHAUSTED;case ok.INTERNAL:return ty.INTERNAL;case ok.UNAVAILABLE:return ty.UNAVAILABLE;case ok.UNAUTHENTICATED:return ty.UNAUTHENTICATED;case ok.INVALID_ARGUMENT:return ty.INVALID_ARGUMENT;case ok.NOT_FOUND:return ty.NOT_FOUND;case ok.ALREADY_EXISTS:return ty.ALREADY_EXISTS;case ok.PERMISSION_DENIED:return ty.PERMISSION_DENIED;case ok.FAILED_PRECONDITION:return ty.FAILED_PRECONDITION;case ok.ABORTED:return ty.ABORTED;case ok.OUT_OF_RANGE:return ty.OUT_OF_RANGE;case ok.UNIMPLEMENTED:return ty.UNIMPLEMENTED;case ok.DATA_LOSS:return ty.DATA_LOSS;default:return $v()}}(sk=ok||(ok={}))[sk.OK=0]="OK",sk[sk.CANCELLED=1]="CANCELLED",sk[sk.UNKNOWN=2]="UNKNOWN",sk[sk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sk[sk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sk[sk.NOT_FOUND=5]="NOT_FOUND",sk[sk.ALREADY_EXISTS=6]="ALREADY_EXISTS",sk[sk.PERMISSION_DENIED=7]="PERMISSION_DENIED",sk[sk.UNAUTHENTICATED=16]="UNAUTHENTICATED",sk[sk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sk[sk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sk[sk.ABORTED=10]="ABORTED",sk[sk.OUT_OF_RANGE=11]="OUT_OF_RANGE",sk[sk.UNIMPLEMENTED=12]="UNIMPLEMENTED",sk[sk.INTERNAL=13]="INTERNAL",sk[sk.UNAVAILABLE=14]="UNAVAILABLE",sk[sk.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yk=function(){"use strict";function t(){e($)(this,t),this.onExistenceFilterMismatchCallbacks=new Map}return e(Z)(t,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return mk}},{key:"getOrCreateInstance",value:function(){return null===mk&&(mk=new t),mk}}]),t}(),mk=null,gk=function(){"use strict";function t(n,r,i,a,o){e($)(this,t),this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}return e(Z)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n,r){var i=new Map;return i.set(e,kk.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(my.min(),i,Cg(),gg(),Sg())}}]),t}(),kk=function(){"use strict";function t(n,r,i,a,o){e($)(this,t),this.resumeToken=n,this.current=r,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}return e(Z)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n,r){return new t(r,n,Sg(),Sg(),Sg())}}]),t}(),wk=function t(n,r,i,a){"use strict";e($)(this,t),this.It=n,this.removedTargetIds=r,this.key=i,this.Tt=a},bk=function t(n,r){"use strict";e($)(this,t),this.targetId=n,this.Et=r},Ek=function t(n,r){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$y.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e($)(this,t),this.state=n,this.targetIds=r,this.resumeToken=i,this.cause=a},Ik=function(){"use strict";function t(){e($)(this,t),this.At=0,this.Rt=Tk(),this.vt=$y.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return e(Z)(t,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Sg(),t=Sg(),n=Sg();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:$v()}})),new kk(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Tk()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),t}(),_k=function(){"use strict";function t(n){e($)(this,t),this.Ft=n,this.Bt=new Map,this.Lt=gg(),this.qt=xk(),this.Ut=new Wy(py)}return e(Z)(t,[{key:"Kt",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.It[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(o,e.Tt):this.Qt(o,e.key,e.Tt)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var s=!0,u=!1,c=void 0;try{for(var l,f=e.removedTargetIds[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;this.Qt(h,e.key,e.Tt)}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:$v()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if($m(a))if(0===r){var o=new Ey(a.path);this.Qt(n,o,xm.newNoDocument(o,my.min()))}else Zv(1===r);else{var s=this.Zt(n);s!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=yk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:s,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&$m(a.target)){var o=new Ey(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,xm.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Sg();this.qt.forEach((function(e,n){var i=t,a=!0;n.forEachWhile((function(e){var t=i.Yt(e);return!t||2===t.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new gk(e,n,this.Ut,this.Lt,r);return this.Lt=gg(),this.qt=xk(),this.Ut=new Wy(py),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Ik,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Wy(py),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Qv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Ik),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),t}();function xk(){return new Hy(Ey.comparator)}function Tk(){return new Hy(Ey.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sk={asc:"ASCENDING",desc:"DESCENDING"},Ak={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ck={and:"AND",or:"OR"},Ok=function t(n,r){"use strict";e($)(this,t),this.databaseId=n,this.useProto3Json=r};function Nk(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Dk(e,t){return Nk(e,t.toTimestamp())}function Lk(e){return Zv(!!e),my.fromTimestamp((t=em(e),new yy(t.seconds,t.nanos)));var t}function Pk(e,t){return(n=e,new ky(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function Mk(e){var t=ky.fromString(e);return Zv(ew(t)),t}function Uk(e,t){return Pk(e.databaseId,t.path)}function Fk(e,t){var n=Mk(t);if(n.get(1)!==e.databaseId.projectId)throw new ny(ty.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ny(ty.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ey(qk(n))}function Vk(e,t){return Pk(e.databaseId,t)}function jk(e){var t=Mk(e);return 4===t.length?ky.emptyPath():qk(t)}function Bk(e){return new ky(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qk(e){return Zv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zk(e,t,n){return{name:Uk(e,t),fields:n.value.mapValue.fields}}function Hk(e,t){var n,r,i;if(t instanceof tk)n={update:zk(e,t.key,t.value)};else if(t instanceof uk)n={delete:Uk(e,t.key)};else if(t instanceof nk)n={update:zk(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach((function(e){return i.push(e.canonicalString())})),{fieldPaths:i})};else{if(!(t instanceof ck))return $v();n={verify:Uk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ug)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qg)return{fieldPath:t.field.canonicalString(),increment:n._t};throw $v()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Dk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:$v()}(e,t.precondition)),n}function Kk(e,t){return{documents:[Vk(e,t.path)]}}function Gk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Vk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Vk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Zk(Dm.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return{field:Xk((t=e).field),direction:Jk(t.dir)};var t}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s,u,c=(o=e,s=t.limit,o.useProto3Json||Py(s)?s:{value:s});return null!==c&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt={before:(u=t.startAt).inclusive,values:u.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wk(e){var t=jk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o,s,u=[];n.where&&(o=n.where,u=(s=Qk(o))instanceof Dm&&Pm(s)?s.getFilters():[s]);var c=[];n.orderBy&&(c=n.orderBy.map((function(e){return new Cm($k((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var l=null;n.limit&&(l=function(e){var t;return Py(t="object"==typeof e?e.value:e)?null:t}(n.limit));var f=null;n.startAt&&(f=function(e){var t=!!e.before,n=e.values||[];return new Tm(n,t)}(n.startAt));var h=null;return n.endAt&&(h=function(e){var t=!e.before,n=e.values||[];return new Tm(n,t)}(n.endAt)),eg(t,i,c,u,l,"F",f,h)}function Qk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=$k(e.unaryFilter.field);return Rm.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=$k(e.unaryFilter.field);return Rm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$k(e.unaryFilter.field);return Rm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$k(e.unaryFilter.field);return Rm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return $v()}}(e):void 0!==e.fieldFilter?(n=e,Rm.create($k(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $v()}}(n.fieldFilter.op),n.fieldFilter.value)):void 0!==e.compositeFilter?(t=e,Dm.create(t.compositeFilter.filters.map((function(e){return Qk(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return $v()}}(t.compositeFilter.op))):$v();var t,n}function Jk(e){return Sk[e]}function Yk(e){return Ak[e]}function Xk(e){return{fieldPath:e.canonicalString()}}function $k(e){return by.fromServerFormat(e.fieldPath)}function Zk(e){return e instanceof Rm?function(e){if("=="===e.op){if(km(e.value))return{unaryFilter:{field:Xk(e.field),op:"IS_NAN"}};if(gm(e.value))return{unaryFilter:{field:Xk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(km(e.value))return{unaryFilter:{field:Xk(e.field),op:"IS_NOT_NAN"}};if(gm(e.value))return{unaryFilter:{field:Xk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xk(e.field),op:Yk(e.op),value:e.value}}}(e):e instanceof Dm?(r=(t=e).getFilters().map((function(e){return Zk(e)})),1===r.length?r[0]:{compositeFilter:{op:(n=t.op,Ck[n]),filters:r}}):$v();var t,n,r}function ew(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tw=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:my.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:my.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$y.EMPTY_BYTE_STRING;e($)(this,t),this.target=n,this.targetId=r,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u}return e(Z)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),nw=function t(n){"use strict";e($)(this,t),this.se=n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(e){var t=Wk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ug(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iw=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(tm(e.integerValue));else if("doubleValue"in e){var n=tm(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),My(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(nm(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Em(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):$v()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);var r=!0,i=!1,a=void 0;try{for(var o,s=Object.keys(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.fe(u,t),this.ue(n[u],t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.ue(u,t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Ey.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),t}();iw.pe=new iw;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aw=function(){"use strict";function t(){e($)(this,t),this.He=new ow}return e(Z)(t,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Ry.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ry.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ry.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ry.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ry.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ry.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ry.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ry.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ry.resolve(Ty.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ry.resolve(Ty.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ry.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ry.resolve()}}]),t}(),ow=function(){"use strict";function t(){e($)(this,t),this.index={}}return e(Z)(t,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wy(ky.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Wy(ky.comparator)).toArray()}}]),t}();new Uint8Array(0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sw=function(){"use strict";function t(n,r,i){e($)(this,t),this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return e(Z)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sw.DEFAULT_COLLECTION_PERCENTILE=10,sw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sw.DEFAULT=new sw(41943040,sw.DEFAULT_COLLECTION_PERCENTILE,sw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sw.DISABLED=new sw(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var uw=function(){"use strict";function t(n){e($)(this,t),this.Rn=n}return e(Z)(t,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new t(0)}},{key:"bn",value:function(){return new t(-1)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cw=function(){"use strict";function t(){e($)(this,t),this.changes=new yg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e(Z)(t,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,xm.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ry.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lw=function t(n,r){"use strict";e($)(this,t),this.overlayedDocument=n,this.mutatedFields=r},fw=function(){"use strict";function t(n,r,i,a){e($)(this,t),this.remoteDocumentCache=n,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=a}return e(Z)(t,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&$g(r.mutation,e,Jy.empty(),yy.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Sg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sg(),r=this,i=Eg();return this.populateOverlays(e,i,t).next((function(){return r.computeViews(e,t,i,n).next((function(e){var t=wg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Eg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Sg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=gg(),a=_g(),o=_g();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof nk)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),$g(o.mutation,t,o.mutation.getFieldMask(),yy.now())):a.set(t.key,Jy.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new lw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=_g(),i=new Hy((function(e,t){return e-t})),a=Sg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n=!0,a=!1,o=void 0;try{for(var s,u=function(e,n){var a=n.value;a.keys().forEach((function(e){var n=t.get(e);if(null!==n){var o=r.get(e)||Jy.empty();o=a.applyToLocalView(n,o),r.set(e,o);var s=(i.get(a.batchId)||Sg()).add(e);i=i.insert(a.batchId,s)}}))},c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)u(0,s)}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}})).next((function(){for(var o=[],s=i.getReverseIterator();s.hasNext();){var u=s.getNext(),c=u.key,l=u.value,f=Ig();l.forEach((function(e){if(!a.has(e)){var n=Yg(t.get(e),r.get(e));null!==n&&f.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,c,f))}return Ry.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return r=t,Ey.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ag(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var r}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=i,s=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ry.resolve(Eg()),u=-1,c=a;return s.next((function(t){return Ry.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ry.resolve():o.remoteDocumentCache.getEntry(e,t).next((function(e){c=c.insert(t,e)}))})).next((function(){return o.populateOverlays(e,t,a)})).next((function(){return o.computeViews(e,c,t,Sg())})).next((function(e){return{batchId:u,changes:bg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ey(t)).next((function(e){var t=wg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=wg();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ry.forEach(o,(function(o){var s,u,c=(s=t,u=o.child(i),new Zm(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.getDocumentsMatchingCollectionQuery(e,c,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,xm.newInvalidDocument(r)))}));var n=wg();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&$g(a.mutation,i,Jy.empty(),yy.now()),hg(t,i)&&(n=n.insert(e,i))})),n}))}}]),t}(),hw=function(){"use strict";function t(n){e($)(this,t),this.serializer=n,this.Zn=new Map,this.Xn=new Map}return e(Z)(t,[{key:"getBundleMetadata",value:function(e,t){return Ry.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Lk(n.createTime)}),Ry.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ry.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:rw(n.bundledQuery),readTime:Lk(n.readTime)}),Ry.resolve();var n}}]),t}(),dw=function(){"use strict";function t(){e($)(this,t),this.overlays=new Hy(Ey.comparator),this.ts=new Map}return e(Z)(t,[{key:"getOverlay",value:function(e,t){return Ry.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Eg();return Ry.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Ry.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Ry.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Eg(),i=t.length+1,a=new Ey(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Ry.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Eg(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Eg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Ry.resolve(u)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new hk(t,n));var a=this.ts.get(t);void 0===a&&(a=Sg(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),t}(),pw=function(){"use strict";function t(){e($)(this,t),this.es=new Wy(vw.ns),this.ss=new Wy(vw.rs)}return e(Z)(t,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new vw(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new vw(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Ey(new ky([])),r=new vw(n,e),i=new vw(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Ey(new ky([])),n=new vw(t,e),r=new vw(t,e+1),i=Sg();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new vw(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),t}(),vw=function(){"use strict";function t(n,r){e($)(this,t),this.key=n,this.ds=r}return e(Z)(t,null,[{key:"ns",value:function(e,t){return Ey.comparator(e.key,t.key)||py(e.ds,t.ds)}},{key:"rs",value:function(e,t){return py(e.ds,t.ds)||Ey.comparator(e.key,t.key)}}]),t}(),yw=function(){"use strict";function t(n,r){e($)(this,t),this.indexManager=n,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this._s=new Wy(vw.ns)}return e(Z)(t,[{key:"checkEmpty",value:function(e){return Ry.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new lk(i,t,n,r);this.mutationQueue.push(a);var o=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;this._s=this._s.add(new vw(f.key,i)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast())}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return Ry.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ry.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Ry.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ry.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Ry.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new vw(t,0),i=new vw(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Ry.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wy(py);return t.forEach((function(e){var t=new vw(e,0),i=new vw(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Ry.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ey.isDocumentKey(i)||(i=i.child(""));var a=new vw(new Ey(i),0),o=new Wy(py);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Ry.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Zv(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Ry.forEach(t.mutations,(function(i){var a=new vw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new vw(t,0),r=this._s.firstAfterOrEqual(n);return Ry.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ry.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),t}(),mw=function(){"use strict";function t(n){e($)(this,t),this.Ts=n,this.docs=new Hy(Ey.comparator),this.size=0}return e(Z)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ry.resolve(n?n.document.mutableCopy():xm.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=gg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():xm.newInvalidDocument(e))})),Ry.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=gg(),a=t.path,o=new Ey(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Sy(xy(l),n)<=0||(r.has(l.key)||hg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ry.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){$v()}},{key:"Es",value:function(e,t){return Ry.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new gw(this)}},{key:"getSize",value:function(e){return Ry.resolve(this.size)}}]),t}(),gw=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this)).Jn=t,e(Vf)(i)}return e(Z)(r,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Ry.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),r}(cw),kw=function(){"use strict";function t(n){e($)(this,t),this.persistence=n,this.As=new yg((function(e){return Ym(e)}),Xm),this.lastRemoteSnapshotVersion=my.min(),this.highestTargetId=0,this.Rs=0,this.vs=new pw,this.targetCount=0,this.bs=uw.vn()}return e(Z)(t,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Ry.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ry.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ry.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Ry.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Ry.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new uw(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Ry.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Ry.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Ry.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ry.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ry.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Ry.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Ry.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ry.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Ry.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Ry.resolve(n)}},{key:"containsKey",value:function(e,t){return Ry.resolve(this.vs.containsKey(t))}}]),t}(),ww=function(){"use strict";function t(n,r){var i=this;e($)(this,t),this.Ps={},this.overlays={},this.Vs=new Ly(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=n(this),this.Ds=new kw(this),this.indexManager=new aw,this.remoteDocumentCache=new mw((function(e){return i.referenceDelegate.Cs(e)})),this.serializer=new nw(r),this.xs=new hw(this.serializer)}return e(Z)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new dw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new yw(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Qv("MemoryPersistence","Starting transaction:",e);var i=new bw(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Ry.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),t}(),bw=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this)).currentSequenceNumber=t,e(Vf)(i)}return r}(Cy),Ew=function(){"use strict";function t(n){e($)(this,t),this.persistence=n,this.$s=new pw,this.Ms=null}return e(Z)(t,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw $v()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Ry.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Ry.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Ry.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){var t=n;e.forEach((function(e){return t.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ry.forEach(this.Bs,(function(r){var i=Ey.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,my.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Ry.or([function(){return Ry.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(e){return new t(e)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Iw=function(){"use strict";function t(n,r,i,a){e($)(this,t),this.targetId=n,this.fromCache=r,this.Vi=i,this.Si=a}return e(Z)(t,null,[{key:"Di",value:function(e,n){var r=Sg(),i=Sg(),a=!0,o=!1,s=void 0;try{for(var u,c=n.docChanges[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return new t(e,n.fromCache,r,i)}}]),t}(),_w=function(){"use strict";function t(){e($)(this,t),this.Ci=!1}return e(Z)(t,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(t,n){var r=this;if(ng(n))return Ry.resolve(null);var i=sg(n);return this.indexManager.getIndexType(t,i).next((function(a){return 0===a?null:(null!==n.limit&&1===a&&(n=ug(n,null,"F"),i=sg(n)),r.indexManager.getDocumentsMatchingTarget(t,i).next((function(a){var o=r,s=Sg.apply(void 0,e(Jt)(a));return r.xi.getDocuments(t,s).next((function(e){return o.indexManager.getMinOffset(t,i).next((function(r){var i=o.$i(n,e);return o.Mi(n,i,s,r.readTime)?o.Ni(t,ug(n,null,"F")):o.Fi(t,i,n,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return ng(t)||r.isEqual(my.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Wv()<=Jr.DEBUG&&Qv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fg(t)),i.Fi(e,o,t,_y(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Wy(pg(e));return t.forEach((function(t,r){hg(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Wv()<=Jr.DEBUG&&Qv("QueryEngine","Using full collection scan to execute query:",fg(t)),this.xi.getDocumentsMatchingQuery(e,t,Ty.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),t}(),xw=function(){"use strict";function t(n,r,i,a){e($)(this,t),this.persistence=n,this.Bi=r,this.serializer=a,this.Li=new Hy(py),this.qi=new yg((function(e){return Ym(e)}),Xm),this.Ui=new Map,this.Ki=n.getRemoteDocumentCache(),this.Ds=n.getTargetCache(),this.xs=n.getBundleCache(),this.Gi(i)}return e(Z)(t,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fw(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(e,t,n,r){return new xw(e,t,n,r)}function Sw(e,t){return Aw.apply(this,arguments)}function Aw(){return(Aw=e(h)(e(p).mark((function t(n,r){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ey(n),e.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return i.mutationQueue.getAllMutationBatches(e).next((function(n){return t=n,i.Gi(r),i.mutationQueue.getAllMutationBatches(e)})).next((function(n){var r=[],a=[],o=Sg(),s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;r.push(h.batchId);var d=!0,p=!1,v=void 0;try{for(var y,m=h.mutations[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var g=y.value;o=o.add(g.key)}}catch(e){p=!0,v=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}var k=!0,w=!1,b=void 0;try{for(var E,I=n[Symbol.iterator]();!(k=(E=I.next()).done);k=!0){var _=E.value;a.push(_.batchId);var x=!0,T=!1,S=void 0;try{for(var A,C=_.mutations[Symbol.iterator]();!(x=(A=C.next()).done);x=!0){var O=A.value;o=o.add(O.key)}}catch(e){T=!0,S=e}finally{try{x||null==C.return||C.return()}finally{if(T)throw S}}}}catch(e){w=!0,b=e}finally{try{k||null==I.return||I.return()}finally{if(w)throw b}}return i.localDocuments.getDocuments(e,o).next((function(e){return{Qi:e,removedBatchIds:r,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Cw(e,t){var n=ey(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,a,o,s,u,c,l=t.batch.keys(),f=n.Ki.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,a=t,o=f,s=a.batch,u=s.keys(),c=Ry.resolve(),u.forEach((function(e){c=c.next((function(){return o.getEntry(i,e)})).next((function(t){var n=a.docVersions.get(e);Zv(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,a),t.isValidDocument()&&(t.setReadTime(a.commitVersion),o.addEntry(t)))}))})),c.next((function(){return r.mutationQueue.removeMutationBatch(i,s)}))).next((function(){return f.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,l,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Sg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,l)}))}))}function Ow(e){var t=ey(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function Nw(e,t){var n=ey(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,s)})));var c,l,f,h=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?h=h.withResumeToken($y.EMPTY_BYTE_STRING,my.min()).withLastLimboFreeSnapshotVersion(my.min()):a.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(a.resumeToken,r)),i=i.insert(s,h),l=h,f=a,(0===(c=u).resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size>0)&&o.push(n.Ds.updateTargetData(e,h))}}));var s=gg(),u=Sg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Rw(e,a,t.documentUpdates).next((function(e){s=e.zi,u=e.ji}))),!r.isEqual(my.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ry.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Li=i,e}))}function Rw(e,t,n){var r=Sg(),i=Sg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=gg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(my.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Qv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function Dw(e,t){var n=ey(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Lw(e,t){var n=ey(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Ry.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new tw(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Pw(e,t,n){return Mw.apply(this,arguments)}function Mw(){return(Mw=e(h)(e(p).mark((function t(n,r,i){var a,o,s;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ey(n),o=a.Li.get(r),s=i?"readwrite":"readwrite-primary",e.prev=1,e.t0=i,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",s,(function(e){return a.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Dy(e.t1)){e.next=12;break}throw e.t1;case 12:Qv("LocalStore","Failed to update sequence numbers for target ".concat(r,": ").concat(e.t1));case 13:a.Li=a.Li.remove(r),a.qi.delete(o.target);case 14:case"end":return e.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function Uw(e,t,n){var r=ey(e),i=my.min(),a=Sg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return(o=r,s=e,u=sg(t),c=ey(o),l=c.qi.get(u),void 0!==l?Ry.resolve(c.Li.get(l)):c.Ds.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:my.min(),n?a:Sg())})).next((function(e){return Fw(r,dg(t),e),{documents:e,Wi:a}}));var o,s,u,c,l}))}function Fw(e,t,n){var r=e.Ui.get(t)||my.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}var Vw=function(){"use strict";function t(){e($)(this,t),this.activeTargetIds=Cg()}return e(Z)(t,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),t}(),jw=function(){"use strict";function t(){e($)(this,t),this.Br=new Vw,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e(Z)(t,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Vw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),t}(),Bw=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),t}(),qw=function(){"use strict";function t(){var n=this;e($)(this,t),this.Ur=function(){return n.Kr()},this.Gr=function(){return n.Qr()},this.zr=[],this.jr()}return e(Z)(t,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Qv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.zr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(0)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"Qr",value:function(){Qv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.zr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(1)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),zw=null;function Hw(){return null===zw?zw=268435456+Math.round(2147483648*Math.random()):zw++,"0x"+zw.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Kw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Gw=function(){"use strict";function t(n){e($)(this,t),this.Wr=n.Wr,this.Hr=n.Hr}return e(Z)(t,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),t}(),Ww="WebChannelConnection",Qw=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this,t)).forceLongPolling=t.forceLongPolling,i.autoDetectLongPolling=t.autoDetectLongPolling,i.useFetchStreams=t.useFetchStreams,e(Vf)(i)}return e(Z)(r,[{key:"lo",value:function(e,t,n,r){var i=Hw();return new Promise((function(a,o){var s=new qv;s.setWithCredentials(!0),s.listenOnce(Uv.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Mv.NO_ERROR:var t=s.getResponseJson();Qv(Ww,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Mv.TIMEOUT:Qv(Ww,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ny(ty.DEADLINE_EXCEEDED,"Request time out"));break;case Mv.HTTP_ERROR:var n=s.getStatus();if(Qv(Ww,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=(l=u.status,f=l.toLowerCase().replace(/_/g,"-"),Object.values(ty).indexOf(f)>=0?f:ty.UNKNOWN);o(new ny(c,u.message))}else o(new ny(ty.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ny(ty.UNAVAILABLE,"Connection failed."));break;default:$v()}}finally{Qv(Ww,"RPC '".concat(e,"' ").concat(i," completed."))}var l,f}));var u=JSON.stringify(r);Qv(Ww,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=Hw(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Lv(),o=Pv(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new jv({})),this.ho(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var u=i.join("");Qv(Ww,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);var c=a.createWebChannel(u,s),l=!1,f=!1,h=new Gw({Wr:function(t){f?Qv(Ww,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Qv(Ww,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Bv.EventType.OPEN,(function(){f||Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Bv.EventType.CLOSE,(function(){f||(f=!0,Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Bv.EventType.ERROR,(function(t){f||(f=!0,Yv(Ww,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new ny(ty.UNAVAILABLE,"The operation could not be completed")))})),d(c,Bv.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Zv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=ok[e];if(void 0!==t)return vk(t)}(s),l=o.message;void 0===u&&(u=ty.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),f=!0,h.so(new ny(u,l)),c.close()}else Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Fv.STAT_EVENT,(function(t){t.stat===Vv.PROXY?Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Vv.NOPROXY&&Qv(Ww,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),r}(function(){"use strict";function t(n){e($)(this,t),this.databaseInfo=n,this.databaseId=n.databaseId;var r=n.ssl?"https":"http";this.ro=r+"://"+n.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e(Z)(t,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=Hw(),o=this.ao(e,t);Qv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.ho(s,r,i),this.lo(e,o,s,n).then((function(t){return Qv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Yv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Kw[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(e){return new Ok(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xw=function(){"use strict";function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;e($)(this,t),this.Ws=n,this.timerId=r,this._o=i,this.mo=a,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return e(Z)(t,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Qv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),t}(),$w=function(){"use strict";function t(n,r,i,a,o,s,u,c){e($)(this,t),this.Ws=n,this.bo=i,this.Po=a,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Xw(n,r)}return e(Z)(t,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.xo(),!e.t0){e.next=4;break}return e.next=4,t.close(0);case 4:case"end":return e.stop()}}),n)})))()}},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.No()){e.next=2;break}return e.abrupt("return",t.close(0));case 2:case"end":return e.stop()}}),n)})))()}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==t?r.Co.reset():n&&n.code===ty.RESOURCE_EXHAUSTED?(Jv(n.toString()),Jv("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):n&&n.code===ty.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=t,e.next=9,r.listener.Zr(n);case 9:case"end":return e.stop()}}),i)})))()}},{key:"qo",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var n=this.Uo(this.Vo),r=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(n){var i=e(zt)(n,2),a=i[0],o=i[1];t.Vo===r&&t.Ko(a,o)}),(function(e){var r=t;n((function(){var t=new ny(ty.UNKNOWN,"Fetching auth token failed: "+e.message);return r.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){var e=n;r((function(){return e.state=2,e.Do=e.Ws.enqueueAfterDelay(e.Po,1e4,(function(){return e.No()&&(e.state=3),Promise.resolve()})),e.listener.Jr()}))})),this.stream.Zr((function(e){var t=n;r((function(){return t.Go(e)}))})),this.stream.onMessage((function(e){var t=n;r((function(){return t.onMessage(e)}))}))}},{key:"ko",value:function(){var t=this;this.state=5,this.Co.Ao(e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),n)}))))}},{key:"Go",value:function(e){return Qv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){var r=t;t.Ws.enqueueAndForget((function(){return r.Vo===e?n():(Qv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),Zw=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o,s,u){var c;return e($)(this,r),(c=n.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,u)).serializer=s,e(Vf)(c)}return e(Z)(r,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:$v(),a=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Zv(void 0===t||"string"==typeof t),$y.fromBase64String(t||"")):(Zv(void 0===t||t instanceof Uint8Array),$y.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,u=s&&function(e){var t=void 0===e.code?ty.UNKNOWN:vk(e.code);return new ny(t,e.message||"")}(s);n=new Ek(i,a,o,u||null)}else if("documentChange"in t){t.documentChange;var c=t.documentChange;c.document,c.document.name,c.document.updateTime;var l=Fk(e,c.document.name),f=Lk(c.document.updateTime),h=c.document.createTime?Lk(c.document.createTime):my.min(),d=new Im({mapValue:{fields:c.document.fields}}),p=xm.newFoundDocument(l,f,h,d),v=c.targetIds||[],y=c.removedTargetIds||[];n=new wk(v,y,p.key,p)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=Fk(e,m.document),k=m.readTime?Lk(m.readTime):my.min(),w=xm.newNoDocument(g,k),b=m.removedTargetIds||[];n=new wk([],b,w.key,w)}else if("documentRemove"in t){t.documentRemove;var E=t.documentRemove;E.document;var I=Fk(e,E.document),_=E.removedTargetIds||[];n=new wk([],_,I,null)}else{if(!("filter"in t))return $v();t.filter;var x=t.filter;x.targetId;var T=x.count||0,S=new dk(T),A=x.targetId;n=new bk(A,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return my.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?my.min():t.readTime?Lk(t.readTime):my.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t,n,r,i,a={};a.database=Bk(this.serializer),a.addTarget=(t=this.serializer,i=(n=e).target,(r=$m(i)?{documents:Kk(t,i)}:{query:Gk(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Rk(t,n.resumeToken):n.snapshotVersion.compareTo(my.min())>0&&(r.readTime=Nk(t,n.snapshotVersion.toTimestamp())),r);var o=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $v()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);o&&(a.labels=o),this.Fo(a)}},{key:"Wo",value:function(e){var t={};t.database=Bk(this.serializer),t.removeTarget=e,this.Fo(t)}}]),r}($w),eb=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o,s,u){var c;return e($)(this,r),(c=n.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,u)).serializer=s,c.Ho=!1,e(Vf)(c)}return e(Z)(r,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,e(ys)(e(ks)(r.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Zv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(Zv(void 0!==i),r.map((function(e){return n=i,(r=(t=e).updateTime?Lk(t.updateTime):Lk(n)).isEqual(my.min())&&(r=Lk(n)),new Gg(r,t.transformResults||[]);var t,n,r}))):[]),n=Lk(e.commitTime);return this.listener.Zo(n,t)}var r,i;return Zv(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Bk(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Hk(t.serializer,e)}))};this.Fo(n)}}]),r}($w),tb=function(t){"use strict";e(oe)(r,(function t(){e($)(this,t)}));var n=e(ce)(r);function r(t,i,a,o){var s;return e($)(this,r),(s=n.call(this)).authCredentials=t,s.appCheckCredentials=i,s.connection=a,s.serializer=o,s.eu=!1,e(Vf)(s)}return e(Z)(r,[{key:"nu",value:function(){if(this.eu)throw new ny(ty.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=e(zt)(a,2),s=o[0],u=o[1];return i.connection.co(t,n,r,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ty.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ny(ty.UNKNOWN,e.toString())}))}},{key:"fo",value:function(t,n,r,i){var a=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var s=e(zt)(o,2),u=s[0],c=s[1];return a.connection.fo(t,n,r,u,c,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ty.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new ny(ty.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),r}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nb=function(){"use strict";function t(n,r){e($)(this,t),this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return e(Z)(t,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Jv(t),this.ru=!1):Qv("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),t}(),rb=function t(n,r,i,a,o){"use strict";var s=this;e($)(this,t),this.localStore=n,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr((function(t){var n=s;i.enqueueAndForget(e(h)(e(p).mark((function t(){return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=pb(n),!t.t0){t.next=5;break}return Qv("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ey(n)).du.add(4),e.next=4,ob(r);case 4:return r.mu.set("Unknown"),r.du.delete(4),e.next=8,ib(r);case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(n);case 5:case"end":return t.stop()}}),t)}))))})),this.mu=new nb(i,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(e){return ab.apply(this,arguments)}function ab(){return(ab=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,i=!1,a=void 0,!pb(n)){e.next=25;break}e.prev=2,o=n.wu[Symbol.iterator]();case 4:if(r=(s=o.next()).done){e.next=11;break}return u=s.value,e.next=8,u(!0);case 8:r=!0,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),i=!0,a=e.t0;case 17:e.prev=17,e.prev=18,r||null==o.return||o.return();case 20:if(e.prev=20,!i){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),t,null,[[2,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function ob(e){return sb.apply(this,arguments)}function sb(){return(sb=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,a=void 0,e.prev=1,o=n.wu[Symbol.iterator]();case 3:if(r=(s=o.next()).done){e.next=10;break}return u=s.value,e.next=7,u(!1);case 7:r=!0,e.next=3;break;case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),i=!0,a=e.t0;case 16:e.prev=16,e.prev=17,r||null==o.return||o.return();case 19:if(e.prev=19,!i){e.next=22;break}throw a;case 22:return e.finish(19);case 23:return e.finish(16);case 24:case"end":return e.stop()}}),t,null,[[1,12,16,24],[17,,19,23]])})))).apply(this,arguments)}function ub(e,t){var n=ey(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),db(n)?hb(n):zb(n).No()&&lb(n,t))}function cb(e,t){var n=ey(e),r=zb(n);n.fu.delete(t),r.No()&&fb(n,t),0===n.fu.size&&(r.No()?r.$o():pb(n)&&n.mu.set("Unknown"))}function lb(e,t){e.gu.Ot(t.targetId),zb(e).jo(t)}function fb(e,t){e.gu.Ot(t),zb(e).Wo(t)}function hb(e){e.gu=new _k({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),zb(e).start(),e.mu.ou()}function db(e){return pb(e)&&!zb(e).xo()&&e.fu.size>0}function pb(e){return 0===ey(e).du.size}function vb(e){e.gu=void 0}function yb(e){return mb.apply(this,arguments)}function mb(){return(mb=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.fu.forEach((function(e,t){lb(n,e)}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function gb(e,t){return kb.apply(this,arguments)}function kb(){return(kb=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vb(n),db(n)?(n.mu.au(r),hb(n)):n.mu.set("Unknown");case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function wb(e,t,n){return bb.apply(this,arguments)}function bb(){return bb=e(h)(e(p).mark((function t(n,r,i){var a;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.mu.set("Online"),!(r instanceof Ek&&2===r.state&&r.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.cause,a=!0,o=!1,s=void 0,e.prev=2,u=r.targetIds[Symbol.iterator]();case 4:if(a=(c=u.next()).done){e.next=15;break}if(l=c.value,e.t0=n.fu.has(l),!e.t0){e.next=12;break}return e.next=10,n.remoteSyncer.rejectListen(l,i);case 10:n.fu.delete(l),n.gu.removeTarget(l);case 12:a=!0,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(2),o=!0,s=e.t1;case 21:e.prev=21,e.prev=22,a||null==u.return||u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),t,null,[[2,17,21,29],[22,,24,28]])})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),Qv("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t.t0),t.next=11,Eb(n,t.t0);case 11:case 22:t.next=29;break;case 13:if(r instanceof wk?n.gu.Kt(r):r instanceof bk?n.gu.Jt(r):n.gu.zt(r),i.isEqual(my.min())){t.next=29;break}return t.prev=14,t.next=17,Ow(n.localStore);case 17:if(a=t.sent,t.t1=i.compareTo(a)>=0,!t.t1){t.next=22;break}return t.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken($y.EMPTY_BYTE_STRING,n.snapshotVersion)),fb(e,t);var r=new tw(n.target,t,1,n.sequenceNumber);lb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(n,i);case 24:return t.prev=24,t.t2=t.catch(14),Qv("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,Eb(n,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])}))),bb.apply(this,arguments)}function Eb(e,t,n){return Ib.apply(this,arguments)}function Ib(){return(Ib=e(h)(e(p).mark((function t(n,r,i){return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Dy(r)){t.next=2;break}throw r;case 2:return n.du.add(1),t.next=5,ob(n);case 5:n.mu.set("Offline"),i||(i=function(){return Ow(n.localStore)}),n.asyncQueue.enqueueRetryable(e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qv("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return n.du.delete(1),e.next=6,ib(n);case 6:case"end":return e.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _b(e,t){return t().catch((function(n){return Eb(e,n,t)}))}function xb(e){return Tb.apply(this,arguments)}function Tb(){return(Tb=e(h)(e(p).mark((function t(n){var r,i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=ey(n),i=Hb(r),a=r.lu.length>0?r.lu[r.lu.length-1].batchId:-1;case 2:if(!Sb(r)){e.next=19;break}return e.prev=3,e.next=6,Dw(r.localStore,a);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===r.lu.length&&i.$o(),e.abrupt("break",19);case 10:a=o.batchId,Ab(r,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Eb(r,e.t0);case 17:e.next=2;break;case 19:Cb(r)&&Ob(r);case 20:case"end":return e.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function Sb(e){return pb(e)&&e.lu.length<10}function Ab(e,t){e.lu.push(t);var n=Hb(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function Cb(e){return pb(e)&&!Hb(e).xo()&&e.lu.length>0}function Ob(e){Hb(e).start()}function Nb(e){return Rb.apply(this,arguments)}function Rb(){return(Rb=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Hb(n).tu();case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Db(e){return Lb.apply(this,arguments)}function Lb(){return(Lb=e(h)(e(p).mark((function t(n){var r,i,a,o,s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=Hb(n),i=!0,a=!1,o=void 0,e.prev=2,s=n.lu[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)c=u.value,r.Yo(c.mutations);e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),a=!0,o=e.t0;case 10:e.prev=10,e.prev=11,i||null==s.return||s.return();case 13:if(e.prev=13,!a){e.next=16;break}throw o;case 16:return e.finish(13);case 17:return e.finish(10);case 18:case"end":return e.stop()}}),t,null,[[2,6,10,18],[11,,13,17]])})))).apply(this,arguments)}function Pb(e,t,n){return Mb.apply(this,arguments)}function Mb(){return(Mb=e(h)(e(p).mark((function t(n,r,i){var a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.lu.shift(),o=fk.from(a,r,i),e.next=3,_b(n,(function(){return n.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,xb(n);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ub(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=e(h)(e(p).mark((function t(n,r){return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r&&Hb(n).Jo,!t.t0){t.next=4;break}return t.next=4,function(){var t=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pk(a=r.code)||a===ty.ABORTED){e.next=7;break}return i=n.lu.shift(),Hb(n).Oo(),e.next=5,_b(n,(function(){return n.remoteSyncer.rejectFailedWrite(i.batchId,r)}));case 5:return e.next=7,xb(n);case 7:case 8:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:Cb(n)&&Ob(n);case 5:case"end":return t.stop()}}),t)}))),Fb.apply(this,arguments)}function Vb(e,t){return jb.apply(this,arguments)}function jb(){return(jb=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=ey(n)).asyncQueue.verifyOperationInProgress(),Qv("RemoteStore","RemoteStore received new credentials"),a=pb(i),i.du.add(3),e.next=6,ob(i);case 6:return a&&i.mu.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(r);case 9:return i.du.delete(3),e.next=12,ib(i);case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Bb(e,t){return qb.apply(this,arguments)}function qb(){return(qb=e(h)(e(p).mark((function t(n,r){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ey(n),!r){e.next=7;break}return i.du.delete(2),e.next=5,ib(i);case 5:e.next=13;break;case 7:if(e.t0=r,e.t0){e.next=13;break}return i.du.add(2),e.next=12,ob(i);case 12:i.mu.set("Unknown");case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function zb(t){return t.yu||(t.yu=(r=t.datastore,i=t.asyncQueue,a={Jr:yb.bind(null,t),Zr:gb.bind(null,t),zo:wb.bind(null,t)},(o=ey(r)).nu(),new Zw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)),t.wu.push((n=e(h)(e(p).mark((function n(r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.yu.Oo(),db(t)?hb(t):t.mu.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.yu.stop();case 6:vb(t);case 7:case"end":return e.stop()}}),n)}))),function(e){return n.apply(this,arguments)}))),t.yu;var n,r,i,a,o}function Hb(t){return t.pu||(t.pu=(r=t.datastore,i=t.asyncQueue,a={Jr:Nb.bind(null,t),Zr:Ub.bind(null,t),Xo:Db.bind(null,t),Zo:Pb.bind(null,t)},(o=ey(r)).nu(),new eb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)),t.wu.push((n=e(h)(e(p).mark((function n(r){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return t.pu.Oo(),e.next=4,xb(t);case 4:e.next=9;break;case 6:return e.next=8,t.pu.stop();case 8:t.lu.length>0&&(Qv("RemoteStore","Stopping write stream with ".concat(t.lu.length," pending writes")),t.lu=[]);case 9:case"end":return e.stop()}}),n)}))),function(e){return n.apply(this,arguments)}))),t.pu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var n,r,i,a,o}var Kb=function(){"use strict";function t(n,r,i,a,o){e($)(this,t),this.asyncQueue=n,this.timerId=r,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new ry,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e(Z)(t,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ny(ty.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}],[{key:"createAndSchedule",value:function(e,n,r,i,a){var o=new t(e,n,Date.now()+r,i,a);return o.start(r),o}}]),t}();function Gb(e,t){if(Jv("AsyncQueue","".concat(t,": ").concat(e)),Dy(e))return new ny(ty.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wb=function(){"use strict";function t(n){e($)(this,t),this.comparator=n?function(e,t){return n(e,t)||Ey.comparator(e.key,t.key)}:function(e,t){return Ey.comparator(e.key,t.key)},this.keyedMap=wg(),this.sortedSet=new Hy(this.comparator)}return e(Z)(t,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),Qb=function(){"use strict";function t(){e($)(this,t),this.Iu=new Hy(Ey.comparator)}return e(Z)(t,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):$v():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),t}(),Jb=function(){"use strict";function t(n,r,i,a,o,s,u,c,l){e($)(this,t),this.query=n,this.docs=r,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=l}return e(Z)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new t(e,n,Wb.emptySet(n),o,r,i,!0,!1,a)}}]),t}(),Yb=function t(){"use strict";e($)(this,t),this.Eu=void 0,this.listeners=[]},Xb=function t(){"use strict";e($)(this,t),this.queries=new yg((function(e){return lg(e)}),cg),this.onlineState="Unknown",this.Au=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(e,t){return Zb.apply(this,arguments)}function Zb(){return(Zb=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ey(n),a=r.query,o=!1,(s=i.queries.get(a))||(o=!0,s=new Yb),!o){e.next=13;break}return e.prev=3,e.next=6,i.onListen(a);case 6:s.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Gb(e.t0,"Initialization of query '".concat(fg(r.query),"' failed")),e.abrupt("return",void r.onError(u));case 13:i.queries.set(a,s),s.listeners.push(r),r.Ru(i.onlineState),s.Eu&&r.vu(s.Eu)&&iE(i);case 14:case"end":return e.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function eE(e,t){return tE.apply(this,arguments)}function tE(){return(tE=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ey(n),a=r.query,o=!1,(s=i.queries.get(a))&&(u=s.listeners.indexOf(r))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),!o){e.next=6;break}return e.abrupt("return",(i.queries.delete(a),i.onUnlisten(a)));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nE(e,t){var n=ey(e),r=!1,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.query,f=n.queries.get(l);if(f){var h=!0,d=!1,p=void 0;try{for(var v,y=f.listeners[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){v.value.vu(c)&&(r=!0)}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}f.Eu=c}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}r&&iE(n)}function rE(e,t,n){var r=ey(e),i=r.queries.get(t),a=!0,o=!1,s=void 0;if(i)try{for(var u,c=i.listeners[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.onError(n)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r.queries.delete(t)}function iE(e){e.Au.forEach((function(e){e.next()}))}var aE=function(){"use strict";function t(n,r,i){e($)(this,t),this.query=n,this.bu=r,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}return e(Z)(t,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e.docChanges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;3!==s.type&&t.push(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e=new Jb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var u=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),u=!0):this.Du(e,this.onlineState)&&(this.Cu(e),u=!0),this.Vu=e,u}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Jb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oE=function t(n){"use strict";e($)(this,t),this.key=n},sE=function t(n){"use strict";e($)(this,t),this.key=n},uE=function(){"use strict";function t(n,r){e($)(this,t),this.query=n,this.Lu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Sg(),this.mutatedKeys=Sg(),this.Ku=pg(n),this.Gu=new Wb(this.Ku)}return e(Z)(t,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Qb,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=hg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Ku(f,u)>0||c&&n.Ku(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:s,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return n=e.type,i=t.type,(a=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $v()}})(n)-a(i)||r.Ku(e.doc,t.doc);var n,i,a})),this.Hu(n);var o=t?this.Ju():[],s=0===this.Uu.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new Jb(this.query,e.Gu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Qb,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Sg(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new sE(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new oE(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Sg();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Jb.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),t}(),cE=function t(n,r,i){"use strict";e($)(this,t),this.query=n,this.targetId=r,this.view=i},lE=function t(n){"use strict";e($)(this,t),this.key=n,this.ec=!1},fE=function(){"use strict";function t(n,r,i,a,o,s){e($)(this,t),this.localStore=n,this.remoteStore=r,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nc={},this.sc=new yg((function(e){return lg(e)}),cg),this.ic=new Map,this.rc=new Set,this.oc=new Hy(Ey.comparator),this.uc=new Map,this.cc=new pw,this.ac={},this.hc=new Map,this.lc=uw.bn(),this.onlineState="Unknown",this.fc=void 0}return e(Z)(t,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),t}();function hE(e,t){return dE.apply(this,arguments)}function dE(){return(dE=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=BE(n),!(s=i.sc.get(r))){e.next=7;break}a=s.targetId,i.sharedClientState.addLocalQueryTarget(a),o=s.view.tc(),e.next=16;break;case 7:return e.next=9,Lw(i.localStore,sg(r));case 9:return u=e.sent,i.isPrimaryClient&&ub(i.remoteStore,u),c=i.sharedClientState.addLocalQueryTarget(u.targetId),a=u.targetId,e.next=15,pE(i,r,a,"current"===c,u.resumeToken);case 15:o=e.sent;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function pE(e,t,n,r,i){return vE.apply(this,arguments)}function vE(){return vE=e(h)(e(p).mark((function t(n,r,i,a,o){var s,u,c,l,f,d;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dc=function(t,r,i){return(a=e(h)(e(p).mark((function t(n,r,i,a){var o,s,u;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.view.zu(i),e.t0=o.Mi,!e.t0){e.next=6;break}return e.next=5,Uw(n.localStore,r.query,!1).then((function(e){var t=e.documents;return r.view.zu(t,o)}));case 5:o=e.sent;case 6:return s=a&&a.targetChanges.get(r.targetId),u=r.view.applyChanges(o,n.isPrimaryClient,s),e.abrupt("return",(DE(n,r.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),t)}))),function(e,t,n,r){return a.apply(this,arguments)})(n,t,r,i);var a},t.next=3,Uw(n.localStore,r,!0);case 3:return s=t.sent,u=new uE(r,s.Wi),c=u.zu(s.documents),l=kk.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==n.onlineState,o),f=u.applyChanges(c,n.isPrimaryClient,l),DE(n,i,f.Yu),d=new cE(r,i,u),t.abrupt("return",(n.sc.set(r,d),n.ic.has(i)?n.ic.get(i).push(r):n.ic.set(i,[r]),f.snapshot));case 11:case"end":return t.stop()}}),t)}))),vE.apply(this,arguments)}function yE(e,t){return mE.apply(this,arguments)}function mE(){return(mE=e(h)(e(p).mark((function t(n,r){var i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ey(n),a=i.sc.get(r),!((o=i.ic.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.ic.set(a.targetId,o.filter((function(e){return!cg(e,r)}))),void i.sc.delete(r)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,Pw(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),cb(i.remoteStore,a.targetId),NE(i,a.targetId)})).catch(Oy);case 9:e.next=14;break;case 11:return NE(i,a.targetId),e.next=14,Pw(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function gE(e,t,n){return kE.apply(this,arguments)}function kE(){return(kE=e(h)(e(p).mark((function t(n,r,i){var a,o,s;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qE(n),e.prev=1,e.next=4,function(e,t){var n,r,i=ey(e),a=yy.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Sg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=gg(),u=Sg();return i.Ki.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o=[],s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=Zg(h,n.get(h.key).overlayedDocument);null!=d&&o.push(new nk(h.key,d,_m(d.value.mapValue),Wg.exists(!0)))}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return i.mutationQueue.addMutationBatch(e,a,o,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:bg(n)}}))}(a.localStore,r);case 4:return o=e.sent,a.sharedClientState.addPendingMutation(o.batchId),t=a,u=o.batchId,c=i,l=void 0,(l=t.ac[t.currentUser.toKey()])||(l=new Hy(py)),l=l.insert(u,c),t.ac[t.currentUser.toKey()]=l,e.next=9,ME(a,o.changes);case 9:return e.next=11,xb(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=Gb(e.t0,"Failed to persist write"),i.reject(s);case 17:case"end":return e.stop()}var t,u,c,l}),t,null,[[1,13]])})))).apply(this,arguments)}function wE(e,t){return bE.apply(this,arguments)}function bE(){return(bE=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ey(n),e.prev=1,e.next=4,Nw(i.localStore,r);case 4:return a=e.sent,r.targetChanges.forEach((function(e,t){var n=i.uc.get(t);n&&(Zv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Zv(n.ec):e.removedDocuments.size>0&&(Zv(n.ec),n.ec=!1))})),e.next=8,ME(i,a,r);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Oy(e.t0);case 14:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function EE(e,t,n){var r=ey(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ey(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i=!0,a=!1,o=void 0;try{for(var s,u=n.listeners[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.Ru(t)&&(r=!0)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}})),r&&iE(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function IE(e,t,n){return _E.apply(this,arguments)}function _E(){return(_E=e(h)(e(p).mark((function t(n,r,i){var a,o,s,u,c,l;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=ey(n)).sharedClientState.updateQueryState(r,"rejected",i),o=a.uc.get(r),!(s=o&&o.key)){e.next=14;break}return u=(u=new Hy(Ey.comparator)).insert(s,xm.newNoDocument(s,my.min())),c=Sg().add(s),l=new gk(my.min(),new Map,new Wy(py),u,c),e.next=9,wE(a,l);case 9:a.oc=a.oc.remove(s),a.uc.delete(r),PE(a),e.next=16;break;case 14:return e.next=16,Pw(a.localStore,r,!1).then((function(){return NE(a,r,i)})).catch(Oy);case 16:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function xE(e,t){return TE.apply(this,arguments)}function TE(){return(TE=e(h)(e(p).mark((function t(n,r){var i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ey(n),a=r.batch.batchId,e.prev=1,e.next=4,Cw(i.localStore,r);case 4:return o=e.sent,OE(i,a,null),CE(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,ME(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Oy(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function SE(e,t,n){return AE.apply(this,arguments)}function AE(){return(AE=e(h)(e(p).mark((function t(n,r,i){var a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ey(n),e.prev=1,e.next=4,function(e,t){var n=ey(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Zv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,r);case 4:return o=e.sent,OE(a,r,i),CE(a,r),a.sharedClientState.updateMutationState(r,"rejected",i),e.next=10,ME(a,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Oy(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function CE(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function OE(e,t,n){var r=ey(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function NE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r=!0,i=!1,a=void 0;try{for(var o,s=e.ic.get(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.sc.delete(u),n&&e.nc.wc(u,n)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||RE(e,t)}))}function RE(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(cb(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),PE(e))}function DE(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u instanceof oE?(e.cc.addReference(u.key,t),LE(e,u)):u instanceof sE?(Qv("SyncEngine","Document no longer in limbo: "+u.key),e.cc.removeReference(u.key,t),e.cc.containsKey(u.key)||RE(e,u.key)):$v()}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}function LE(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Qv("SyncEngine","New document in limbo: "+n),e.rc.add(r),PE(e))}function PE(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Ey(ky.fromString(t)),r=e.lc.next();e.uc.set(r,new lE(n)),e.oc=e.oc.insert(n,r),ub(e.remoteStore,new tw(sg(tg(n.path)),r,2,Ly.ct))}}function ME(e,t,n){return UE.apply(this,arguments)}function UE(){return UE=e(h)(e(p).mark((function t(n,r,i){var a,o,s,u;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=ey(n),o=[],s=[],u=[],t.t0=a.sc.isEmpty(),t.t0){t.next=9;break}return a.sc.forEach((function(e,t){u.push(a.dc(t,r,i).then((function(e){if((e||i)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=Iw.Di(t.targetId,e);s.push(n)}})))})),t.next=6,Promise.all(u);case 6:return a.nc.zo(o),t.next=9,function(){var t=e(h)(e(p).mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,v;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ey(n),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ry.forEach(r,(function(t){return Ry.forEach(t.Vi,(function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ry.forEach(t.Si,(function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Dy(e.t0)){e.next=10;break}throw e.t0;case 10:Qv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:for(a=!0,o=!1,s=void 0,e.prev=12,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)l=c.value,f=l.targetId,l.fromCache||(h=i.Li.get(f),d=h.snapshotVersion,v=h.withLastLimboFreeSnapshotVersion(d),i.Li=i.Li.insert(f,v));e.next=20;break;case 16:e.prev=16,e.t1=e.catch(12),o=!0,s=e.t1;case 20:e.prev=20,e.prev=21,a||null==u.return||u.return();case 23:if(e.prev=23,!o){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),t,null,[[1,6],[12,16,20,28],[21,,23,27]])})));return function(e,n){return t.apply(this,arguments)}}()(a.localStore,s);case 9:case"end":return t.stop()}}),t)}))),UE.apply(this,arguments)}function FE(e,t){return VE.apply(this,arguments)}function VE(){return(VE=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ey(n)).currentUser.isEqual(r)){e.next=11;break}return Qv("SyncEngine","User change. New user:",r.toKey()),e.next=5,Sw(i.localStore,r);case 5:return a=e.sent,i.currentUser=r,(t=i).hc.forEach((function(e){e.forEach((function(e){e.reject(new ny(ty.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.hc.clear(),i.sharedClientState.handleUserChange(r,a.removedBatchIds,a.addedBatchIds),e.next=11,ME(i,a.Qi);case 11:case"end":return e.stop()}var t}),t)})))).apply(this,arguments)}function jE(e,t){var n=ey(e),r=n.uc.get(t);if(r&&r.ec)return Sg().add(r.key);var i=Sg(),a=n.ic.get(t);if(!a)return i;var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=n.sc.get(f);i=i.unionWith(h.view.Qu)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return i}function BE(e){var t=ey(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=IE.bind(null,t),t.nc.zo=nE.bind(null,t.eventManager),t.nc.wc=rE.bind(null,t.eventManager),t}function qE(e){var t=ey(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=SE.bind(null,t),t}var zE=function(){"use strict";function t(){e($)(this,t),this.synchronizeTabs=!1}return e(Z)(t,[{key:"initialize",value:function(t){var n=this;return e(h)(e(p).mark((function r(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.serializer=Yw(t.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(t),n.persistence=n.createPersistence(t),e.next=5,n.persistence.start();case 5:n.localStore=n.createLocalStore(t),n.gcScheduler=n.createGarbageCollectionScheduler(t,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(t,n.localStore);case 8:case"end":return e.stop()}}),r)})))()}},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Tw(this.persistence,new _w,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new ww(Ew.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new jw}},{key:"terminate",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.gcScheduler&&t.gcScheduler.stop(),e.next=3,t.sharedClientState.shutdown();case 3:return e.next=5,t.persistence.shutdown();case 5:case"end":return e.stop()}}),n)})))()}}]),t}(),HE=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,[{key:"initialize",value:function(t,n){var r=this;return e(h)(e(p).mark((function i(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.localStore,e.t0){e.next=12;break}return r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=function(e){return EE(r.syncEngine,e,1)},r.remoteStore.remoteSyncer.handleCredentialChange=FE.bind(null,r.syncEngine),e.next=12,Bb(r.remoteStore,r.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),i)})))()}},{key:"createEventManager",value:function(e){return new Xb}},{key:"createDatastore",value:function(e){var t,n,r,i=Yw(e.databaseInfo.databaseId),a=(t=e.databaseInfo,new Qw(t));return n=e.authCredentials,r=e.appCheckCredentials,new tb(n,r,a,i)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return EE(o.syncEngine,e,0)},a=qw.D()?new qw:new Bw,new rb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,a=this.sharedClientState,o=e.initialUser,s=e.maxConcurrentLimboResolutions,u=t,c=new fE(n,r,i,a,o,s),u&&(c.fc=!0),c;var n,r,i,a,o,s,u,c}},{key:"terminate",value:function(){return(t=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ey(n),Qv("RemoteStore","RemoteStore shutting down."),r.du.add(5),e.next=5,ob(r);case 5:r._u.shutdown(),r.mu.set("Unknown");case 7:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var KE=function(){"use strict";function t(n){e($)(this,t),this.observer=n,this.muted=!1}return e(Z)(t,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Jv("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),t}(),GE=function(){"use strict";function t(n,r,i,a){var o=this;e($)(this,t);var s,u=this;this.authCredentials=n,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=a,this.user=Hv.UNAUTHENTICATED,this.clientId=dy.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,(s=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qv("FirestoreClient","Received user=",n.uid),e.next=3,u.authCredentialListener(n);case 3:u.user=n;case 4:case"end":return e.stop()}}),t)}))),function(e){return s.apply(this,arguments)})),this.appCheckCredentials.start(i,(function(e){return Qv("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return e(Z)(t,[{key:"getConfiguration",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),n)})))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ny(ty.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){this.asyncQueue.enterRestrictedMode();var t=new ry,n=this;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(e(h)(e(p).mark((function r(){var i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=n._onlineComponents,!e.t0){e.next=5;break}return e.next=5,n._onlineComponents.terminate();case 5:if(e.t1=n._offlineComponents,!e.t1){e.next=9;break}return e.next=9,n._offlineComponents.terminate();case 9:n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),t.resolve(),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(0),i=Gb(e.t2,"Failed to shutdown persistence"),t.reject(i);case 18:case"end":return e.stop()}}),r,null,[[0,14]])})))),t.promise}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(e,t){return QE.apply(this,arguments)}function QE(){return QE=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),Qv("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,n.getConfiguration();case 3:return i=t.sent,t.next=6,r.initialize(i);case 6:a=i.initialUser,n.setCredentialChangeListener(function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(n),e.t0){e.next=5;break}return e.next=4,Sw(r.localStore,n);case 4:a=n;case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener((function(){return n.terminate()})),n._offlineComponents=r;case 8:case"end":return t.stop()}}),t)}))),QE.apply(this,arguments)}function JE(e,t){return YE.apply(this,arguments)}function YE(){return(YE=e(h)(e(p).mark((function t(n,r){var i,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.asyncQueue.verifyOperationInProgress(),e.next=3,$E(n);case 3:return i=e.sent,Qv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.getConfiguration();case 7:return a=e.sent,e.next=10,r.initialize(i,a);case 10:n.setCredentialChangeListener((function(e){return Vb(r.remoteStore,e)})),n.setAppCheckTokenChangeListener((function(e,t){return Vb(r.remoteStore,t)})),n._onlineComponents=r;case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function XE(e){return"FirebaseError"===e.name?e.code===ty.FAILED_PRECONDITION||e.code===ty.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function $E(e){return ZE.apply(this,arguments)}function ZE(){return(ZE=e(h)(e(p).mark((function t(n){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n._offlineComponents){e.next=21;break}if(!n._uninitializedComponentsProvider){e.next=18;break}return Qv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,WE(n,n._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),XE(r=e.t0)){e.next=13;break}throw r;case 13:return Yv("Error using user provided cache. Falling back to memory cache: "+r),e.next=16,WE(n,new zE);case 16:e.next=21;break;case 18:return Qv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,WE(n,new zE);case 21:return e.abrupt("return",n._offlineComponents);case 22:case"end":return e.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function eI(e){return tI.apply(this,arguments)}function tI(){return(tI=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n._onlineComponents,e.t0){e.next=11;break}if(!n._uninitializedComponentsProvider){e.next=8;break}return Qv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,JE(n,n._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Qv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,JE(n,new HE);case 11:return e.abrupt("return",(e.t0,n._onlineComponents));case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nI(e){return eI(e).then((function(e){return e.syncEngine}))}function rI(e){return iI.apply(this,arguments)}function iI(){return(iI=e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eI(n);case 2:return r=e.sent,i=r.eventManager,e.abrupt("return",(i.onListen=hE.bind(null,r.syncEngine),i.onUnlisten=yE.bind(null,r.syncEngine),i));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function aI(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new ry;return t.asyncQueue.enqueueAndForget(e(h)(e(p).mark((function a(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n,r,i){var a=new KE({next:function(a){t.enqueueAndForget((function(){return eE(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new ny(ty.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new ny(ty.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new aE(tg(n.path),a,{includeMetadataChanges:!0,xu:!0});return $b(e,o)},e.next=3,rI(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),a)})))),i.promise}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oI=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(e,t,n){if(!n)throw new ny(ty.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uI(e){if(!Ey.isDocumentKey(e))throw new ny(ty.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function cI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":$v()}function lI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ny(ty.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=cI(e);throw new ny(ty.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fI=function(){"use strict";function t(n){var r;if(e($)(this,t),void 0===n.host){if(void 0!==n.ssl)throw new ny(ty.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.cache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new ny(ty.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new ny(ty.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}return e(Z)(t,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),t}(),hI=function(){"use strict";function t(n,r,i,a){e($)(this,t),this._authCredentials=n,this._appCheckCredentials=r,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fI({}),this._settingsFrozen=!1}return e(Z)(t,[{key:"app",get:function(){if(!this._app)throw new ny(ty.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ny(ty.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ay;switch(e.type){case"firstParty":return new cy(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ny(ty.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=oI.get(e))&&(Qv("ComponentProvider","Removing Datastore"),oI.delete(e),t.terminate()),Promise.resolve();var e,t}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=lI(e,hI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Yv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Hv.MOCK_USER;else{o=xr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new ny(ty.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Hv(u)}e._authCredentials=new oy(new iy(o,s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pI=function(){"use strict";function t(n,r,i){e($)(this,t),this.converter=r,this._key=i,this.type="document",this.firestore=n}return e(Z)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new yI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),vI=function(){"use strict";function t(n,r,i){e($)(this,t),this.converter=r,this._query=i,this.type="query",this.firestore=n}return e(Z)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),yI=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a){var o;return e($)(this,r),(o=n.call(this,t,i,tg(a)))._path=a,o.type="collection",e(Vf)(o)}return e(Z)(r,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new pI(this.firestore,null,new Ey(e))}},{key:"withConverter",value:function(e){return new r(this.firestore,e,this._path)}}]),r}(vI);function mI(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(t=Kr(t),1===arguments.length&&(n=dy.A()),sI("doc","path",n),t instanceof hI){var o,s=(o=ky).fromString.apply(o,[n].concat(e(Jt)(i)));return uI(s),new pI(t,null,new Ey(s))}var u;if(!(t instanceof pI||t instanceof yI))throw new ny(ty.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=t._path.child((u=ky).fromString.apply(u,[n].concat(e(Jt)(i))));return uI(c),new pI(t.firestore,t instanceof yI?t.converter:null,new Ey(c))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gI=function(){"use strict";function t(){var n=this;e($)(this,t),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Xw(this,"async_queue_retry"),this.qc=function(){var e=Jw();e&&Qv("AsyncQueue","Visibility state changed to "+e.visibilityState),n.Co.vo()};var r=Jw();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.qc)}return e(Z)(t,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Jw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new ry;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var t=this;return e(h)(e(p).mark((function n(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.kc.length){e.next=14;break}return e.prev=1,e.next=4,t.kc[0]();case 4:t.kc.shift(),t.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Dy(e.t0)){e.next=12;break}throw e.t0;case 12:Qv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:t.kc.length>0&&t.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){var n,r;throw t.Mc=e,t.Fc=!1,Jv("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=Kb.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&$v()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var t=this;return e(h)(e(p).mark((function n(){var r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:return r=t.Nc,e.next=4,r;case 4:if(r!==t.Nc){e.next=1;break}case 5:case"end":return e.stop()}}),n)})))()}},{key:"jc",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.$c[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.timerId===e)return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n=!0,r=!1,i=void 0;try{for(var a,o=t.$c[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.skipDelay(),"all"!==e&&s.timerId===e)break}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),t}();var kI=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o){var s;return e($)(this,r),(s=n.call(this,t,i,a,o)).type="firestore",s._queue=new gI,s._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",e(Vf)(s)}return e(Z)(r,[{key:"_terminate",value:function(){return this._firestoreClient||bI(this),this._firestoreClient.terminate()}}]),r}(hI);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(e){return e._firestoreClient||bI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bI(e){var t,n,r,i,a,o,s,u=e._freezeSettings(),c=(i=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",o=e._persistenceKey,new om(i,a,o,(s=u).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));e._firestoreClient=new GE(e._authCredentials,e._appCheckCredentials,e._queue,c),(null===(n=u.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=u.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.cache.kind,_offline:u.cache._offlineComponentProvider,_online:u.cache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EI=function(){"use strict";function t(n){e($)(this,t),this._byteString=n}return e(Z)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t($y.fromBase64String(e))}catch(e){throw new ny(ty.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(e){return new t($y.fromUint8Array(e))}}]),t}(),II=function(){"use strict";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e($)(this,t);for(var a=0;a<r.length;++a)if(0===r[a].length)throw new ny(ty.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new by(r)}return e(Z)(t,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _I=function t(n){"use strict";e($)(this,t),this._methodName=n},xI=function(){"use strict";function t(n,r){if(e($)(this,t),!isFinite(n)||n<-90||n>90)throw new ny(ty.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new ny(ty.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}return e(Z)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return py(this._lat,e._lat)||py(this._long,e._long)}}]),t}(),TI=/^__.*__$/,SI=function(){"use strict";function t(n,r,i){e($)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(Z)(t,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new nk(e,this.data,this.fieldMask,t,this.fieldTransforms):new tk(e,this.data,t,this.fieldTransforms)}}]),t}(),AI=function(){"use strict";function t(n,r,i){e($)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(Z)(t,[{key:"toMutation",value:function(e,t){return new nk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $v()}}var OI=function(){"use strict";function t(n,r,i,a,o,s){e($)(this,t),this.settings=n,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=a,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return e(Z)(t,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return GI(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(CI(this.Yc)&&TI.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),t}(),NI=function(){"use strict";function t(n,r,i){e($)(this,t),this.databaseId=n,this.ignoreUndefinedProperties=r,this.serializer=i||Yw(n)}return e(Z)(t,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new OI({Yc:e,methodName:t,oa:n,path:by.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),t}();function RI(e){var t=e._freezeSettings(),n=Yw(e._databaseId);return new NI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);qI("Data must be an object, but it was:",o,r);var s,u,c=jI(r,o);if(a.merge)s=new Jy(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l=[],f=!0,h=!1,d=void 0;try{for(var p,v=a.mergeFields[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value,m=zI(t,y,n);if(!o.contains(m))throw new ny(ty.INVALID_ARGUMENT,"Field '".concat(m,"' is specified in your field mask but missing from your input data."));WI(l,m)||l.push(m)}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}s=new Jy(l),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new SI(new Im(c),s,u)}var LI=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.apply(this,arguments)}return e(Z)(r,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof r}}]),r}(_I);function PI(e,t,n){return new OI({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var MI=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i){var a;return e($)(this,r),(a=n.call(this,t)).ca=i,e(Vf)(a)}return e(Z)(r,[{key:"_toFieldTransform",value:function(e){var t=PI(this,e,!0),n=this.ca.map((function(e){return VI(e,t)})),r=new Fg(n);return new Kg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),r}(_I);function UI(e,t,n,r){var i=e.ua(1,t,n);qI("Data must be an object, but it was:",i,r);var a=[],o=Im.empty();qy(r,(function(e,r){var s=KI(t,e,n);r=Kr(r);var u=i.na(s);if(r instanceof LI)a.push(s);else{var c=VI(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Jy(a);return new AI(o,s,i.fieldTransforms)}function FI(e,t,n,r,i,a){var o=e.ua(1,t,n),s=[zI(t,r,n)],u=[i];if(a.length%2!=0)throw new ny(ty.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(zI(t,a[c])),u.push(a[c+1]);for(var l=[],f=Im.empty(),h=s.length-1;h>=0;--h)if(!WI(l,s[h])){var d=s[h],p=u[h];p=Kr(p);var v=o.na(d);if(p instanceof LI)l.push(d);else{var y=VI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Jy(l);return new AI(f,m,o.fieldTransforms)}function VI(e,t){if(BI(e=Kr(e)))return qI("Unsupported field value:",t,e),jI(e,t);if(e instanceof _I)return function(e,t){if(!CI(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n=[],r=0,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=VI(s.value,t.sa(r));null==c&&(c={nullValue:"NULL_VALUE"}),n.push(c),r++}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Kr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=yy.fromDate(e);return{timestampValue:Nk(t.serializer,n)}}if(e instanceof yy){var r=new yy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Nk(t.serializer,r)}}if(e instanceof xI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof EI)return{bytesValue:Rk(t.serializer,e._byteString)};if(e instanceof pI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Pk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(cI(e)))}(e,t)}function jI(e,t){var n={};return zy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qy(e,(function(e,r){var i=VI(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function BI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yy||e instanceof xI||e instanceof EI||e instanceof pI||e instanceof _I)}function qI(e,t,n){if(!BI(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=cI(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}var i}function zI(e,t,n){if((t=Kr(t))instanceof II)return t._internalPath;if("string"==typeof t)return KI(e,t);throw GI("Field path arguments must be of type string or ",e,!1,void 0,n)}var HI=new RegExp("[~\\*/\\[\\]]");function KI(t,n,r){if(n.search(HI)>=0)throw GI("Invalid field path (".concat(n,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,r);try{return e(Ff)(II,e(Jt)(n.split(".")))._internalPath}catch(e){throw GI("Invalid field path (".concat(n,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,r)}}function GI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new ny(ty.INVALID_ARGUMENT,s+e+u)}function WI(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QI=function(){"use strict";function t(n,r,i,a,o){e($)(this,t),this._firestore=n,this._userDataWriter=r,this._key=i,this._document=a,this._converter=o}return e(Z)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new pI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(YI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),t}(),JI=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.apply(this,arguments)}return e(Z)(r,[{key:"data",value:function(){return e(ys)(e(ks)(r.prototype),"data",this).call(this)}}]),r}(QI);function YI(e,t){return"string"==typeof t?KI(e,t):t instanceof II?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XI=function(){"use strict";function t(){e($)(this,t)}return e(Z)(t,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(cm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $v()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return qy(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new xI(tm(e.latitude),tm(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=im(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(am(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=em(e);return new yy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ky.fromString(e);Zv(ew(n));var r=new sm(n.get(1),n.get(3)),i=new Ey(n.popFirst(5));return r.isEqual(t)||Jv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ZI=function(){"use strict";function t(n,r){e($)(this,t),this.hasPendingWrites=n,this.fromCache=r}return e(Z)(t,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),t}(),e_=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t,i,a,o,s,u){var c;return e($)(this,r),(c=n.call(this,t,i,a,o,u))._firestore=t,c._firestoreImpl=t,c.metadata=s,e(Vf)(c)}return e(Z)(r,[{key:"exists",value:function(){return e(ys)(e(ks)(r.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new t_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(YI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),r}(QI),t_=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(){return e($)(this,r),n.apply(this,arguments)}return e(Z)(r,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(ys)(e(ks)(r.prototype),"data",this).call(this,t)}}]),r}(e_);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function n_(e){e=lI(e,pI);var t=lI(e.firestore,kI);return aI(wI(t),e._key).then((function(n){return s_(t,e,n)}))}var r_=function(t){"use strict";e(oe)(r,t);var n=e(ce)(r);function r(t){var i;return e($)(this,r),(i=n.call(this)).firestore=t,e(Vf)(i)}return e(Z)(r,[{key:"convertBytes",value:function(e){return new EI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new pI(this.firestore,null,t)}}]),r}(XI);function i_(e,t,n){e=lI(e,pI);var r=lI(e.firestore,kI),i=$I(e.converter,t,n);return o_(r,[DI(RI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Wg.none())])}function a_(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];e=lI(e,pI);var o=lI(e.firestore,kI),s=RI(o);return o_(o,[("string"==typeof(t=Kr(t))||t instanceof II?FI(s,"updateDoc",e._key,t,n,i):UI(s,"updateDoc",e._key,t)).toMutation(e._key,Wg.exists(!0))])}function o_(t,n){return r=wI(t),i=n,a=new ry,r.asyncQueue.enqueueAndForget(e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=gE,e.next=3,nI(r);case 3:return e.t1=e.sent,e.t2=i,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),t)})))),a.promise;var r,i,a}function s_(e,t,n){var r=n.docs.get(t._key),i=new r_(e);return new e_(e,i,t._key,r,new ZI(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MI("arrayUnion",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Kv=ji,Pi(new Gr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new kI(new sy(e.getProvider("auth-internal")),new fy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ny(ty.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sm(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),zi(zv,"3.10.0",e),zi(zv,"3.10.0","esm2017")}();var c_=document.querySelector(".auth-menu__signup-button"),l_=document.querySelector(".auth-menu__login-button"),f_=document.querySelector(".menu"),h_=document.querySelector(".auth-menu"),d_=document.querySelector(".auth-menu-logout"),p_=document.querySelector(".auth-menu-logout__user-name"),v_=document.querySelector(".auth-menu-open-btn"),y_=document.querySelector(".singup-backdrop"),m_=document.querySelector(".login-backdrop");function g_(){f_.classList.toggle("is-hidden")}function k_(e){e.currentTarget===e.target&&(y_.classList.add("is-hidden"),y_.removeEventListener("click",k_))}function w_(e){"Escape"===e.code&&(y_.classList.add("is-hidden"),window.removeEventListener("keydown",w_))}function b_(e){e.currentTarget===e.target&&(m_.classList.add("is-hidden"),m_.removeEventListener("click",b_))}function E_(e){"Escape"===e.code&&(m_.classList.add("is-hidden"),window.removeEventListener("keydown",E_))}v_.addEventListener("click",(function(e){e.preventDefault(),f_.classList.contains("is-hidden")?(g_(),rx?(d_.classList.toggle("menu-is-hidden"),p_.innerHTML=nx):h_.classList.toggle("menu-is-hidden")):(rx?(d_.classList.toggle("menu-is-hidden"),p_.innerHTML=nx):h_.classList.toggle("menu-is-hidden"),setTimeout(g_,300))})),c_.addEventListener("click",(function(){h_.classList.toggle("menu-is-hidden"),setTimeout(g_,300),y_.classList.remove("is-hidden"),y_.addEventListener("click",k_),window.addEventListener("keydown",w_)})),l_.addEventListener("click",(function(){h_.classList.toggle("menu-is-hidden"),setTimeout(g_,300),m_.classList.remove("is-hidden"),m_.addEventListener("click",b_),window.addEventListener("keydown",E_)}));var I_=document.querySelector(".singup-form"),__=I_.querySelector(".email-field"),x_=document.querySelector(".email"),T_=I_.querySelector(".user-name-field"),S_=document.querySelector(".user-name"),A_=I_.querySelector(".create-password"),C_=document.querySelector(".password"),O_=I_.querySelector(".confirm-password"),N_=document.querySelector(".cPassword"),R_=document.querySelector(".singup-info-error");function D_(){if(!x_.value.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/))return __.classList.add("invalid");__.classList.remove("invalid")}function L_(){var e=S_.value.length;if(!(4<=e&&e<=20))return T_.classList.add("invalid");T_.classList.remove("invalid")}function P_(){if(!C_.value.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/))return A_.classList.add("invalid");A_.classList.remove("invalid")}function M_(){if(C_.value!==N_.value||""===N_.value)return O_.classList.add("invalid");O_.classList.remove("invalid")}document.querySelectorAll(".show-hide").forEach((function(e){e.addEventListener("click",(function(){var t=e.parentElement.querySelector("input");if("password"===t.type)return e.classList.replace("bx-hide","bx-show"),t.type="text";e.classList.replace("bx-show","bx-hide"),t.type="password"}))})),I_.addEventListener("submit",(function(e){e.preventDefault(),D_(),P_(),M_(),L_(),x_.addEventListener("keyup",D_),C_.addEventListener("keyup",P_),N_.addEventListener("keyup",M_),S_.addEventListener("keyup",L_),__.classList.contains("invalid")||A_.classList.contains("invalid")||O_.classList.contains("invalid")||T_.classList.contains("invalid")||y_.classList.add("is-hidden")}));var U_,F_=document.querySelector(".login-form"),V_=F_.querySelector(".email"),j_=V_.querySelector("input"),B_=F_.querySelector(".password"),q_=B_.querySelector("input"),z_=document.querySelector(".login-info-error");function H_(){try{var e=localStorage.getItem("guest");U_=JSON.parse(e)}catch(e){console.log(e)}}function K_(e){try{U_.watched.includes(e)||(U_.watched.push(e),localStorage.setItem("guest",JSON.stringify(U_)),H_())}catch(e){console.log(e)}}function G_(e){try{U_.queue.includes(e)||(U_.queue.push(e),localStorage.setItem("guest",JSON.stringify(U_)),H_())}catch(e){console.log(e)}}F_.addEventListener("submit",(function(e){function t(){if(j_.value.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/))V_.classList.remove("error"),V_.classList.add("valid");else{V_.classList.add("error"),V_.classList.remove("valid");var e=V_.querySelector(".error-txt");""!=j_.value?e.innerText="Enter a valid email address":e.innerText="Email can't be blank"}}function n(){""==q_.value?(B_.classList.add("error"),B_.classList.remove("valid")):(B_.classList.remove("error"),B_.classList.add("valid"))}e.preventDefault(),""==j_.value?V_.classList.add("shake","error"):t(),""==q_.value?B_.classList.add("shake","error"):n(),setTimeout((function(){V_.classList.remove("shake"),B_.classList.remove("shake")}),500),j_.addEventListener("keyup",t),q_.addEventListener("keyup",n),V_.classList.contains("error")||B_.classList.contains("error")||m_.classList.add("is-hidden")}));document.querySelector("#wrongSearch"),document.querySelector("[data-input]"),W_=e(h)(e(p).mark((function t(){var n,r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.themoviedb.org/3/"+"genre/movie/list?api_key=".concat("b118f38ec77100db6763b4cc83604589"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,Q_(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),t)})));var W_,Q_=function(e){var t=e.genres;sessionStorage.setItem("genresIds",JSON.stringify(t))};function J_(e){var t=e.title,n=e.original_title,r=e.overview,i=e.popularity,a=e.poster_path,o=e.id,s=e.vote_average,u=e.vote_count,c=e.genres;return a||(poster="https://live.staticflickr.com/65535/52673964597_7ac974f3b4_k.jpg"),'\n \n\n      <img\n        class="movie-detail__image"\n        src="https://image.tmdb.org/t/p/w500//'.concat(a,'"\n      />\n      <div class="modal__content">\n        <h2 class="modal__title">').concat(t,'</h2>\n        <ul class="modal__list">\n          <li class="modal__item">\n            <p class="modal__item--label">Vote / Votes</p>\n            <div class="modal__item--vote">\n              <p class="modal__item--value modal__item--value--vote">\n                <span class="modal__item--average">').concat(s.toFixed(1),'</span>\n                /<span class="modal__item--count">').concat(u,'</span>\n              </p>\n            </div>\n          </li>\n          <li class="modal__item">\n            <p class="modal__item--label">Popularity</p>\n            <p class="modal__item--value">').concat(i.toFixed(1),'</p>\n          </li>\n          <li class="modal__item">\n            <p class="modal__item--label">Original Title</p>\n            <p class="modal__item--value big">').concat(n,'</p>\n          </li>\n          <li class="modal__item">\n            <p class="modal__item--label">Genre</p>\n            <p class="modal__item--value">\n  ').concat(c.map((function(e){return e.name})).join(", "),'\n</p>\n          </li>\n        </ul>\n        <div class="modal__overview">\n          <h3 class="modal__overview--about">ABOUT</h3>\n          <p class="modal__overview--overview">').concat(r,'</p>\n        </div>\n        <div class="modal__buttons">\n          <button id="watched" class="modal__button modal__button--watched" data-id="').concat(o,'">\n            Add to watched\n          </button>\n          <button id="queue" class="modal__button modal__button--queue" data-id="').concat(o,'">\n            Add to queue\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}function Y_(e){return X_.apply(this,arguments)}function X_(){return(X_=e(h)(e(p).mark((function t(n){var r,i;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.themoviedb.org/3/movie/","b118f38ec77100db6763b4cc83604589",r="".concat("https://api.themoviedb.org/3/movie/")+"".concat(n)+"?api_key="+"".concat("b118f38ec77100db6763b4cc83604589"),e.next=5,Vn.get(r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var $_=document.querySelector(".movie-info-content"),Z_={openModalBtn:document.querySelector(".films-cards-set"),closeModalBtn:document.querySelector(".modal__cross-btn"),modal:document.querySelector(".backdrop")};function ex(){Z_.modal.classList.toggle("is-hidden")}Z_.closeModalBtn.addEventListener("click",ex);Z_.modal.addEventListener("click",(function(e){e.target===Z_.modal&&ex()})),window.addEventListener("keydown",(function(e){"Escape"!==e.key||Z_.modal.classList.add("is-hidden")}));var tx,nx,rx,ix=document.querySelector(".auth-menu-logout__logout-button"),ax=Bi({apiKey:"AIzaSyDWPLJhw8gzRksSLpE290fp-GQpT7FpHaY",authDomain:"moviedreamteam-filmoteka.firebaseapp.com",projectId:"moviedreamteam-filmoteka",storageBucket:"moviedreamteam-filmoteka.appspot.com",messagingSenderId:"18944533513",appId:"1:18944533513:web:be1f6bf81a57a82ccc84d8",measurementId:"G-LPXTQ4NYCN"}),ox=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi(),t=Mi(e=Kr(e),wo);t.isInitialized()?t.getImmediate():hs(e)}(ax),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi(),t=Mi(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Ms(e,{popupRedirectResolver:_f,persistence:[wl,Yc,$c]}),r=Ir("authTokenSyncURL");if(r){var i=Mf(r);Hc(n,i,(function(){return i(n.currentUser)})),zc(n,(function(e){return i(e)}))}var a=wr("auth");return a&&Gu(n,"http://".concat(a)),n}(ax)),sx=function(t,n){var r="string"==typeof t?t:n||"(default)",i=Mi("object"==typeof t?t:qi(),"firestore").getImmediate({identifier:r});if(!i._initialized){var a=br("firestore");a&&dI.apply(void 0,[i].concat(e(Jt)(a)))}return i}(ax),ux=function(){var t=e(h)(e(p).mark((function t(){var n,r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j_.value,r=q_.value,e.prev=2,e.next=5,t=n,i=r,Pc(Kr(ox),yc.credential(t,i));case 5:e.sent,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),z_.style.display="block",e.t0.code==_s.INVALID_PASSWORD?z_.innerHTML='<i class="error error-icon fas fa-exclamation-circle"></i>Wrong pasword. Try again':z_.innerHTML='<i class="error error-icon fas fa-exclamation-circle"></i>'.concat(e.t0.message),console.log(e.t0);case 13:case"end":return e.stop()}var t,i}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}();F_.addEventListener("submit",(function(e){e.preventDefault(),V_.classList.contains("error")||B_.classList.contains("error")||ux()}));var cx=function(){var t=e(h)(e(p).mark((function t(){var n,r,i,a,o;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x_.value,r=C_.value,i=S_.value,e.prev=3,e.next=6,Uc(ox,n,r);case 6:return a=e.sent,e.next=9,Bc(ox.currentUser,{displayName:i});case 9:return o=mI(sx,"users","".concat(a.user.uid)),e.next=12,i_(o,{watched:[],queue:[]});case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),R_.style.display="block",R_.innerHTML='<i class="bx bx-error-circle singup-error-icon"></i>'.concat(e.t0.message),console.log(e.t0);case 19:case"end":return e.stop()}}),t,null,[[3,14]])})));return function(){return t.apply(this,arguments)}}();I_.addEventListener("submit",(function(e){e.preventDefault(),cx(),__.classList.contains("invalid")||A_.classList.contains("invalid")||O_.classList.contains("invalid")||T_.classList.contains("invalid")||cx()}));var lx=function(){var t=e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){e?(tx=e.uid,nx=e.displayName,rx=!0,I_.reset(),F_.reset()):(rx=!1,H_(),null===U_&&localStorage.setItem("guest",JSON.stringify({watched:[],queue:[]})))},n=void 0,r=void 0,Kr(ox).onAuthStateChanged(t,n,r);case 1:case"end":return e.stop()}var t,n,r}),t)})));return function(){return t.apply(this,arguments)}}();lx();var fx=function(){var t=e(h)(e(p).mark((function t(){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(ox).signOut();case 2:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ix.addEventListener("click",(function(){fx(),d_.classList.toggle("menu-is-hidden"),setTimeout(g_,300)}));var hx=function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a_(mI(sx,"users","".concat(tx)),{watched:u_("".concat(n))});case 2:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),dx=function(){var t=e(h)(e(p).mark((function t(n){return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a_(mI(sx,"users","".concat(tx)),{queue:u_("".concat(n))});case 2:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),px=function(){var t=e(h)(e(p).mark((function t(){var n,r;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n_(mI(sx,"users","".concat(tx)));case 2:if(!(n=e.sent).exists()){e.next=8;break}return r=n.data(),e.abrupt("return",r);case 8:console.log("No such document!");case 9:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function vx(e){rx?hx(e):K_(e)}function yx(e){rx?dx(e):G_(e)}function mx(){var e=$_.querySelector("#watched"),t=$_.querySelector("#queue");e.addEventListener("click",(function(e){vx(e.currentTarget.dataset.id)})),t.addEventListener("click",(function(e){yx(e.currentTarget.dataset.id)}))}var gx,kx=document.querySelector(".films-cards-set");document.querySelector("[data-watched]").addEventListener("click",(function(){rx?px().then((function(e){gx=e,kx.innerHTML="",qn(gx.watched).then((function(e){kx.insertAdjacentHTML("beforeend",f(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Y_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){$_.innerHTML=J_(e),ex(),mx()})).catch((function(e){throw new Error(e)}))}))}))}))})):(H_(),kx.innerHTML="",qn(U_.watched).then((function(e){kx.insertAdjacentHTML("beforeend",f(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Y_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){$_.innerHTML=J_(e),ex(),mx()})).catch((function(e){throw new Error(e)}))}))}))})))})),document.querySelector("[data-queue]").addEventListener("click",(function(){rx?px().then((function(e){gx=e,kx.innerHTML="",qn(gx.queue).then((function(e){kx.insertAdjacentHTML("beforeend",f(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Y_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){$_.innerHTML=J_(e),ex(),mx()})).catch((function(e){throw new Error(e)}))}))}))}))})):(H_(),kx.innerHTML="",qn(U_.queue).then((function(e){kx.insertAdjacentHTML("beforeend",f(e)),document.querySelectorAll(".film-card").forEach((function(e){e.addEventListener("click",(function(e){Y_(e.currentTarget.dataset.id).then((function(e){return e.data})).then((function(e){$_.innerHTML=J_(e),ex(),mx()})).catch((function(e){throw new Error(e)}))}))}))})))}));var wx=document.querySelector(".backdrop--flex");document.querySelector(".footer__font").addEventListener("click",(function(e){e.preventDefault(),wx.classList.remove("is-hidden")}))}();
//# sourceMappingURL=library.8292952e.js.map
